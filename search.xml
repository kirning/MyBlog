<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>mysql8withNodeJs</title>
      <link href="/2019/07/12/cjxzoi3mi000qjcu99u4risrj/"/>
      <url>/2019/07/12/cjxzoi3mi000qjcu99u4risrj/</url>
      
        <content type="html"><![CDATA[<p><img src=".\mysql8withNodeJs\å¾®ä¿¡å›¾ç‰‡_20190712134146.png" alt></p><p>ç”±äºmysql8.0çš„æ›´æ–°ï¼Œmysqlçš„é»˜è®¤è®¤è¯æ–¹å¼ä» <code>mysql_native_password</code>æ›´æ¢ä¸º<code>caching_sha2_password</code>æ‰€ä»¥å¯¼è‡´ <a href="https://github.com/mysqljs/mysql" target="_blank" rel="noopener">mysql</a> åº“ç”¨ä¸äº†ï¼ŒæŠ¥é”™</p><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs undefined">(node:11152) UnhandledPromiseRejectionWarning: Error: ER_NOT_SUPPORTED_AUTH_MODE: Client does not support authentication protocol requested by server; consider upgrading MySQL client<br>    at Handshake.Sequence._packetToError (d:\workspace\gendanbao\htmlDemo\node_modules\mysql\lib\protocol\sequences\Sequence.js:47:14)<br>    at Handshake.ErrorPacket (d:\workspace\gendanbao\htmlDemo\node_modules\mysql\lib\protocol\sequences\Handshake.js:123:18)<br>    at Protocol._parsePacket (d:\workspace\gendanbao\htmlDemo\node_modules\mysql\lib\protocol\Protocol.js:291:23)<br>    at Parser._parsePacket (d:\workspace\gendanbao\htmlDemo\node_modules\mysql\lib\protocol\Parser.js:433:10)<br>    at Parser.write (d:\workspace\gendanbao\htmlDemo\node_modules\mysql\lib\protocol\Parser.js:43:10)<br>    at Protocol.write (d:\workspace\gendanbao\htmlDemo\node_modules\mysql\lib\protocol\Protocol.js:38:16)<br>    at Socket.&lt;anonymous&gt; (d:\workspace\gendanbao\htmlDemo\node_modules\mysql\lib\Connection.js:91:28)<br>    at Socket.&lt;anonymous&gt; (d:\workspace\gendanbao\htmlDemo\node_modules\mysql\lib\Connection.js:525:10)<br>    at Socket.emit (events.js:189:13)<br>    at addChunk (_stream_readable.js:284:12)<br>    --------------------<br>    at Protocol._enqueue (d:\workspace\gendanbao\htmlDemo\node_modules\mysql\lib\protocol\Protocol.js:144:48)<br>    at Protocol.handshake (d:\workspace\gendanbao\htmlDemo\node_modules\mysql\lib\protocol\Protocol.js:51:23)<br>    at PoolConnection.connect (d:\workspace\gendanbao\htmlDemo\node_modules\mysql\lib\Connection.js:119:18)<br>    at Pool.getConnection (d:\workspace\gendanbao\htmlDemo\node_modules\mysql\lib\Pool.js:48:16)<br>    at d:\workspace\gendanbao\htmlDemo\node_modules\typeorm\driver\mysql\MysqlDriver.js:764:18<br>    at new Promise (&lt;anonymous&gt;)<br>    at MysqlDriver.createPool (d:\workspace\gendanbao\htmlDemo\node_modules\typeorm\driver\mysql\MysqlDriver.js:761:16)<br>    at MysqlDriver.&lt;anonymous&gt; (d:\workspace\gendanbao\htmlDemo\node_modules\typeorm\driver\mysql\MysqlDriver.js:274:51)<br>    at step (d:\workspace\gendanbao\htmlDemo\node_modules\tslib\tslib.js:136:27)<br>    at Object.next (d:\workspace\gendanbao\htmlDemo\node_modules\tslib\tslib.js:117:57)<br>warning.js:18<br>(node:11152) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 1)<br>warning.js:18<br>(node:11152) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.<br></code></pre></td></tr></table></figure><p>æˆªæ­¢ç›®å‰(2019-07-12)ä¸ºæ­¢ï¼Œå®˜æ–¹ä»…ä»…æå‡ºäº†ä¿®å¤çš„<a href="https://github.com/mysqljs/mysql/pull/2233" target="_blank" rel="noopener">PR</a>,ä½†æ˜¯è¿˜æ²¡æœ‰åˆå¹¶åˆ°é¡¹ç›®é‡Œé¢å»ã€‚</p><p>ç›®å‰èƒ½åœ¨ç½‘ä¸Šæ‰¾åˆ°çš„è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ä¸ªï¼š</p><ol><li><p>è®¾ç½®æ•°æ®åº“ï¼Œä½¿ç”¨åŸæ¥çš„è®¤è¯æ–¹å¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED WITH mysql_native_password BY &apos;your_new_password&apos;;<br></code></pre></td></tr></table></figure></li></ol><ol start="2"><li><p>ä½¿ç”¨ <code>X DevAPI</code> åº“æ›¿æ¢ç°åœ¨çš„åº“</p><p><code>X DevAPI</code> æ˜¯ <code>mysql</code> å®˜æ–¹æ¨å‡ºçš„åº“ã€‚<a href="https://dev.mysql.com/doc/dev/connector-nodejs/8.0/" target="_blank" rel="noopener">åœ°å€</a></p></li></ol><p>å‚è€ƒï¼š</p><ul><li><a href="https://stackoverflow.com/questions/50093144/mysql-8-0-client-does-not-support-authentication-protocol-requested-by-server" target="_blank" rel="noopener">https://stackoverflow.com/questions/50093144/mysql-8-0-client-does-not-support-authentication-protocol-requested-by-server</a></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> mysql, mysqljs, node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>redux</title>
      <link href="/2019/07/04/cjxzoi3mp000vjcu94izpsjpc/"/>
      <url>/2019/07/04/cjxzoi3mp000vjcu94izpsjpc/</url>
      
        <content type="html"><![CDATA[<p> <img src="https://avatars3.githubusercontent.com/u/31783875?s=460&amp;v=4" alt="img"></p><p>ä»ä»Šå¤©å¼€å§‹ï¼Œæˆ‘è¦åšæŒæ¯å¤©ä¸€ç¯‡æ–‡ç« !!!</p><h2 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h2><blockquote><p>Reduxç”±Dan Abramovåœ¨2015å¹´åˆ›å»ºçš„ç§‘æŠ€æœ¯è¯­ã€‚æ˜¯å—2014å¹´Facebookçš„Fluxæ¶æ„ä»¥åŠå‡½æ•°å¼ç¼–ç¨‹è¯­è¨€Elmå¯å‘ã€‚å¾ˆå¿«ï¼ŒReduxå› å…¶ç®€å•æ˜“å­¦ä½“ç§¯å°åœ¨çŸ­æ—¶é—´å†…æˆä¸ºæœ€çƒ­é—¨çš„å‰ç«¯æ¶æ„ã€‚</p></blockquote><p>ä»¥ä¸Šæ˜¯ç™¾ç§‘çš„ä»‹ç»ï¼Œä¹‹æ‰€ä»¥å­¦ä¹ Reduxï¼Œç›®çš„å°±æ˜¯è§£å†³æ²¡æœ‰å…³ç³»çš„ç»„ä»¶ä¹‹é—´çš„é€šä¿¡é—®é¢˜ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> javascript,redux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>typesafe-actions-zh</title>
      <link href="/2019/07/03/cjxzoi3o6001rjcu9yh9ndao2/"/>
      <url>/2019/07/03/cjxzoi3o6001rjcu9yh9ndao2/</url>
      
        <content type="html"><![CDATA[<div align="center"><br><br># typesafe-actions<br><br>&gt; ä¸»è¦æ˜¯å­¦ä¹ ç¿»è¯‘ç”¨çš„ï¼Œç›®å‰ç¿»è¯‘ä¸å®Œæ•´<br><br>Typesafe utilities designed to reduce types <strong>verbosity</strong><br>and <strong>complexity</strong>  in Redux Architecture.<br><br><a id="more"></a><br><br><em>This library is part of the <a href="https://github.com/piotrwitek/react-redux-typescript-guide" target="_blank" rel="noopener">React &amp; Redux TypeScript Guide</a></em> ecosystem :book:<br><br><a href="https://www.npmjs.com/package/typesafe-actions" target="_blank" rel="noopener"><img src="https://img.shields.io/npm/v/typesafe-actions.svg" alt="Latest Stable Version"></a><br><a href="https://www.npmjs.com/package/typesafe-actions" target="_blank" rel="noopener"><img src="https://img.shields.io/npm/dm/typesafe-actions.svg" alt="NPM Downloads"></a><br><a href="https://www.npmjs.com/package/typesafe-actions" target="_blank" rel="noopener"><img src="https://img.shields.io/npm/dt/typesafe-actions.svg" alt="NPM Downloads"></a><br><a href="https://www.npmjs.com/package/typesafe-actions" target="_blank" rel="noopener"><img src="https://img.shields.io/bundlephobia/minzip/typesafe-actions.svg" alt="Bundlephobia Size"></a><br><br><a href="https://semaphoreci.com/piotrekwitek/typesafe-actions" target="_blank" rel="noopener"><img src="https://semaphoreci.com/api/v1/piotrekwitek/typesafe-actions/branches/master/shields_badge.svg" alt="Build Status"></a><br><a href="https://david-dm.org/piotrwitek/typesafe-actions" target="_blank" rel="noopener"><img src="https://david-dm.org/piotrwitek/typesafe-actions/status.svg" alt="Dependencies Status"></a><br><a href="https://david-dm.org/piotrwitek/typesafe-actions?type=peer" target="_blank" rel="noopener"><img src="https://img.shields.io/npm/l/typesafe-actions.svg?style=flat" alt="License"></a><br><a href="https://spectrum.chat/typesafe-actions" target="_blank" rel="noopener"><img src="https://withspectrum.github.io/badge/badge.svg" alt="Join the community on Spectrum"></a><br><br><br><br>:star: <em>Found it useful? Want more updates?</em> <a href="https://github.com/piotrwitek/typesafe-actions/stargazers" target="_blank" rel="noopener"><strong>Show your support by giving a :star:</strong></a><br><br>:tada: <em>Now updated to support <strong>TypeScript v3.5</strong></em> :tada:<br><br><a href="https://www.buymeacoffee.com/zh9guxbA5" target="_blank" rel="noopener"><br>  <img src="https://www.buymeacoffee.com/assets/img/custom_images/orange_img.png" alt="Buy Me a Coffee"><br></a><br><a href="https://www.patreon.com/piotrekwitek" target="_blank" rel="noopener"><br>  <img src="https://c5.patreon.com/external/logo/become_a_patron_button@2x.png" alt="Become a Patron" width="160"><br></a><br><br></div><hr><p><strong>Features</strong></p><ul><li><strong>minimalistic</strong> - according to <code>size-snapshot</code> (Minified: 3.48 KB, Gzipped: 1.03 KB), check also on <a href="https://bundlephobia.com/result?p=typesafe-actions" target="_blank" rel="noopener">bundlephobia</a></li><li><strong>secure and optimized</strong> - no external dependencies, bundled in 3 different formats (<code>cjs</code>, <code>esm</code> and <code>umd</code> for browser) with separate optimized bundles for dev &amp; prod (same as <code>react</code>)</li><li><strong>focus on quality</strong> - complete test-suite for an entire API surface containing regular runtime tests and extra type-tests to guarantee <strong>type soundness</strong> and to prevent regressions in the future TypeScript versions</li><li><strong>focus on performance</strong> - integrated performance benchmarks to guarantee that the computational complexity of types are in check and there are no slow-downs when your application grow <code>npm run benchmark:XXX</code></li></ul><p><strong>Codesandbox links</strong></p><ul><li>Reference Todo-App implementation using <code>typesafe-actions</code>: <a href="https://codesandbox.io/s/github/piotrwitek/typesafe-actions/tree/master/codesandbox" target="_blank" rel="noopener">Link</a></li><li>Starter to help reproduce bug reports: <a href="https://codesandbox.io/s/github/piotrwitek/typesafe-actions/tree/master/codesandbox" target="_blank" rel="noopener">Link</a></li></ul><hr><h2 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h2><!-- START doctoc generated TOC please keep comment here to allow auto update --><!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE --><ul><li><a href="#motivation">Motivation</a></li><li><a href="#installation">Installation</a></li><li><a href="#compatibility-notes">Compatibility Notes</a></li><li><a href="#contributing-guide">Contributing Guide</a></li><li><a href="#funding">Funding</a></li><li><a href="#tutorial">Tutorial</a><ul><li><a href="#constants">Constants</a></li><li><a href="#actions">Actions</a><ul><li><a href="#1-basic-actions">1. Basic actions</a></li><li><a href="#2-fsa-compliant-actions">2. FSA compliant actions</a></li><li><a href="#3-custom-actions-non-standard-use-cases">3. Custom actions (non-standard use-cases)</a></li></ul></li><li><a href="#action-helpers">Action Helpers</a><ul><li><a href="#using-action-creators-instances-instead-of-type-constants">Using action-creators instances instead of type-constants</a></li><li><a href="#using-regular-type-constants">Using regular type-constants</a></li></ul></li><li><a href="#reducers">Reducers</a><ul><li><a href="#extending-internal-types-to-enable-type-free-syntax-with-createreducer">Extending internal types to enable type-free syntax with <code>createReducer</code></a></li><li><a href="#using-createreducer-api-with-type-free-syntax">Using createReducer API with type-free syntax</a></li><li><a href="#alternative-usage-with-regular-switch-reducer">Alternative usage with regular switch reducer</a></li></ul></li><li><a href="#async-flows">Async-Flows</a><ul><li><a href="#with-redux-observable-epics">With <code>redux-observable</code> epics</a></li><li><a href="#with-redux-saga-sagas">With <code>redux-saga</code> sagas</a></li></ul></li></ul></li><li><a href="#api-docs">API Docs</a><ul><li><a href="#action-creators-api">Action-Creators API</a><ul><li><a href="#action"><code>action</code></a></li><li><a href="#createaction"><code>createAction</code></a></li><li><a href="#createstandardaction"><code>createStandardAction</code></a></li><li><a href="#createcustomaction"><code>createCustomAction</code></a></li><li><a href="#createasyncaction"><code>createAsyncAction</code></a></li></ul></li><li><a href="#reducer-creators-api">Reducer-Creators API</a><ul><li><a href="#createreducer"><code>createReducer</code></a></li></ul></li><li><a href="#action-helpers-api">Action-Helpers API</a><ul><li><a href="#gettype"><code>getType</code></a></li><li><a href="#isactionof"><code>isActionOf</code></a></li><li><a href="#isoftype"><code>isOfType</code></a></li></ul></li><li><a href="#type-helpers-api">Type-Helpers API</a><ul><li><a href="#actiontype"><code>ActionType</code></a></li><li><a href="#statetype"><code>StateType</code></a></li></ul></li></ul></li><li><a href="#migration-guides">Migration Guides</a><ul><li><a href="#v3xx-to-v4xx"><code>v3.x.x</code> to <code>v4.x.x</code></a></li><li><a href="#v2xx-to-v3xx"><code>v2.x.x</code> to <code>v3.x.x</code></a></li><li><a href="#v1xx-to-v2xx"><code>v1.x.x</code> to <code>v2.x.x</code></a></li><li><a href="#migrating-from-redux-actions-to-typesafe-actions">Migrating from <code>redux-actions</code> to <code>typesafe-actions</code></a></li></ul></li><li><a href="#recipes">Recipes</a><ul><li><a href="#restrict-meta-type-in-action-creator">Restrict Meta type in <code>action</code> creator</a></li></ul></li><li><a href="#compare-to-others">Compare to others</a><ul><li><a href="#redux-actions"><code>redux-actions</code></a></li></ul></li><li><a href="#mit-license">MIT License</a></li></ul><!-- END doctoc generated TOC please keep comment here to allow auto update --><hr><h2 id="Motivation"><a href="#Motivation" class="headerlink" title="Motivation"></a>Motivation</h2><p>å½“æ—¶æˆ‘å‡†å¤‡æŠŠReduxå’ŒTypescriptè¿›è¡Œç»“åˆå¼€å‘ï¼Œæˆ‘å°è¯•ä½¿ç”¨<a href="https://redux-actions.js.org/" target="_blank" rel="noopener">redux-actions</a> æ¥å‡å°‘éœ€è¦ç»´æŠ¤çš„ä»£ç å’Œ <strong>action-creators</strong> æ¨¡æ¿ã€‚ä¸å¹¸çš„æ˜¯ï¼Œç”±äºé”™è¯¯çš„ç±»å‹ä»¥åŠä¸å®Œæ•´çš„ç±»å‹æ¥å£å¸ƒéäº†ä»£ç ï¼Œæ‰€ä»¥ç»“æœå¹¶ä¸ç†æƒ³<a href="#redux-actions">(ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹å¯¹ç…§)</a>  </p><p>ç°å­˜çš„è§£å†³æ–¹æ¡ˆä¸æ˜¯å¤ªå†—ä½™å°±æ˜¯ä½¿ç”¨ class æ¥è§£å†³(å¯è¯»æ€§å·®ï¼Œè€Œä¸”éœ€è¦newå…³é”®å­—ğŸ˜±)</p><p><strong>æ‰€ä»¥æˆ‘åˆ›å»ºäº†<code>typesafe-actions</code> æ¥è§£å†³ä¸Šè¿°çš„ç—›ç‚¹</strong></p><p>æ ¸å¿ƒè®¾è®¡æ–¹æ¡ˆæ˜¯è®¾è®¡ä¸€ä¸ªä½¿ç”¨TypeScriptä¸­<strong>type-inference</strong>ğŸ’ªåŠ›é‡çš„APIæ¥ä¸¾èµ·â€œå¯ç»´æŠ¤çš„è´Ÿæ‹…â€çš„ç±»å‹æ³¨é‡Šã€‚å¦å¤–ï¼Œæˆ‘å¸Œæœ›ä½¿ä»–â€œçœ‹èµ·æ¥æˆ–è€…æ„Ÿè§‰èµ·æ¥â€éƒ½å°½å¯èƒ½çš„æ¥è¿‘æˆ‘ä»¬æ‰€ä¹ æƒ¯çš„JavaScriptâ¤ï¸,æ‰€ä»¥æˆ‘ä¸æƒ³å†™å¤ªå¤šå¤šä½™çš„æ³¨è§£æ¥ç»™ä»£ç å¸¦æ¥è¿‡å¤šçš„å™ªç‚¹ã€‚</p><p><a href="#table-of-contents">â‡§ back to top</a></p><hr><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">// NPM<br>npm install typesafe-actions<br><br>// YARN<br>yarn add typesafe-actions<br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">â‡§ back to top</a></p><hr><h2 id="å…¼å®¹æ€§æ³¨æ„"><a href="#å…¼å®¹æ€§æ³¨æ„" class="headerlink" title="å…¼å®¹æ€§æ³¨æ„"></a>å…¼å®¹æ€§æ³¨æ„</h2><p><strong>TypeScript support</strong></p><ul><li><a href="mailto:`typesafe-actions@1.X.X" target="_blank" rel="noopener">`typesafe-actions@1.X.X</a>` - minimal TS v2.7</li><li><a href="mailto:`typesafe-actions@2.X.X" target="_blank" rel="noopener">`typesafe-actions@2.X.X</a>` - minimal TS v2.9</li><li><a href="mailto:`typesafe-actions@3.X.X" target="_blank" rel="noopener">`typesafe-actions@3.X.X</a>` - minimal TS v3.2</li><li><a href="mailto:`typesafe-actions@4.X.X" target="_blank" rel="noopener">`typesafe-actions@4.X.X</a>` - minimal TS v3.2</li></ul><p><strong>æµè§ˆå™¨æ”¯æŒæƒ…å†µ</strong></p><p>å…¼å®¹æ‰€æœ‰ä¸»æµæµè§ˆå™¨ã€‚</p><p>æ—§çš„æµè§ˆå™¨çš„æ”¯æŒæƒ…å†µï¼šIE &lt;= 11 ï¼ŒæŸäº›æ‰‹æœºæµè§ˆå™¨ä½ éœ€è¦æä¾›ä¸‹åˆ—çš„æ‰©å±•åº“</p><ul><li><a href="https://developer.mozilla.org/pl/docs/Web/JavaScript/Referencje/Obiekty/Object/assign#Polyfill" target="_blank" rel="noopener">Object.assign</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes" target="_blank" rel="noopener">Array.prototype.includes</a></li></ul><p><strong>Recommended polyfill for IE</strong></p><p>To provide the best compatibility please include a popular polyfill package in your application, such as <code>core-js</code> or <code>react-app-polyfill</code> for <code>create-react-app</code>.<br>Please check the <code>React</code> guidelines to learn how to do that: <a href="https://reactjs.org/docs/javascript-environment-requirements.html" target="_blank" rel="noopener">LINK</a><br>A polyfill fo IE11 is included in our <code>/codesandbox</code> application.</p><p><a href="#table-of-contents">â‡§ back to top</a></p><hr><h2 id="Contributing-Guide"><a href="#Contributing-Guide" class="headerlink" title="Contributing Guide"></a>Contributing Guide</h2><p>We are open for contributions. If youâ€™re planning to contribute please make sure to read the contributing guide: <a href="/CONTRIBUTING.md">CONTRIBUTING.md</a></p><p><a href="#table-of-contents">â‡§ back to top</a></p><hr><h2 id="Funding"><a href="#Funding" class="headerlink" title="Funding"></a>Funding</h2><p><strong>Typesafe-Actions</strong> is an independent open-source project created by people investing their free time for the benefit of our community.</p><p>If you are using <strong>Typesafe-Actions</strong> please consider donating as this will guarantee the project will be updated and maintained in the long run.</p><p>Issues can be funded by anyone interested in them being resolved. Reward will be transparently distributed to the contributor handling the task through the IssueHunt platform.</p><p><a href="https://issuehunt.io/repos/110746954" target="_blank" rel="noopener"><img src="https://issuehunt.io/static/embed/issuehunt-button-v1.svg" alt="Let&#39;s fund issues in this repository"></a></p><p><a href="#table-of-contents">â‡§ back to top</a></p><hr><h2 id="Tutorial"><a href="#Tutorial" class="headerlink" title="Tutorial"></a>Tutorial</h2><p>ä¸ºäº†å±•ç¤ºä½¿ç”¨äº†è¿™ä¸ªåº“<strong>type-safety</strong>åçš„çµæ´»æ€§å’Œå¼ºå¤§ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨Reduxç»“æ„æ¥æ„å»ºä¸€ä¸ªæœ€å¸¸è§çš„åº”ç”¨â€”â€”ç»å…¸çš„ todo-app åº”ç”¨</p><blockquote><p><strong>æ³¨æ„</strong><br>è¯·ç¡®ä¿ä½ ä»¥å…·å¤‡ä»¥ä¸‹çš„çŸ¥è¯†ç‚¹ä»¥ä¾¿èƒ½é¡ºåˆ©çš„å®Œæˆæ•™ç¨‹: <a href="https://www.typescriptlang.org/docs/handbook/type-inference.html" target="_blank" rel="noopener">Type Inference</a>, <a href="https://github.com/Microsoft/TypeScript/wiki/What%27s-new-in-TypeScript#control-flow-based-type-analysis" target="_blank" rel="noopener">Control flow analysis</a>, <a href="https://github.com/Microsoft/TypeScript/wiki/What%27s-new-in-TypeScript#tagged-union-types" target="_blank" rel="noopener">Tagged union types</a>, <a href="https://www.typescriptlang.org/docs/handbook/generics.html" target="_blank" rel="noopener">Generics</a> and <a href="https://www.typescriptlang.org/docs/handbook/advanced-types.html" target="_blank" rel="noopener">Advanced Types</a>.</p></blockquote><p><a href="#table-of-contents">â‡§ back to top</a></p><h3 id="å¸¸é‡"><a href="#å¸¸é‡" class="headerlink" title="å¸¸é‡"></a>å¸¸é‡</h3><blockquote><p><strong>RECOMMENDATION:</strong><br>When using <code>typesafe-actions</code> in your project you wonâ€™t need to export and reuse <strong>string constants</strong>. Itâ€™s because <strong>action-creators</strong> created by this library have static property with <strong>action type</strong> that you can easily access using <strong>actions-helpers</strong> and then use it in reducers, epics, sagas, and basically any other place. This will simplify your codebase and remove some boilerplate code associated with the usage of <strong>string constants</strong>. Check our <code>/codesandbox</code> application to learn some best-practices to create such codebase.</p></blockquote><p><strong>ä½¿ç”¨å­—ç¬¦ä¸²å¸¸é‡æ—¶çš„Typescriptå±€é™</strong> - å½“ä½¿ç”¨å­—ç¬¦åˆ›å¸¸é‡ä½œä¸º<code>action</code>çš„typeæ—¶, è¯·ç¡®ä¿ä½¿ç”¨<strong>ç®€å•æ˜“æ‡‚çš„å­—ç¬¦ä¸²å¸¸é‡</strong>. é™åˆ¶æ¥è‡ªåŸ type-system, å› ä¸ºæ‰€æœ‰çš„åŠ¨æ€å­—ç¬¦åˆ›æ“ä½œï¼ˆæ¯”å¦‚ï¼šå­—ç¬¦ä¸²è¿æ¥ï¼Œå­—ç¬¦ä¸²æ¨¡æ¿ä»¥åŠä½œä¸ºæ˜ å°„çš„å¯¹è±¡ï¼‰ä¼šæ‰©å¤§è¿™ä¸ªç±»å‹æˆä¸ºç€æ€¥ç±»ï¼Œ<code>String</code>ã€‚ç»“æœå°±æ˜¯ç ´åäº†actionçš„ä¸Šä¸‹æ–‡æ„æ€ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// Example file: './constants.ts'</span><br><br><span class="hljs-comment">// WARNING: é”™è¯¯çš„ä½¿ç”¨æ–¹æ³•</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ADD = prefix + <span class="hljs-string">'ADD'</span>; <span class="hljs-comment">// =&gt; string</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ADD = <span class="hljs-string">`<span class="hljs-subst">$&#123;prefix&#125;</span>/ADD`</span>; <span class="hljs-comment">// =&gt; string</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>   ADD: <span class="hljs-string">'@prefix/ADD'</span>, <span class="hljs-comment">// =&gt; string</span><br>&#125;<br><br><span class="hljs-comment">// æ­£ç¡®çš„ä½¿ç”¨æ–¹æ³•</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ADD = <span class="hljs-string">'@prefix/ADD'</span>; <span class="hljs-comment">// =&gt; '@prefix/ADD'</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> TOGGLE = <span class="hljs-string">'@prefix/TOGGLE'</span>; <span class="hljs-comment">// =&gt; '@prefix/TOGGLE'</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> (&#123;<br>  ADD: <span class="hljs-string">'@prefix/ADD'</span>, <span class="hljs-comment">// =&gt; '@prefix/ADD'</span><br>&#125; <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>) <span class="hljs-comment">// working in TS v3.4 and above =&gt; https://github.com/Microsoft/TypeScript/pull/29510</span><br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">â‡§ back to top</a></p><h3 id="Actions"><a href="#Actions" class="headerlink" title="Actions"></a>Actions</h3><p>ä¸åŒçš„é¡¹ç›®æœ‰ä¸åŒçš„éœ€æ±‚ï¼Œä¸åŒçš„å›¢é˜Ÿæœ‰ä¸åŒçš„çº¦å®šï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘è®¤ä¸º<code>typesafe-actions</code>è®¾è®¡çš„ä¸ºä»€ä¹ˆéœ€è¦è®¾è®¡çš„çµæ´»ã€‚è¿™é‡Œæä¾›ä¸‰ç§å¸¸ç”¨çš„ä¸åŒæ–¹å¼è®©ä½ é€‰æ‹©ï¼Œæ‰€ä»¥ä½ å¯ä»¥é€‰æ‹©æœ€é€‚åˆä½ å›¢é˜Ÿçš„ã€‚</p><h4 id="1-Basic-actions"><a href="#1-Basic-actions" class="headerlink" title="1. Basic actions"></a>1. Basic actions</h4><p><code>action</code> å’Œ <code>createAction</code> æ˜¯ä¸¤ä¸ªä½¿ç”¨é¢„è®¾å¥½çš„å±æ€§ ({ type, payload, meta })æ¥åˆ›å»º <strong>actions</strong>çš„åˆ›å»ºè€…. è¿™ä½¿ä»–ä»¬ç®€æ´è€Œåˆè‡ªä»¥ä¸ºæ˜¯ã€‚</p><p>é‡è¦çš„å±æ€§æ˜¯ç”Ÿæˆçš„<strong>action-creator</strong>å°†å…·æœ‰å¯å˜æ•°é‡çš„å‚æ•°å¹¶ä¿ç•™å…¶è¯­ä¹‰åç§°ï¼ˆidï¼Œtitleï¼Œamountç­‰ï¼‰ã€‚</p><p>è¿™ä¸¤ä¸ªåˆ›å»ºè€…æ˜¯éå¸¸åƒçš„ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ <code>action</code> ä¸èƒ½å’Œ <code>action-helpers</code>ä¸€èµ·ä½¿ç”¨ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; action, createAction &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> add = <span class="hljs-function">(<span class="hljs-params">title: <span class="hljs-built_in">string</span></span>) =&gt;</span> action(<span class="hljs-string">'todos/ADD'</span>, &#123; id: cuid(), title, completed: <span class="hljs-literal">false</span> &#125;);<br><span class="hljs-comment">// add: (title: string) =&gt; &#123; type: "todos/ADD"; payload: &#123; id: string, title: string, completed: boolean; &#125;; &#125;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> add = createAction(<span class="hljs-string">'todos/ADD'</span>, <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> &#123;<br>  <span class="hljs-comment">// Note: "action" callback does not need "type" parameter</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">title: <span class="hljs-built_in">string</span></span>) =&gt;</span> action(&#123; id: cuid(), title, completed: <span class="hljs-literal">false</span> &#125;);<br>&#125;);<br><span class="hljs-comment">// add: (title: string) =&gt; &#123; type: "todos/ADD"; payload: &#123; id: string, title: string, completed: boolean; &#125;; &#125;</span><br></code></pre></td></tr></table></figure><h4 id="2-FSA-compliant-actions"><a href="#2-FSA-compliant-actions" class="headerlink" title="2. FSA compliant actions"></a>2. FSA compliant actions</h4><p>This style is aligned with <a href="https://github.com/redux-utilities/flux-standard-action" target="_blank" rel="noopener">Flux Standard Action</a>, so your <strong>action</strong> object shape is constrained to <code>({ type, payload, meta, error })</code>. It is using <strong>generic type arguments</strong> for <code>meta</code> and <code>payload</code> to simplify creation of type-safe action-creators.</p><p>It is important to notice that in the resulting <strong>action-creator</strong> arguments are also constrained to the predefined: <code>(payload, meta)</code>, making it the most opinionated creator.</p><blockquote><p><strong>TIP</strong>: This creator is the most compatible with <code>redux-actions</code> in case you are migrating.</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; createStandardAction &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> toggle = createStandardAction(<span class="hljs-string">'todos/TOGGLE'</span>)&lt;<span class="hljs-built_in">string</span>&gt;();<br><span class="hljs-comment">// toggle: (payload: string) =&gt; &#123; type: "todos/TOGGLE"; payload: string; &#125;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> add = createStandardAction(<span class="hljs-string">'todos/ADD'</span>).map(<br>  <span class="hljs-function">(<span class="hljs-params">title: <span class="hljs-built_in">string</span></span>) =&gt;</span> (&#123;<br>    payload: &#123; id: cuid(), title, completed: <span class="hljs-literal">false</span> &#125;,<br>  &#125;)<br>);<br><span class="hljs-comment">// add: (payload: string) =&gt; &#123; type: "todos/ADD"; payload: &#123; id: string, title: string, completed: boolean; &#125;; &#125;</span><br></code></pre></td></tr></table></figure><h4 id="3-Custom-actions-non-standard-use-cases"><a href="#3-Custom-actions-non-standard-use-cases" class="headerlink" title="3. Custom actions (non-standard use-cases)"></a>3. Custom actions (non-standard use-cases)</h4><p>This approach will give us the most flexibility of all creators, providing a variadic number of named parameters and custom properties on <strong>action</strong> object to fit all the custom use-cases.</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; createCustomAction &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">const</span> add = createCustomAction(<span class="hljs-string">'todos/ADD'</span>, <span class="hljs-function"><span class="hljs-params">type</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">title: <span class="hljs-built_in">string</span></span>) =&gt;</span> (&#123; <span class="hljs-keyword">type</span>, id: cuid(), title, completed: <span class="hljs-literal">false</span> &#125;);<br>&#125;);<br><span class="hljs-comment">// add: (title: string) =&gt; &#123; type: "todos/ADD"; id: string; title: string; completed: boolean; &#125;</span><br></code></pre></td></tr></table></figure><blockquote><p><strong>TIP</strong>: For more examples please check the <a href="#table-of-contents">API Docs</a>.</p></blockquote><blockquote><p><strong>RECOMMENDATION</strong><br>Common approach is to create a <code>RootAction</code> in the central point of your redux store - it will represent all possible action types in your application. You can even merge it with third-party action types as shown below to make your model complete.</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// types.d.ts</span><br><span class="hljs-comment">// example of including `react-router` actions in `RootAction`</span><br><span class="hljs-keyword">import</span> &#123; RouterAction, LocationChangeAction &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-redux'</span>;<br><span class="hljs-keyword">import</span> &#123; TodosAction &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'../features/todos'</span>;<br><br><span class="hljs-keyword">type</span> ReactRouterAction = RouterAction | LocationChangeAction;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> RootAction =<br>  | ReactRouterAction<br>  | TodosAction;<br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">â‡§ back to top</a></p><h3 id="Action-Helpers"><a href="#Action-Helpers" class="headerlink" title="Action Helpers"></a>Action Helpers</h3><p>ç°åœ¨æˆ‘æƒ³å±•æ—¶ä»¥ä¸‹<strong>action-helpers</strong>ä»¥åŠè§£é‡Šä¸€ä¸‹ä»–çš„ç”¨ä¾‹ã€‚æˆ‘ä»¬å°†è¦å®ç°ä¸€ä¸ªæ²¡æœ‰å‰¯ä½œç”¨çš„å½“ç”¨æˆ·æˆåŠŸæ·»åŠ æ–°æ•°æ®æ—¶å±•ç°æˆåŠŸçš„æç¤ºã€‚</p><p>ä¸»è¦æ³¨æ„ä»¥ä¸‹ï¼Œæ‰€æœ‰çš„è¿™äº›helperséƒ½æ˜¯æ‰®æ¼”è€…ç±»å‹å®ˆæŠ¤è€…ï¼Œæ‰€ä»¥ä»–ä»¬å…¨éƒ¨éƒ½æ˜¯å°æ ‡ç­¾ç»„æˆçš„å”¯ä¸€Type(<code>RootAction</code>)æ¥æŒ‡å®šæˆ‘ä»¬æƒ³è¦çš„actionç±»å‹</p><p><strong>ä½¿ç”¨<code>action-creators</code>æ¥æ›¿ä»£ç±»å‹å¸¸é‡</strong></p><p>æˆ‘ä»¬å¯ä»¥ç”¨<strong>action-creators</strong>æ¥æ›¿ä»£ç±»å‹å¸¸é‡æ¥åŒ¹é…reducesé‡ŒæŒ‡å®šçš„actionä»¥åŠepicsç”¨ä¾‹ã€‚é€šè¿‡ä¸ºåŒ…å«ç±»å‹å­—ç¬¦çš„<strong>action-creator</strong>å®ä¾‹æ·»åŠ é™æ€å±æ€§æ¥ä½¿ç”¨</p><p>æœ€å¸¸ç”¨çš„å‘½ä»¤å°±æ˜¯<code>getType</code>ï¼Œä»–å¸¸ç”¨äºå¸¸è§„çš„reducerä¸­çš„switch cases:</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">switch</span> (action.type) &#123;<br>  <span class="hljs-keyword">case</span> getType(todos.add):<br>    <span class="hljs-comment">// below action type is narrowed to: &#123; type: "todos/ADD"; payload: Todo; &#125;</span><br>    <span class="hljs-keyword">return</span> [...state, action.payload];<br>  ...<br></code></pre></td></tr></table></figure><p>Then we have the <code>isActionOf</code> helper which accept <strong>action-creator</strong> as first parameter matching actions with corresponding type passed as second parameter (itâ€™s a curried function).</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// epics.ts</span><br><span class="hljs-keyword">import</span> &#123; isActionOf &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">import</span> &#123; add &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'./actions'</span>;<br><br><span class="hljs-keyword">const</span> addTodoToast: Epic&lt;RootAction, RootAction, RootState, Services&gt; = <span class="hljs-function">(<span class="hljs-params">action$, store, &#123; toastService &#125;</span>) =&gt;</span><br>  action$.pipe(<br>    filter(isActionOf(add)),<br>    tap(<span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> &#123; <span class="hljs-comment">// here action type is narrowed to: &#123; type: "todos/ADD"; payload: Todo; &#125;</span><br>      toastService.success(...);<br>    &#125;)<br>    ...<br>    <br>  <span class="hljs-comment">// Works with multiple actions! (with type-safety up to 5)</span><br>  action$.pipe(<br>    filter(isActionOf([add, toggle])) <span class="hljs-comment">// here action type is narrowed to a smaller union:</span><br>    <span class="hljs-comment">// &#123; type: "todos/ADD"; payload: Todo; &#125; | &#123; type: "todos/TOGGLE"; payload: string; &#125;</span><br></code></pre></td></tr></table></figure><h4 id="Using-regular-type-constants"><a href="#Using-regular-type-constants" class="headerlink" title="Using regular type-constants"></a>Using regular type-constants</h4><p>Alternatively if your team prefers to use regular <strong>type-constants</strong> you can still do that.</p><p>We have an equivalent helper (<code>isOfType</code>) which accept <strong>type-constants</strong> as parameter providing the same functionality.</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// epics.ts</span><br><span class="hljs-keyword">import</span> &#123; isOfType &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">import</span> &#123; ADD &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'./constants'</span>;<br><br><span class="hljs-keyword">const</span> addTodoToast: Epic&lt;RootAction, RootAction, RootState, Services&gt; = <span class="hljs-function">(<span class="hljs-params">action$, store, &#123; toastService &#125;</span>) =&gt;</span><br>  action$.pipe(<br>    filter(isOfType(ADD)),<br>    tap(<span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> &#123; <span class="hljs-comment">// here action type is narrowed to: &#123; type: "todos/ADD"; payload: Todo; &#125;</span><br>    ...<br>    <br>  <span class="hljs-comment">// Works with multiple actions! (with type-safety up to 5)</span><br>  action$.pipe(<br>    filter(isOfType([ADD, TOGGLE])) <span class="hljs-comment">// here action type is narrowed to a smaller union:</span><br>    <span class="hljs-comment">// &#123; type: "todos/ADD"; payload: Todo; &#125; | &#123; type: "todos/TOGGLE"; payload: string; &#125;</span><br></code></pre></td></tr></table></figure><blockquote><p><strong>TIP:</strong> you can use action-helpers with other types of conditional statements.</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; isActionOf, isOfType &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">if</span> (isActionOf(actions.add, action)) &#123;<br>  <span class="hljs-comment">// here action is narrowed to: &#123; type: "todos/ADD"; payload: Todo; &#125;</span><br>&#125;<br><span class="hljs-comment">// or with type constants</span><br><span class="hljs-keyword">if</span> (isOfType(types.ADD, action)) &#123;<br>  <span class="hljs-comment">// here action is narrowed to: &#123; type: "todos/ADD"; payload: Todo; &#125;</span><br>&#125;<br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">â‡§ back to top</a></p><h3 id="Reducers"><a href="#Reducers" class="headerlink" title="Reducers"></a>Reducers</h3><h4 id="Extending-internal-types-to-enable-type-free-syntax-with-createReducer"><a href="#Extending-internal-types-to-enable-type-free-syntax-with-createReducer" class="headerlink" title="Extending internal types to enable type-free syntax with createReducer"></a>Extending internal types to enable type-free syntax with <code>createReducer</code></h4><p>We can extend internal types of <code>typesafe-actions</code> module with <code>RootAction</code> definition of our application so that you donâ€™t need to pass generic type arguments with <code>createReducer</code> API:</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// types.d.ts</span><br><span class="hljs-keyword">import</span> &#123; StateType, ActionType &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> RootAction = ActionType&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./actions'</span>).default&gt;;<br><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">module</span> 'typesafe-actions' &#123;<br>  <span class="hljs-keyword">interface</span> Types &#123;<br>    RootAction: RootAction;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// now you can use</span><br>createReducer(...)<br><span class="hljs-comment">// instead of</span><br>createReducer&lt;State, Action&gt;(...)<br></code></pre></td></tr></table></figure><h4 id="Using-createReducer-API-with-type-free-syntax"><a href="#Using-createReducer-API-with-type-free-syntax" class="headerlink" title="Using createReducer API with type-free syntax"></a>Using createReducer API with type-free syntax</h4><p>We can prevent a lot of boilerplate code and type errors using this powerfull and completely typesafe API.</p><p>Using handleAction chain API:<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// using action-creators</span><br><span class="hljs-keyword">const</span> counterReducer = createReducer(<span class="hljs-number">0</span>)<br>  <span class="hljs-comment">// state and action type is automatically inferred and return type is validated to be exact type</span><br>  .handleAction(add, <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> state + action.payload)<br>  .handleAction(add, ... <span class="hljs-comment">// &lt;= error is shown on duplicated or invalid actions</span><br>  .handleAction(increment, <span class="hljs-function">(<span class="hljs-params">state, _</span>) =&gt;</span> state + <span class="hljs-number">1</span>)<br>  .handleAction(... <span class="hljs-comment">// &lt;= error is shown when all actions are handled</span><br>  <br>  <span class="hljs-comment">// or handle multiple actions using array</span><br>  .handleAction([add, increment], <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span><br>    state + (action.type === <span class="hljs-string">'ADD'</span> ? action.payload : <span class="hljs-number">1</span>)<br>  );<br><br><span class="hljs-comment">// all the same scenarios are working when using type-constants</span><br><span class="hljs-keyword">const</span> counterReducer = createReducer(<span class="hljs-number">0</span>)<br>  .handleAction(<span class="hljs-string">'ADD'</span>, <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> state + action.payload)<br>  .handleAction(<span class="hljs-string">'INCREMENT'</span>, <span class="hljs-function">(<span class="hljs-params">state, _</span>) =&gt;</span> state + <span class="hljs-number">1</span>);<br>  <br>counterReducer(<span class="hljs-number">0</span>, add(<span class="hljs-number">4</span>)); <span class="hljs-comment">// =&gt; 4</span><br>counterReducer(<span class="hljs-number">0</span>, increment()); <span class="hljs-comment">// =&gt; 1</span><br></code></pre></td></tr></table></figure></p><h4 id="Alternative-usage-with-regular-switch-reducer"><a href="#Alternative-usage-with-regular-switch-reducer" class="headerlink" title="Alternative usage with regular switch reducer"></a>Alternative usage with regular switch reducer</h4><p>First we need to start by generating a <strong>tagged union type</strong> of actions (<code>TodosAction</code>). Itâ€™s very easy to do by using <code>ActionType</code> <strong>type-helper</strong>.</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; ActionType &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> todos <span class="hljs-keyword">from</span> <span class="hljs-string">'./actions'</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> TodosAction = ActionType&lt;<span class="hljs-keyword">typeof</span> todos&gt;;<br></code></pre></td></tr></table></figure><p>Now we define a regular reducer function by annotating <code>state</code> and <code>action</code> arguments with their respective types (<code>TodosAction</code> for action type).</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> (state: Todo[] = [], action: TodosAction) =&gt; &#123;<br></code></pre></td></tr></table></figure><p>Now in the switch cases we can use the <code>type</code> property of action to narrowing the union type of <code>TodosAction</code> to an action that is corresponding to that type.</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">switch</span> (action.type) &#123;<br>  <span class="hljs-keyword">case</span> getType(add):<br>    <span class="hljs-comment">// below action type is narrowed to: &#123; type: "todos/ADD"; payload: Todo; &#125;</span><br>    <span class="hljs-keyword">return</span> [...state, action.payload];<br>  ...<br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">â‡§ back to top</a></p><h3 id="Async-Flows"><a href="#Async-Flows" class="headerlink" title="Async-Flows"></a>Async-Flows</h3><h4 id="With-redux-observable-epics"><a href="#With-redux-observable-epics" class="headerlink" title="With redux-observable epics"></a>With <code>redux-observable</code> epics</h4><p>To handle an async-flow of http request lets implement an <code>epic</code>. The <code>epic</code> will call a remote API using an injected <code>todosApi</code> client, which will return a Promise that weâ€™ll need to handle by using three different actions that correspond to triggering, success and failure.</p><p>To help us simplify the creation process of necessary action-creators, weâ€™ll use <code>createAsyncAction</code> function providing us with a nice common interface object <code>{ request: ... , success: ... , failure: ... }</code> that will nicely fit with the functional API of <code>RxJS</code>.<br>This will mitigate <strong>redux verbosity</strong> and greatly reduce the maintenance cost of type annotations for <strong>actions</strong> and <strong>action-creators</strong> that would otherwise be written explicitly.</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// actions.ts</span><br><span class="hljs-keyword">import</span> &#123; createAsyncAction &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">const</span> fetchTodosAsync = createAsyncAction(<br>  <span class="hljs-string">'FETCH_TODOS_REQUEST'</span>,<br>  <span class="hljs-string">'FETCH_TODOS_SUCCESS'</span>,<br>  <span class="hljs-string">'FETCH_TODOS_FAILURE'</span>,<br>  <span class="hljs-string">'FETCH_TODOS_CANCEL'</span><br>)&lt;<span class="hljs-built_in">string</span>, Todo[], <span class="hljs-built_in">Error</span>, <span class="hljs-built_in">string</span>&gt;();<br><br><span class="hljs-comment">// epics.ts</span><br><span class="hljs-keyword">import</span> &#123; fetchTodosAsync &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'./actions'</span>;<br><br><span class="hljs-keyword">const</span> fetchTodosFlow: Epic&lt;RootAction, RootAction, RootState, Services&gt; = <span class="hljs-function">(<span class="hljs-params">action$, store, &#123; todosApi &#125;</span>) =&gt;</span><br>  action$.pipe(<br>    filter(isActionOf(fetchTodosAsync.request)),<br>    switchMap(<span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span><br>      <span class="hljs-keyword">from</span>(todosApi.getAll(action.payload)).pipe(<br>        map(fetchTodosAsync.success),<br>        catchError(pipe(fetchTodosAsync.failure, of)),<br>        takeUntil(action$.pipe(filter(isActionOf(fetchTodosAsync.cancel)))),<br>      )<br>    );<br></code></pre></td></tr></table></figure><h4 id="With-redux-saga-sagas"><a href="#With-redux-saga-sagas" class="headerlink" title="With redux-saga sagas"></a>With <code>redux-saga</code> sagas</h4><p>With sagas itâ€™s not possible to achieve the same degree of type-safety as with epics because of limitations coming from <code>redux-saga</code> API design.</p><p>Typescript issues:</p><ul><li><a href="https://github.com/Microsoft/TypeScript/issues/2983" target="_blank" rel="noopener">Typescript does not currently infer types resulting from a <code>yield</code> statement</a> so you have to manually assert the type  e.g. <code>const response: Todo[] = yield call(...</code></li></ul><p><em>Here is the latest recommendation although itâ€™s not fully optimal. If you managed to cook something better, please open an issue to share your finding with us.</em></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; createAsyncAction &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">const</span> fetchTodosAsync = createAsyncAction(<br>  <span class="hljs-string">'FETCH_TODOS_REQUEST'</span>,<br>  <span class="hljs-string">'FETCH_TODOS_SUCCESS'</span>,<br>  <span class="hljs-string">'FETCH_TODOS_FAILURE'</span><br>)&lt;<span class="hljs-built_in">string</span>, Todo[], <span class="hljs-built_in">Error</span>&gt;();<br><br><span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">addTodoSaga</span>(<span class="hljs-params">action: ReturnType&lt;<span class="hljs-keyword">typeof</span> fetchTodosAsync.request&gt;</span>): <span class="hljs-title">Generator</span> </span>&#123;<br>    <span class="hljs-keyword">const</span> response: Todo[] = <span class="hljs-keyword">yield</span> call(todosApi.getAll, action.payload);<br><br>    <span class="hljs-keyword">yield</span> put(fetchTodosAsync.success(response));<br>  &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>    <span class="hljs-keyword">yield</span> put(fetchTodosAsync.failure(err));<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">â‡§ back to top</a></p><hr><h2 id="API-Docs"><a href="#API-Docs" class="headerlink" title="API Docs"></a>API Docs</h2><h3 id="Action-Creators-API"><a href="#Action-Creators-API" class="headerlink" title="Action-Creators API"></a>Action-Creators API</h3><h4 id="action"><a href="#action" class="headerlink" title="action"></a><code>action</code></h4><p><em>Simple <strong>action factory function</strong> to simplify creation of type-safe actions.</em></p><blockquote><p><strong>WARNING</strong>:<br>This approach will <strong>NOT WORK</strong> with <strong>action-helpers</strong> (such as <code>getType</code> and <code>isActionOf</code>) because it is creating <strong>action objects</strong> while all the other creator functions are returning <strong>enhanced action-creators</strong>.</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ts">action(<span class="hljs-keyword">type</span>, payload?, meta?, error?)<br></code></pre></td></tr></table></figure><p>Examples:<br><a href="src/action.spec.ts">&gt; Advanced Usage Examples</a></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> increment = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> action(<span class="hljs-string">'INCREMENT'</span>);<br><span class="hljs-comment">// &#123; type: 'INCREMENT'; &#125;</span><br><br><span class="hljs-keyword">const</span> createUser = <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">number</span>, name: <span class="hljs-built_in">string</span></span>) =&gt;</span><br>  action(<span class="hljs-string">'CREATE_USER'</span>, &#123; id, name &#125;);<br><span class="hljs-comment">// &#123; type: 'CREATE_USER'; payload: &#123; id: number; name: string &#125;; &#125;</span><br><br><span class="hljs-keyword">const</span> getUsers = <span class="hljs-function">(<span class="hljs-params">params?: <span class="hljs-built_in">string</span></span>) =&gt;</span><br>  action(<span class="hljs-string">'GET_USERS'</span>, <span class="hljs-literal">undefined</span>, params);<br><span class="hljs-comment">// &#123; type: 'GET_USERS'; meta: string | undefined; &#125;</span><br></code></pre></td></tr></table></figure><blockquote><p><strong>TIP</strong>: Starting from TypeScript v3.4 you can achieve similar results using new <code>as const</code> operator.</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> increment = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (&#123; <span class="hljs-keyword">type</span>: <span class="hljs-string">'INCREMENT'</span> &#125; <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>);<br></code></pre></td></tr></table></figure><h4 id="createAction"><a href="#createAction" class="headerlink" title="createAction"></a><code>createAction</code></h4><p><em>Create an enhanced action-creator with unlimited number of arguments.</em></p><ul><li>Resulting action-creator will preserve semantic names of their arguments  <code>(id, title, amount, etc...)</code>.</li><li>Returned action object have predefined properties <code>({ type, payload, meta })</code></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ts">createAction(<span class="hljs-keyword">type</span>)<br>createAction(<span class="hljs-keyword">type</span>, <span class="hljs-function"><span class="hljs-params">actionCallback</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">namedArg1, namedArg2, ...namedArgN</span>) =&gt;</span> actionCallback(payload?, meta?)<br>&#125;)<br></code></pre></td></tr></table></figure><blockquote><p><strong>TIP</strong>: Injected <code>actionCallback</code> argument is similar to <code>action</code> API but doesnâ€™t need the â€œtypeâ€ parameter</p></blockquote><p>Examples:<br><a href="src/create-action.spec.ts">&gt; Advanced Usage Examples</a></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; createAction &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-comment">// - with type only</span><br><span class="hljs-keyword">const</span> increment = createAction(<span class="hljs-string">'INCREMENT'</span>);<br>dispatch(increment());<br><span class="hljs-comment">// &#123; type: 'INCREMENT' &#125;;</span><br><br><span class="hljs-comment">// - with type and payload</span><br><span class="hljs-keyword">const</span> add = createAction(<span class="hljs-string">'ADD'</span>, <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">amount: <span class="hljs-built_in">number</span></span>) =&gt;</span> action(amount);<br>&#125;);<br>dispatch(add(<span class="hljs-number">10</span>));<br><span class="hljs-comment">// &#123; type: 'ADD', payload: number &#125;</span><br><br><span class="hljs-comment">// - with type and meta</span><br><span class="hljs-keyword">const</span> getTodos = createAction(<span class="hljs-string">'GET_TODOS'</span>, <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">params: Params</span>) =&gt;</span> action(<span class="hljs-literal">undefined</span>, params);<br>&#125;);<br>dispatch(getTodos(<span class="hljs-string">'some_meta'</span>));<br><span class="hljs-comment">// &#123; type: 'GET_TODOS', meta: Params &#125;</span><br><br><span class="hljs-comment">// - and finally with type, payload and meta</span><br><span class="hljs-keyword">const</span> getTodo = createAction(<span class="hljs-string">'GET_TODO'</span>, <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span>, meta: <span class="hljs-built_in">string</span></span>) =&gt;</span> action(id, meta);<br>&#125;);<br>dispatch(getTodo(<span class="hljs-string">'some_id'</span>, <span class="hljs-string">'some_meta'</span>));<br><span class="hljs-comment">// &#123; type: 'GET_TODO', payload: string, meta: string &#125;</span><br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">â‡§ back to top</a></p><h4 id="createStandardAction"><a href="#createStandardAction" class="headerlink" title="createStandardAction"></a><code>createStandardAction</code></h4><p><em>Create an enhanced action-creator compatible with <a href="https://github.com/redux-utilities/flux-standard-action" target="_blank" rel="noopener">Flux Standard Action</a> to reduce boilerplate and enforce convention.</em></p><ul><li>Resulting action-creator have predefined arguments <code>(payload, meta)</code></li><li>Returned action object have predefined properties <code>({ type, payload, meta, error })</code></li><li>But it also contains a <code>.map()</code> method that allow to map <code>(payload, meta)</code> arguments to a custom action object <code>({ customProp1, customProp2, ...customPropN })</code></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ts">createStandardAction(<span class="hljs-keyword">type</span>)()<br>createStandardAction(<span class="hljs-keyword">type</span>)&lt;TPayload, TMeta?&gt;()<br>createStandardAction(<span class="hljs-keyword">type</span>).map(<span class="hljs-function">(<span class="hljs-params">payload, meta</span>) =&gt;</span> (&#123; customProp1, customProp2, ...customPropN &#125;))<br></code></pre></td></tr></table></figure><blockquote><p><strong>TIP</strong>: Using <code>undefined</code> as generic type parameter you can make the action-creator function require NO parameters.</p></blockquote><p>Examples:<br><a href="src/create-standard-action.spec.ts">&gt; Advanced Usage Examples</a></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; createStandardAction &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-comment">// Very concise with use of generic type arguments</span><br><span class="hljs-comment">// - with type only</span><br><span class="hljs-keyword">const</span> increment = createStandardAction(<span class="hljs-string">'INCREMENT'</span>)();<br><span class="hljs-keyword">const</span> increment = createStandardAction(<span class="hljs-string">'INCREMENT'</span>)&lt;<span class="hljs-literal">undefined</span>&gt;();<br>increment(); <span class="hljs-comment">// &#123; type: 'INCREMENT' &#125; (no parameters are required)</span><br><br><br><span class="hljs-comment">// - with type and payload</span><br><span class="hljs-keyword">const</span> add = createStandardAction(<span class="hljs-string">'ADD'</span>)&lt;<span class="hljs-built_in">number</span>&gt;();<br>add(<span class="hljs-number">10</span>); <span class="hljs-comment">// &#123; type: 'ADD', payload: number &#125;</span><br><br><span class="hljs-comment">// - with type and meta</span><br><span class="hljs-keyword">const</span> getData = createStandardAction(<span class="hljs-string">'GET_DATA'</span>)&lt;<span class="hljs-literal">undefined</span>, <span class="hljs-built_in">string</span>&gt;();<br>getData(<span class="hljs-literal">undefined</span>, <span class="hljs-string">'meta'</span>); <span class="hljs-comment">// &#123; type: 'GET_DATA', meta: string &#125;</span><br><br><span class="hljs-comment">// - and finally with type, payload and meta</span><br><span class="hljs-keyword">const</span> getData = createStandardAction(<span class="hljs-string">'GET_DATA'</span>)&lt;<span class="hljs-built_in">number</span>, <span class="hljs-built_in">string</span>&gt;();<br>getData(<span class="hljs-number">1</span>, <span class="hljs-string">'meta'</span>); <span class="hljs-comment">// &#123; type: 'GET_DATA', payload: number, meta: string &#125;</span><br><br><span class="hljs-comment">// Can map payload and meta arguments to a custom action object</span><br><span class="hljs-keyword">const</span> notify = createStandardAction(<span class="hljs-string">'NOTIFY'</span>).map(<br>  <span class="hljs-function">(<span class="hljs-params">payload: <span class="hljs-built_in">string</span>, meta: Meta</span>) =&gt;</span> (&#123;<br>    <span class="hljs-keyword">from</span>: meta.username,<br>    message: <span class="hljs-string">`<span class="hljs-subst">$&#123;username&#125;</span>: <span class="hljs-subst">$&#123;payload&#125;</span>`</span>,<br>    messageType: meta.type,<br>    datetime: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(),<br>  &#125;)<br>);<br><br>dispatch(notify(<span class="hljs-string">'Hello!'</span>, &#123; username: <span class="hljs-string">'Piotr'</span>, <span class="hljs-keyword">type</span>: <span class="hljs-string">'announcement'</span> &#125;));<br><span class="hljs-comment">// &#123; type: 'NOTIFY', from: string, message: string, messageType: MessageType, datetime: Date &#125;</span><br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">â‡§ back to top</a></p><h4 id="createCustomAction"><a href="#createCustomAction" class="headerlink" title="createCustomAction"></a><code>createCustomAction</code></h4><p><em>Create an enhanced action-creator with unlimited number of arguments and custom properties on action object.</em></p><ul><li>Resulting action-creator will preserve semantic names of their arguments  <code>(id, title, amount, etc...)</code>.</li><li>Returned action object have custom properties <code>({ type, customProp1, customProp2, ...customPropN })</code></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ts">createCustomAction(<span class="hljs-keyword">type</span>, <span class="hljs-function"><span class="hljs-params">type</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">namedArg1, namedArg2, ...namedArgN</span>) =&gt;</span> (&#123; <span class="hljs-keyword">type</span>, customProp1, customProp2, ...customPropN &#125;)<br>&#125;)<br></code></pre></td></tr></table></figure><p>Examples:<br><a href="src/create-action-with-type.spec.ts">&gt; Advanced Usage Examples</a></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; createCustomAction &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">const</span> add = createCustomAction(<span class="hljs-string">'CUSTOM'</span>, <span class="hljs-function"><span class="hljs-params">type</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">first: <span class="hljs-built_in">number</span>, second: <span class="hljs-built_in">number</span></span>) =&gt;</span> (&#123; <span class="hljs-keyword">type</span>, customProp1: first, customProp2: second &#125;);<br>&#125;);<br><br>dispatch(add(<span class="hljs-number">1</span>));<br><span class="hljs-comment">// &#123; type: "CUSTOM"; customProp1: number; customProp2: number; &#125;</span><br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">â‡§ back to top</a></p><h4 id="createAsyncAction"><a href="#createAsyncAction" class="headerlink" title="createAsyncAction"></a><code>createAsyncAction</code></h4><p><em>Create an object containing three enhanced action-creators to simplify handling of async flows (e.g. network request - request/success/failure).</em></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ts">createAsyncAction(<br>  requestType, successType, failureType, cancelType?<br>)&lt;TRequestPayload, TSuccessPayload, TFailurePayload, TCancelPayload?&gt;()<br></code></pre></td></tr></table></figure><h5 id="AsyncActionCreator"><a href="#AsyncActionCreator" class="headerlink" title="AsyncActionCreator"></a><code>AsyncActionCreator</code></h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> AsyncActionCreator&lt;<br>  [TRequestType, TRequestPayload],<br>  [TSuccessType, TSuccessPayload],<br>  [TFailureType, TFailurePayload],<br>  [TCancelType, TCancelPayload]?<br>&gt; = &#123;<br>  request: StandardActionCreator&lt;TRequestType, TRequestPayload&gt;,<br>  success: StandardActionCreator&lt;TSuccessType, TSuccessPayload&gt;,<br>  failure: StandardActionCreator&lt;TFailureType, TFailurePayload&gt;,<br>  cancel?: StandardActionCreator&lt;TCancelType, TCancelPayload&gt;,<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p><strong>TIP</strong>: Using <code>undefined</code> as generic type parameter you can make the action-creator function require NO parameters.</p></blockquote><p>Examples:<br><a href="src/create-async-action.spec.ts">&gt; Advanced Usage Examples</a></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; createAsyncAction, AsyncActionCreator &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">const</span> fetchUsersAsync = createAsyncAction(<br>  <span class="hljs-string">'FETCH_USERS_REQUEST'</span>,<br>  <span class="hljs-string">'FETCH_USERS_SUCCESS'</span>,<br>  <span class="hljs-string">'FETCH_USERS_FAILURE'</span><br>)&lt;<span class="hljs-built_in">string</span>, User[], <span class="hljs-built_in">Error</span>&gt;();<br><br>dispatch(fetchUsersAsync.request(params));<br><br>dispatch(fetchUsersAsync.success(response));<br><br>dispatch(fetchUsersAsync.failure(err));<br><br><span class="hljs-keyword">const</span> fn = (<br>  a: AsyncActionCreator&lt;<br>    [<span class="hljs-string">'FETCH_USERS_REQUEST'</span>, <span class="hljs-built_in">string</span>],<br>    [<span class="hljs-string">'FETCH_USERS_SUCCESS'</span>, User[]],<br>    [<span class="hljs-string">'FETCH_USERS_FAILURE'</span>, <span class="hljs-built_in">Error</span>]<br>  &gt;<br>) =&gt; a;<br>fn(fetchUsersAsync);<br><br><span class="hljs-comment">// There is 4th optional argument to declare cancel action</span><br><span class="hljs-keyword">const</span> fetchUsersAsync = createAsyncAction(<br>  <span class="hljs-string">'FETCH_USERS_REQUEST'</span>,<br>  <span class="hljs-string">'FETCH_USERS_SUCCESS'</span>,<br>  <span class="hljs-string">'FETCH_USERS_FAILURE'</span><br>  <span class="hljs-string">'FETCH_USERS_CANCEL'</span><br>)&lt;<span class="hljs-built_in">string</span>, User[], <span class="hljs-built_in">Error</span>, <span class="hljs-built_in">string</span>&gt;();<br><br>dispatch(fetchUsersAsync.cancel(<span class="hljs-string">'reason'</span>));<br><br><span class="hljs-keyword">const</span> fn = (<br>  a: AsyncActionCreator&lt;<br>    [<span class="hljs-string">'FETCH_USERS_REQUEST'</span>, <span class="hljs-built_in">string</span>],<br>    [<span class="hljs-string">'FETCH_USERS_SUCCESS'</span>, User[]],<br>    [<span class="hljs-string">'FETCH_USERS_FAILURE'</span>, <span class="hljs-built_in">Error</span>],<br>    [<span class="hljs-string">'FETCH_USERS_CANCEL'</span>, <span class="hljs-built_in">string</span>]<br>  &gt;<br>) =&gt; a;<br>fn(fetchUsersAsync);<br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">â‡§ back to top</a></p><hr><h3 id="Reducer-Creators-API"><a href="#Reducer-Creators-API" class="headerlink" title="Reducer-Creators API"></a>Reducer-Creators API</h3><h4 id="createReducer"><a href="#createReducer" class="headerlink" title="createReducer"></a><code>createReducer</code></h4><p><em>Create a typesafe reducer</em></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ts">createReducer&lt;TState, TRootAction&gt;(initialState, handlersMap?)<br>  .handleAction(<span class="hljs-keyword">type</span>, reducer)<br>  .handleAction([type1, type2, ...typeN], reducer)<br>  .handleAction(actionCreator, reducer)<br>  .handleAction([actionCreator1, actionCreator2, ...actionCreatorN], reducer)<br></code></pre></td></tr></table></figure><p>Examples:<br><a href="src/create-reducer.spec.ts">&gt; Advanced Usage Examples</a></p><blockquote><p><strong>TIP:</strong> You can use reducer API with a <strong>type-free</strong> syntax by <a href="#extending-internal-types-to-enable-type-free-syntax-with-createreducer">Extending internal types</a>, otherwise youâ€™ll have to pass generic type arguments like in below examples<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// type-free syntax doesn't require generic type arguments</span><br><span class="hljs-keyword">const</span> counterReducer = createReducer(<span class="hljs-number">0</span>, &#123; <br>  ADD: <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> state + action.payload,<br>  [getType(increment)]: <span class="hljs-function">(<span class="hljs-params">state, _</span>) =&gt;</span> state + <span class="hljs-number">1</span>,<br>&#125;)<br></code></pre></td></tr></table></figure></p></blockquote><p>Using type-constants as keys in the object map:<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; createReducer, getType &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span><br><br><span class="hljs-keyword">type</span> State = <span class="hljs-built_in">number</span>;<br><span class="hljs-keyword">type</span> Action = &#123; <span class="hljs-keyword">type</span>: <span class="hljs-string">'ADD'</span>, payload: <span class="hljs-built_in">number</span> &#125; | &#123; <span class="hljs-keyword">type</span>: <span class="hljs-string">'INCREMENT'</span> &#125;;<br><br><span class="hljs-keyword">const</span> counterReducer = createReducer&lt;State, Action&gt;(<span class="hljs-number">0</span>, &#123; <br>  ADD: <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> state + action.payload,<br>  [getType(increment)]: <span class="hljs-function">(<span class="hljs-params">state, _</span>) =&gt;</span> state + <span class="hljs-number">1</span>,<br>&#125;)<br><br>counterReducer(<span class="hljs-number">0</span>, add(<span class="hljs-number">4</span>)); <span class="hljs-comment">// =&gt; 4</span><br>counterReducer(<span class="hljs-number">0</span>, increment()); <span class="hljs-comment">// =&gt; 1</span><br></code></pre></td></tr></table></figure></p><p>Using handleAction chain API:<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// using action-creators</span><br><span class="hljs-keyword">const</span> counterReducer = createReducer&lt;State, Action&gt;(<span class="hljs-number">0</span>)<br>  .handleAction(add, <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> state + action.payload)<br>  .handleAction(increment, <span class="hljs-function">(<span class="hljs-params">state, _</span>) =&gt;</span> state + <span class="hljs-number">1</span>)<br><br>  <span class="hljs-comment">// handle multiple actions by using array</span><br>  .handleAction([add, increment], <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span><br>    state + (action.type === <span class="hljs-string">'ADD'</span> ? action.payload : <span class="hljs-number">1</span>)<br>  );<br><br><span class="hljs-comment">// all the same scenarios are working when using type-constants</span><br><span class="hljs-keyword">const</span> counterReducer = createReducer&lt;State, Action&gt;(<span class="hljs-number">0</span>)<br>  .handleAction(<span class="hljs-string">'ADD'</span>, <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> state + action.payload)<br>  .handleAction(<span class="hljs-string">'INCREMENT'</span>, <span class="hljs-function">(<span class="hljs-params">state, _</span>) =&gt;</span> state + <span class="hljs-number">1</span>);<br>  <br>counterReducer(<span class="hljs-number">0</span>, add(<span class="hljs-number">4</span>)); <span class="hljs-comment">// =&gt; 4</span><br>counterReducer(<span class="hljs-number">0</span>, increment()); <span class="hljs-comment">// =&gt; 1</span><br></code></pre></td></tr></table></figure></p><p>Extend or compose various reducers together - every operation is completely typesafe:<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> newCounterReducer = createReducer&lt;State, Action&gt;(<span class="hljs-number">0</span>)<br>  .handleAction(<span class="hljs-string">'SUBTRACT'</span>, <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> state - action.payload)<br>  .handleAction(<span class="hljs-string">'DECREMENT'</span>, <span class="hljs-function">(<span class="hljs-params">state, _</span>) =&gt;</span> state - <span class="hljs-number">1</span>);<br><br><span class="hljs-keyword">const</span> bigReducer = createReducer&lt;State, Action&gt;(<span class="hljs-number">0</span>, &#123;<br>  ...counterReducer.handlers, <span class="hljs-comment">// typesafe</span><br>  ...newCounterReducer.handlers, <span class="hljs-comment">// typesafe</span><br>  SUBTRACT: decrementReducer.handlers.DECREMENT, <span class="hljs-comment">// &lt;= error, wrong type</span><br>&#125;)<br></code></pre></td></tr></table></figure></p><p><a href="#table-of-contents">â‡§ back to top</a></p><hr><h3 id="Action-Helpers-API"><a href="#Action-Helpers-API" class="headerlink" title="Action-Helpers API"></a>Action-Helpers API</h3><h4 id="getType"><a href="#getType" class="headerlink" title="getType"></a><code>getType</code></h4><p><em>Get the <strong>type</strong> property value (narrowed to literal type) of given enhanced action-creator.</em></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ts">getType(actionCreator)<br></code></pre></td></tr></table></figure><p><a href="src/get-type.spec.ts">&gt; Advanced Usage Examples</a></p><p>Examples:<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; getType, createStandardAction &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">const</span> add = createStandardAction(<span class="hljs-string">'ADD'</span>)&lt;<span class="hljs-built_in">number</span>&gt;();<br><br><span class="hljs-comment">// In switch reducer</span><br><span class="hljs-keyword">switch</span> (action.type) &#123;<br>  <span class="hljs-keyword">case</span> getType(add):<br>    <span class="hljs-comment">// action type is &#123; type: "ADD"; payload: number; &#125;</span><br>    <span class="hljs-keyword">return</span> state + action.payload;<br><br>  <span class="hljs-keyword">default</span>:<br>    <span class="hljs-keyword">return</span> state;<br>&#125;<br><br><span class="hljs-comment">// or with conditional statements</span><br><span class="hljs-keyword">if</span> (action.type === getType(add)) &#123;<br>  <span class="hljs-comment">// action type is &#123; type: "ADD"; payload: number; &#125;</span><br>&#125;<br></code></pre></td></tr></table></figure></p><p><a href="#table-of-contents">â‡§ back to top</a></p><h4 id="isActionOf"><a href="#isActionOf" class="headerlink" title="isActionOf"></a><code>isActionOf</code></h4><p><em>Check if action is an instance of given enhanced action-creator(s)<br>(it will narrow action type to a type of given action-creator(s))</em></p><blockquote><p><strong>WARNING</strong>: Regular action creators and <a href="#action">action</a> will not work with this helper</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// can be used as a binary function</span><br>isActionOf(actionCreator, action)<br><span class="hljs-comment">// or as a curried function</span><br>isActionOf(actionCreator)(action)<br><span class="hljs-comment">// also accepts an array</span><br>isActionOf([actionCreator1, actionCreator2, ...actionCreatorN], action)<br><span class="hljs-comment">// with its curried equivalent</span><br>isActionOf([actionCreator1, actionCreator2, ...actionCreatorN])(action)<br></code></pre></td></tr></table></figure><p>Examples:<br><a href="src/is-action-of.spec.ts">&gt; Advanced Usage Examples</a></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; addTodo, removeTodo &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'./todos-actions'</span>;<br><br><span class="hljs-comment">// Works with any filter type function (`Array.prototype.filter`, lodash, ramda, rxjs, etc.)</span><br><span class="hljs-comment">// - single action</span><br>[action1, action2, ...actionN]<br>  .filter(isActionOf(addTodo)) <span class="hljs-comment">// only actions with type `ADD` will pass</span><br>  .map(<span class="hljs-function">(<span class="hljs-params">action</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// action type is &#123; type: "todos/ADD"; payload: Todo; &#125;</span><br>    ...<br>    <br><span class="hljs-comment">// - multiple actions</span><br>[action1, action2, ...actionN]<br>  .filter(isActionOf([addTodo, removeTodo])) <span class="hljs-comment">// only actions with type `ADD` or 'REMOVE' will pass</span><br>  .do(<span class="hljs-function">(<span class="hljs-params">action</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// action type is &#123; type: "todos/ADD"; payload: Todo; &#125; | &#123; type: "todos/REMOVE"; payload: Todo; &#125;</span><br>    ...<br>      <br><span class="hljs-comment">// With conditional statements</span><br><span class="hljs-comment">// - single action</span><br><span class="hljs-keyword">if</span>(isActionOf(addTodo, action)) &#123;<br>  <span class="hljs-keyword">return</span> iAcceptOnlyTodoType(action.payload);<br>  <span class="hljs-comment">// action type is &#123; type: "todos/ADD"; payload: Todo; &#125;</span><br>&#125;<br><span class="hljs-comment">// - multiple actions</span><br><span class="hljs-keyword">if</span>(isActionOf([addTodo, removeTodo], action)) &#123;<br>  <span class="hljs-keyword">return</span> iAcceptOnlyTodoType(action.payload);<br>  <span class="hljs-comment">// action type is &#123; type: "todos/ADD"; payload: Todo; &#125; | &#123; type: "todos/REMOVE"; payload: Todo; &#125;</span><br>&#125;<br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">â‡§ back to top</a></p><h4 id="isOfType"><a href="#isOfType" class="headerlink" title="isOfType"></a><code>isOfType</code></h4><p><em>Check if action type property is equal given type-constant(s)<br>(it will narrow action type to a type of given action-creator(s))</em></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// can be used as a binary function</span><br>isOfType(<span class="hljs-keyword">type</span>, action)<br><span class="hljs-comment">// or as curried function</span><br>isOfType(<span class="hljs-keyword">type</span>)(action)<br><span class="hljs-comment">// also accepts an array</span><br>isOfType([type1, type2, ...typeN], action)<br><span class="hljs-comment">// with its curried equivalent</span><br>isOfType([type1, type2, ...typeN])(action)<br></code></pre></td></tr></table></figure><p>Examples:<br><a href="src/is-of-type.spec.ts">&gt; Advanced Usage Examples</a></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; ADD, REMOVE &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'./todos-types'</span>;<br><br><span class="hljs-comment">// Works with any filter type function (`Array.prototype.filter`, lodash, ramda, rxjs, etc.)</span><br><span class="hljs-comment">// - single action</span><br>[action1, action2, ...actionN]<br>  .filter(isOfType(ADD)) <span class="hljs-comment">// only actions with type `ADD` will pass</span><br>  .map(<span class="hljs-function">(<span class="hljs-params">action</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// action type is &#123; type: "todos/ADD"; payload: Todo; &#125;</span><br>    ...<br>    <br><span class="hljs-comment">// - multiple actions</span><br>[action1, action2, ...actionN]<br>  .filter(isOfType([ADD, REMOVE])) <span class="hljs-comment">// only actions with type `ADD` or 'REMOVE' will pass</span><br>  .do(<span class="hljs-function">(<span class="hljs-params">action</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// action type is &#123; type: "todos/ADD"; payload: Todo; &#125; | &#123; type: "todos/REMOVE"; payload: Todo; &#125;</span><br>    ...<br>      <br><span class="hljs-comment">// With conditional statements</span><br><span class="hljs-comment">// - single action</span><br><span class="hljs-keyword">if</span>(isOfType(ADD, action)) &#123;<br>  <span class="hljs-keyword">return</span> iAcceptOnlyTodoType(action.payload);<br>  <span class="hljs-comment">// action type is &#123; type: "todos/ADD"; payload: Todo; &#125;</span><br>&#125;<br><span class="hljs-comment">// - multiple actions</span><br><span class="hljs-keyword">if</span>(isOfType([ADD, REMOVE], action)) &#123;<br>  <span class="hljs-keyword">return</span> iAcceptOnlyTodoType(action.payload);<br>  <span class="hljs-comment">// action type is &#123; type: "todos/ADD"; payload: Todo; &#125; | &#123; type: "todos/REMOVE"; payload: Todo; &#125;</span><br>&#125;<br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">â‡§ back to top</a></p><hr><h3 id="Type-Helpers-API"><a href="#Type-Helpers-API" class="headerlink" title="Type-Helpers API"></a>Type-Helpers API</h3><p>Below helper functions are very flexible generalizations, works great with nested structures and will cover numerous different use-cases.</p><h4 id="ActionType"><a href="#ActionType" class="headerlink" title="ActionType"></a><code>ActionType</code></h4><p><em>Powerful type-helper that will infer union type from <strong>import * as â€¦</strong> or <strong>action-creator map</strong> object.</em></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; ActionType &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-comment">// with "import * as ..."</span><br><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> todos <span class="hljs-keyword">from</span> <span class="hljs-string">'./actions'</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> TodosAction = ActionType&lt;<span class="hljs-keyword">typeof</span> todos&gt;;<br><span class="hljs-comment">// TodosAction: &#123; type: 'action1' &#125; | &#123; type: 'action2' &#125; | &#123; type: 'action3' &#125;</span><br><br><span class="hljs-comment">// with nested action-creator map case</span><br><span class="hljs-keyword">const</span> actions = &#123;<br>  action1: createAction(<span class="hljs-string">'action1'</span>),<br>  nested: &#123;<br>    action2: createAction(<span class="hljs-string">'action2'</span>),<br>    moreNested: &#123;<br>      action3: createAction(<span class="hljs-string">'action3'</span>),<br>    &#125;,<br>  &#125;,<br>&#125;;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> RootAction = ActionType&lt;<span class="hljs-keyword">typeof</span> actions&gt;;<br><span class="hljs-comment">// RootAction: &#123; type: 'action1' &#125; | &#123; type: 'action2' &#125; | &#123; type: 'action3' &#125;</span><br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">â‡§ back to top</a></p><h4 id="StateType"><a href="#StateType" class="headerlink" title="StateType"></a><code>StateType</code></h4><p><em>Powerful type helper that will infer state object type from <strong>reducer function</strong> and <strong>nested/combined reducers</strong>.</em></p><blockquote><p><strong>WARNING</strong>: working with redux@4+ types</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; combineReducers &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'redux'</span>;<br><span class="hljs-keyword">import</span> &#123; StateType &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-comment">// with reducer function</span><br><span class="hljs-keyword">const</span> todosReducer = <span class="hljs-function">(<span class="hljs-params">state: Todo[] = [], action: TodosAction</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">switch</span> (action.type) &#123;<br>    <span class="hljs-keyword">case</span> getType(todos.add):<br>      <span class="hljs-keyword">return</span> [...state, action.payload];<br>    ...<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> TodosState = StateType&lt;<span class="hljs-keyword">typeof</span> todosReducer&gt;;<br><br><span class="hljs-comment">// with nested/combined reducers</span><br><span class="hljs-keyword">const</span> rootReducer = combineReducers(&#123;<br>  router: routerReducer,<br>  counters: countersReducer,<br>&#125;);<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> RootState = StateType&lt;<span class="hljs-keyword">typeof</span> rootReducer&gt;;<br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">â‡§ back to top</a></p><hr><h2 id="Migration-Guides"><a href="#Migration-Guides" class="headerlink" title="Migration Guides"></a>Migration Guides</h2><h3 id="v3-x-x-to-v4-x-x"><a href="#v3-x-x-to-v4-x-x" class="headerlink" title="v3.x.x to v4.x.x"></a><code>v3.x.x</code> to <code>v4.x.x</code></h3><p>From <code>v4.x.x</code> all action creators will use <code>undefined</code> instead of <code>void</code> as a generic type parameter to make the action-creator function require NO parameters.<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> increment = createStandardAction(<span class="hljs-string">'INCREMENT'</span>)&lt;<span class="hljs-literal">undefined</span>&gt;();<br>increment(); <span class="hljs-comment">// &lt;= no parameters required</span><br><br><span class="hljs-keyword">const</span> fetchUsersAsync = createAsyncAction(<br>  <span class="hljs-string">'FETCH_USERS_REQUEST'</span>,<br>  <span class="hljs-string">'FETCH_USERS_SUCCESS'</span>,<br>  <span class="hljs-string">'FETCH_USERS_FAILURE'</span><br>)&lt;<span class="hljs-literal">undefined</span>, User[], <span class="hljs-built_in">Error</span>&gt;();<br>fetchUsersAsync.request(); <span class="hljs-comment">// &lt;= no parameters required</span><br></code></pre></td></tr></table></figure></p><h3 id="v2-x-x-to-v3-x-x"><a href="#v2-x-x-to-v3-x-x" class="headerlink" title="v2.x.x to v3.x.x"></a><code>v2.x.x</code> to <code>v3.x.x</code></h3><p><code>v3.x.x</code> API is backward compatible with <code>v2.x.x</code>. Youâ€™ll only need to update typescript dependency to <code>&gt; v3.1</code>.</p><h3 id="v1-x-x-to-v2-x-x"><a href="#v1-x-x-to-v2-x-x" class="headerlink" title="v1.x.x to v2.x.x"></a><code>v1.x.x</code> to <code>v2.x.x</code></h3><p>In v2 we provide a <code>createActionDeprecated</code> function compatible with v1 API to help with incremental migration.</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// in v1 we created action-creator like this:</span><br><span class="hljs-keyword">const</span> getTodo = createAction(<span class="hljs-string">'GET_TODO'</span>,<br>  <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span>, meta: <span class="hljs-built_in">string</span></span>) =&gt;</span> (&#123;<br>    <span class="hljs-keyword">type</span>: <span class="hljs-string">'GET_TODO'</span>,<br>    payload: id,<br>    meta: meta,<br>  &#125;)<br>);<br><br>getTodo(<span class="hljs-string">'some_id'</span>, <span class="hljs-string">'some_meta'</span>); <span class="hljs-comment">// &#123; type: 'GET_TODO', payload: 'some_id', meta: 'some_meta' &#125;</span><br><br><span class="hljs-comment">// in v2 API we offer few different styles - please choose your preference</span><br><span class="hljs-keyword">const</span> getTodoNoHelpers = <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span>, meta: <span class="hljs-built_in">string</span></span>) =&gt;</span> action(<span class="hljs-string">'GET_TODO'</span>, id, meta);<br><br><span class="hljs-keyword">const</span> getTodoWithHelpers = createAction(<span class="hljs-string">'GET_TODO'</span>, <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span>, meta: <span class="hljs-built_in">string</span></span>) =&gt;</span> action(id, meta);<br>&#125;);<br><br><span class="hljs-keyword">const</span> getTodoFSA = createStandardAction(<span class="hljs-string">'GET_TODO'</span>)&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;();<br><br><span class="hljs-keyword">const</span> getTodoCustom = createStandardAction(<span class="hljs-string">'GET_TODO'</span>).map(<br>  <span class="hljs-function">(<span class="hljs-params">&#123; id, meta &#125;: &#123; id: <span class="hljs-built_in">string</span>; meta: <span class="hljs-built_in">string</span>; &#125;</span>) =&gt;</span> (&#123;<br>    payload: id,<br>    meta,<br>  &#125;)<br>);<br></code></pre></td></tr></table></figure><h3 id="Migrating-from-redux-actions-to-typesafe-actions"><a href="#Migrating-from-redux-actions-to-typesafe-actions" class="headerlink" title="Migrating from redux-actions to typesafe-actions"></a>Migrating from <code>redux-actions</code> to <code>typesafe-actions</code></h3><ul><li>createAction(s)</li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ts">createAction(<span class="hljs-keyword">type</span>, payloadCreator, metaCreator) =&gt; createStandardAction(<span class="hljs-keyword">type</span>)() || createStandardAction(<span class="hljs-keyword">type</span>).map(payloadMetaCreator)<br><br>createActions() =&gt; <span class="hljs-comment">// COMING SOON!</span><br></code></pre></td></tr></table></figure><ul><li>handleAction(s)</li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ts">handleAction(<span class="hljs-keyword">type</span>, reducer, initialState) =&gt; createReducer(initialState).handleAction(<span class="hljs-keyword">type</span>, reducer)<br><br>handleActions(reducerMap, initialState) =&gt; createReducer(initialState, reducerMap)<br></code></pre></td></tr></table></figure><blockquote><p>TIP: If migrating from JS -&gt; TS, you can swap out action-creators from <code>redux-actions</code> with action-creators from <code>typesafe-actions</code> in your <code>handleActions</code> handlers. This works because the action-creators from <code>typesafe-actions</code> provide the same <code>toString</code> method implementation used by <code>redux-actions</code> to match actions to the correct reducer.</p></blockquote><ul><li>combineActions</li></ul><p>Not needed because each function in the API accept single value or array of values for action types or action creators.</p><p><a href="#table-of-contents">â‡§ back to top</a></p><hr><h2 id="Recipes"><a href="#Recipes" class="headerlink" title="Recipes"></a>Recipes</h2><h3 id="Restrict-Meta-type-in-action-creator"><a href="#Restrict-Meta-type-in-action-creator" class="headerlink" title="Restrict Meta type in action creator"></a>Restrict Meta type in <code>action</code> creator</h3><p>Using this recipe you can create an action creator with restricted Meta type with exact object shape.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs tsx">export type MetaType = &#123;<br>  analytics?: &#123;<br>    eventName: string;<br>  &#125;;<br>&#125;;<br><br>export const actionWithRestrictedMeta = &lt;T extends string, P&gt;(<br>  type: T,<br>  payload: P,<br>  meta: MetaType<br>) =&gt; action(type, payload, meta);<br><br>export const validAction = (payload: string) =&gt;<br>  actionWithRestrictedMeta(&apos;type&apos;, payload, &#123; analytics: &#123; eventName: &apos;success&apos; &#125; &#125;); // OK!<br><br>export const invalidAction = (payload: string) =&gt;<br>  actionWithRestrictedMeta(&apos;type&apos;, payload, &#123; analytics: &#123; excessProp: &apos;no way!&apos; &#125; &#125;); // Error<br>// Object literal may only specify known properties, and &apos;excessProp&apos; does not exist in type &apos;&#123; eventName: string; &#125;<br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">â‡§ back to top</a></p><hr><h2 id="Compare-to-others"><a href="#Compare-to-others" class="headerlink" title="Compare to others"></a>Compare to others</h2><p>Here you can find out a detailed comparison of <code>typesafe-actions</code> to other solutions.</p><h3 id="redux-actions"><a href="#redux-actions" class="headerlink" title="redux-actions"></a><code>redux-actions</code></h3><p>Lets compare the 3 most common variants of action-creators (with type only, with payload and with payload + meta)</p><p>Note: tested with â€œ@types/redux-actionsâ€: â€œ2.2.3â€</p><p><strong>- with type only (no payload)</strong></p><h5 id="redux-actions-1"><a href="#redux-actions-1" class="headerlink" title="redux-actions"></a>redux-actions</h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> notify1 = createAction(<span class="hljs-string">'NOTIFY'</span>);<br><span class="hljs-comment">// resulting type:</span><br><span class="hljs-comment">// () =&gt; &#123;</span><br><span class="hljs-comment">//   type: string;</span><br><span class="hljs-comment">//   payload: void | undefined;</span><br><span class="hljs-comment">//   error: boolean | undefined;</span><br><span class="hljs-comment">// &#125;</span><br></code></pre></td></tr></table></figure><blockquote><p>with <code>redux-actions</code> you can notice the redundant nullable <code>payload</code> property and literal type of <code>type</code> property is lost (discrimination of union type would not be possible)</p></blockquote><h5 id="typesafe-actions"><a href="#typesafe-actions" class="headerlink" title="typesafe-actions"></a>typesafe-actions</h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> notify1 = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> action(<span class="hljs-string">'NOTIFY'</span>);<br><span class="hljs-comment">// resulting type:</span><br><span class="hljs-comment">// () =&gt; &#123;</span><br><span class="hljs-comment">//   type: "NOTIFY";</span><br><span class="hljs-comment">// &#125;</span><br></code></pre></td></tr></table></figure><blockquote><p>with <code>typesafe-actions</code> there is no excess nullable types and no excess properties and the action â€œtypeâ€ property is containing a literal type</p></blockquote><p><strong>- with payload</strong></p><h5 id="redux-actions-2"><a href="#redux-actions-2" class="headerlink" title="redux-actions"></a>redux-actions</h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> notify2 = createAction(<span class="hljs-string">'NOTIFY'</span>,<br>  <span class="hljs-function">(<span class="hljs-params">username: <span class="hljs-built_in">string</span>, message?: <span class="hljs-built_in">string</span></span>) =&gt;</span> (&#123;<br>    message: <span class="hljs-string">`<span class="hljs-subst">$&#123;username&#125;</span>: <span class="hljs-subst">$&#123;message || 'Empty!'&#125;</span>`</span>,<br>  &#125;)<br>);<br><span class="hljs-comment">// resulting type:</span><br><span class="hljs-comment">// (t1: string) =&gt; &#123;</span><br><span class="hljs-comment">//   type: string;</span><br><span class="hljs-comment">//   payload: &#123; message: string; &#125; | undefined;</span><br><span class="hljs-comment">//   error: boolean | undefined;</span><br><span class="hljs-comment">// &#125;</span><br></code></pre></td></tr></table></figure><blockquote><p>first the optional <code>message</code> parameter is lost, <code>username</code> semantic argument name is changed to some generic <code>t1</code>, <code>type</code> property is widened once again and <code>payload</code> is nullable because of broken inference</p></blockquote><h5 id="typesafe-actions-1"><a href="#typesafe-actions-1" class="headerlink" title="typesafe-actions"></a>typesafe-actions</h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> notify2 = <span class="hljs-function">(<span class="hljs-params">username: <span class="hljs-built_in">string</span>, message?: <span class="hljs-built_in">string</span></span>) =&gt;</span> action(<br>  <span class="hljs-string">'NOTIFY'</span>,<br>  &#123; message: <span class="hljs-string">`<span class="hljs-subst">$&#123;username&#125;</span>: <span class="hljs-subst">$&#123;message || 'Empty!'&#125;</span>`</span> &#125;,<br>);<br><span class="hljs-comment">// resulting type:</span><br><span class="hljs-comment">// (username: string, message?: string | undefined) =&gt; &#123;</span><br><span class="hljs-comment">//   type: "NOTIFY";</span><br><span class="hljs-comment">//   payload: &#123; message: string; &#125;;</span><br><span class="hljs-comment">// &#125;</span><br></code></pre></td></tr></table></figure><blockquote><p><code>typesafe-actions</code> infer very precise resulting type, notice working optional parameters and semantic argument names are preserved which is really important for great intellisense experience</p></blockquote><p><strong>- with payload and meta</strong></p><h5 id="redux-actions-3"><a href="#redux-actions-3" class="headerlink" title="redux-actions"></a>redux-actions</h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> notify3 = createAction(<span class="hljs-string">'NOTIFY'</span>,<br>  <span class="hljs-function">(<span class="hljs-params">username: <span class="hljs-built_in">string</span>, message?: <span class="hljs-built_in">string</span></span>) =&gt;</span> (<br>    &#123; message: <span class="hljs-string">`<span class="hljs-subst">$&#123;username&#125;</span>: <span class="hljs-subst">$&#123;message || 'Empty!'&#125;</span>`</span> &#125;<br>  ),<br>  <span class="hljs-function">(<span class="hljs-params">username: <span class="hljs-built_in">string</span>, message?: <span class="hljs-built_in">string</span></span>) =&gt;</span> (<br>    &#123; username, message &#125;<br>  )<br>);<br><span class="hljs-comment">// resulting type:</span><br><span class="hljs-comment">// (...args: any[]) =&gt; &#123;</span><br><span class="hljs-comment">//   type: string;</span><br><span class="hljs-comment">//   payload: &#123; message: string; &#125; | undefined;</span><br><span class="hljs-comment">//   meta: &#123; username: string; message: string | undefined; &#125;;</span><br><span class="hljs-comment">//   error: boolean | undefined;</span><br><span class="hljs-comment">// &#125;</span><br></code></pre></td></tr></table></figure><blockquote><p>this time we got a completely broken arguments arity with no type-safety because of <code>any</code> type with all the earlier issues</p></blockquote><h5 id="typesafe-actions-2"><a href="#typesafe-actions-2" class="headerlink" title="typesafe-actions"></a>typesafe-actions</h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">/**<br> * typesafe-actions<br> */</span><br><span class="hljs-keyword">const</span> notify3 = <span class="hljs-function">(<span class="hljs-params">username: <span class="hljs-built_in">string</span>, message?: <span class="hljs-built_in">string</span></span>) =&gt;</span> action(<br>  <span class="hljs-string">'NOTIFY'</span>,<br>  &#123; message: <span class="hljs-string">`<span class="hljs-subst">$&#123;username&#125;</span>: <span class="hljs-subst">$&#123;message || 'Empty!'&#125;</span>`</span> &#125;,<br>  &#123; username, message &#125;,<br>);<br><span class="hljs-comment">// resulting type:</span><br><span class="hljs-comment">// (username: string, message?: string | undefined) =&gt; &#123;</span><br><span class="hljs-comment">//   type: "NOTIFY";</span><br><span class="hljs-comment">//   payload: &#123; message: string; &#125;;</span><br><span class="hljs-comment">//   meta: &#123; username: string; message: string | undefined; &#125;;</span><br><span class="hljs-comment">// &#125;</span><br></code></pre></td></tr></table></figure><blockquote><p><code>typesafe-actions</code> never fail to <code>any</code> type, even with this advanced scenario all types are correct and provide complete type-safety and excellent developer experience </p></blockquote><p><a href="#table-of-contents">â‡§ back to top</a></p><hr><h2 id="MIT-License"><a href="#MIT-License" class="headerlink" title="MIT License"></a>MIT License</h2><p>Copyright (c) 2017 Piotr Witek <a href="mailto:&#x70;&#105;&#x6f;&#116;&#114;&#x65;&#107;&#x2e;&#119;&#105;&#116;&#101;&#x6b;&#x40;&#103;&#x6d;&#97;&#105;&#108;&#x2e;&#x63;&#x6f;&#x6d;" target="_blank" rel="noopener">&#x70;&#105;&#x6f;&#116;&#114;&#x65;&#107;&#x2e;&#119;&#105;&#116;&#101;&#x6b;&#x40;&#103;&#x6d;&#97;&#105;&#108;&#x2e;&#x63;&#x6f;&#x6d;</a> (<a href="http://piotrwitek.github.io" target="_blank" rel="noopener">http://piotrwitek.github.io</a>)</p>]]></content>
      
      
      
        <tags>
            
            <tag> redux,react,javascript,typescript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ„å»ºelectronã€typescriptã€reactã€antdåº”ç”¨</title>
      <link href="/2019/06/14/cjxzoi3nb001kjcu9gjwn2gld/"/>
      <url>/2019/06/14/cjxzoi3nb001kjcu9gjwn2gld/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è¿™ä¸ªç ”ç©¶äº†å¾ˆæ—§ï¼Œè¿˜æ²¡ç ”ç©¶é€ï¼Œå…ˆè®°å½•ï¼Œä»¥å…å¿˜è®°</p></blockquote><a id="more"></a><h2 id="1-åˆå§‹åŒ–reacté¡¹ç›®"><a href="#1-åˆå§‹åŒ–reacté¡¹ç›®" class="headerlink" title="1. åˆå§‹åŒ–reacté¡¹ç›®"></a>1. åˆå§‹åŒ–reacté¡¹ç›®</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">create-react-app demo --typescript<br></code></pre></td></tr></table></figure><h2 id="2-æ·»åŠ ç›¸å…³ä¾èµ–-è¡¨å¦‚ä¸‹"><a href="#2-æ·»åŠ ç›¸å…³ä¾èµ–-è¡¨å¦‚ä¸‹" class="headerlink" title="2. æ·»åŠ ç›¸å…³ä¾èµ–, è¡¨å¦‚ä¸‹"></a>2. æ·»åŠ ç›¸å…³ä¾èµ–, è¡¨å¦‚ä¸‹</h2><table><thead><tr><th>åŒ…å</th><th>ä»‹ç»</th><th>å®‰è£…æ–¹å¼</th></tr></thead><tbody><tr><td><a href="https://electronjs.org/" target="_blank" rel="noopener">electron</a></td><td>å…³é”®åŒ…ï¼Œæ„å»ºelectronåº”ç”¨å¿…é¡»</td><td>-D</td></tr><tr><td><a href="https://github.com/mackyle/sqlite" target="_blank" rel="noopener">sqlite3</a></td><td>æ•°æ®åº“æ”¯æŒï¼Œéœ€è¦å­˜å‚¨æ•°æ®çš„è¯ï¼Œæ¨èè¿™ä¸ª</td><td>-P</td></tr><tr><td><a href="https://ant.design/docs/react/introduce-cn" target="_blank" rel="noopener">antd</a></td><td>èš‚èšé‡‘æœæä¾›çš„Reactæ¡†æ¶</td><td>-P</td></tr><tr><td><a href="https://github.com/ReactTraining/react-router" target="_blank" rel="noopener">react-router-dom</a></td><td>æä¾›è·¯ç”±æ”¯æŒ</td><td>-P</td></tr><tr><td><a href="https://github.com/typeorm/typeorm" target="_blank" rel="noopener">typeorm</a></td><td>é€‚ç”¨äºTypescriptçš„ORMæ”¯æŒ</td><td>-P</td></tr><tr><td><a href="https://github.com/tealeg/xlsx" target="_blank" rel="noopener">xlsx</a></td><td>è¯»å–excelæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºexcelæ–‡ä»¶</td><td>-P</td></tr><tr><td><a href="https://github.com/sail-sail/ejsExcel" target="_blank" rel="noopener">ejsexcel</a></td><td>é€šè¿‡æ¨¡æ¿çš„æ–¹å¼ç”Ÿæˆexcelæ–‡ä»¶</td><td>-P</td></tr><tr><td><a href="https://github.com/sindresorhus/electron-is-dev" target="_blank" rel="noopener">electron-is-dev</a></td><td>ç”¨äºåœ¨é€»è¾‘ä¸­åˆ¤æ–­å½“å‰æ˜¯å¦å¼€å‘æ¨¡å¼ï¼Œå› ä¸ºæ‰“åŒ…åä¸€äº›è·¯å¾„ä¼šå˜ï¼Œ<br>è¿™ä¸ªå¯ä»¥åˆ¤æ–­å½“å‰æ˜¯å¦æ‰“åŒ…ä»¥ä¾¿é€‰æ‹©è·¯å¾„</td><td>-P</td></tr><tr><td><a href="https://github.com/megahertz/electron-log" target="_blank" rel="noopener">electron-log</a></td><td>æ—¥å¿—æ”¯æŒ</td><td>-P</td></tr><tr><td><a href="https://github.com/ashtuchkin/iconv-lite" target="_blank" rel="noopener">iconv-lite</a></td><td>æ·»åŠ æ›´å¤šç¼–ç æ”¯æŒï¼Œwindowè›‹ç–¼çš„ä¸ä½¿ç”¨utf-8ï¼Œ<br>nodeåˆä¸æ”¯æŒGBKï¼Œæ‰€ä»¥éœ€è¦è¿™ä¸ª</td><td>-P</td></tr><tr><td><a href="https://github.com/lodash/lodash" target="_blank" rel="noopener">lodash</a></td><td>è‘—åçš„javascriptå·¥å…·åº“</td><td>-P</td></tr><tr><td><a href="https://github.com/moment/moment" target="_blank" rel="noopener">moment</a></td><td>æ—¶é—´å¤„ç†åº“</td><td>-P</td></tr><tr><td><a href="https://github.com/timarney/react-app-rewired" target="_blank" rel="noopener">react-app-rewired</a></td><td>å› ä¸º<code>create-react-app</code>çš„é…ç½®æ–‡ä»¶éƒ½æ˜¯ä¸å¯¹å¤–é€æ˜çš„ï¼Œ<br>è¿™ä¸ªå¯ä»¥è®©<code>create-react-app</code> åŠ è½½çš„æ—¶å€™ï¼Œé¢å¤–å¯¹ç°æœ‰é…ç½®è¿›è¡Œä¿®æ”¹</td><td>-D</td></tr><tr><td><a href="https://github.com/arackaf/customize-cra" target="_blank" rel="noopener">customize-cra</a></td><td>é…åˆ<code>react-app-rewired</code> æ¥ä½¿ç”¨ï¼Œå¿«é€Ÿå†™ä¸€ä¸‹é…ç½®</td><td>-D</td></tr><tr><td><a href="https://github.com/electron/electron-rebuild" target="_blank" rel="noopener">electron-rebuild</a></td><td>ä¸€äº›éœ€è¦éœ€è¦æ ¹æ®ç³»ç»Ÿç¼–è¯‘çš„åº“ï¼Œæ¯”å¦‚ <code>sqlite3</code> å¦‚æœç›´æ¥å®‰è£…ä¼šå‡ºç°ä¸å…¼å®¹é—®é¢˜ï¼Œ<br>ç„¶åå°±ä¼šæ­»æ´»æ‰¾ä¸åˆ°è¿™ä¸ªåº“ï¼Œé€šè¿‡è¿™ä¸ªå¯ä»¥æ ¹æ®ç°æœ‰çš„ç‰ˆæœ¬è¿›è¡Œé‡æ–°ç¼–è¯‘</td><td>-D</td></tr><tr><td><a href="https://github.com/electron-userland/electron-builder" target="_blank" rel="noopener">electron-builder</a></td><td>ç”¨äºæ‰“åŒ…é¡¹ç›®ï¼Œç”Ÿæˆå®‰è£…åŒ…</td></tr></tbody></table><p>ä»¥ä¸Šå°±æ˜¯æˆ‘è¿™ä¸ªé¡¹ç›®ç”¨åˆ°çš„åŒ…ï¼Œæ„Ÿè°¢ GitHub è¿™ä¸ªå¼€æºå¹³å°ï¼Œæ„Ÿè§‰åŒ…ä½œè€…çš„å¤§å¤§ä»¬ï¼Œè°¢è°¢ï¼ï¼ï¼ :smile: </p><h2 id="3-é…ç½®é¡¹ç›®éœ€è¦çš„åŸºç¡€ä»£ç "><a href="#3-é…ç½®é¡¹ç›®éœ€è¦çš„åŸºç¡€ä»£ç " class="headerlink" title="3. é…ç½®é¡¹ç›®éœ€è¦çš„åŸºç¡€ä»£ç "></a>3. é…ç½®é¡¹ç›®éœ€è¦çš„åŸºç¡€ä»£ç </h2><ol><li>æ·»åŠ  <code>electron</code> çš„å…¥å£æ–‡ä»¶ <code>/public/main.js</code> </li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// Modules to control application life and create native browser window</span><br><span class="hljs-keyword">const</span> &#123; app, BrowserWindow, ipcMain &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">'electron'</span>);<br><span class="hljs-keyword">const</span> isDev = <span class="hljs-built_in">require</span>(<span class="hljs-string">'electron-is-dev'</span>)<br><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>)<br><span class="hljs-keyword">const</span> log = <span class="hljs-built_in">require</span>(<span class="hljs-string">'electron-log'</span>);<br><span class="hljs-comment">// Keep a global reference of the window object, if you don't, the window will</span><br><span class="hljs-comment">// be closed automatically when the JavaScript object is garbage collected.</span><br><span class="hljs-keyword">let</span> mainWindow;<br><br><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createWindow</span>(<span class="hljs-params"></span>) </span>&#123;<br><br>    <span class="hljs-comment">// Create the browser window.</span><br>    mainWindow = <span class="hljs-keyword">new</span> BrowserWindow(&#123;<br>        <span class="hljs-attr">width</span>: <span class="hljs-number">1700</span>,<br>        <span class="hljs-attr">height</span>: <span class="hljs-number">1000</span>,<br>        <span class="hljs-attr">minHeight</span>: <span class="hljs-number">1000</span>,<br>        <span class="hljs-attr">minWidth</span>: <span class="hljs-number">1700</span>,<br>        <span class="hljs-attr">webPreferences</span>: &#123;<br>            <span class="hljs-attr">nodeIntegration</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-attr">webSecurity</span>: <span class="hljs-literal">false</span>,<br>        &#125;,<br>        <span class="hljs-attr">autoHideMenuBar</span>: <span class="hljs-literal">true</span>,<br>    &#125;)<br><br>    <span class="hljs-comment">// è¿™é‡Œå°±æ˜¯åˆå§‹åŒ–çš„æ—¶å€™åŠ è½½çš„é¡µé¢ï¼Œç”±äºæ‰“åŒ…ä¹‹åä½¿ç”¨çš„æ˜¯é™æ€æ–‡ä»¶ï¼Œå¼€å‘æ—¶å€™ä½¿ç”¨çš„æ˜¯æœåŠ¡å™¨ï¼Œæ‰€æœ‰è¿™é‡Œè¦åˆ†å¼€å¤„ç†ï¼Œelectron-is-dev åº“çš„é‡è¦æ€§</span><br>    <span class="hljs-keyword">const</span> htmlUrl = <span class="hljs-string">`file://<span class="hljs-subst">$&#123;path.join(__dirname, <span class="hljs-string">'../build/index.html#login'</span>)&#125;</span>`</span>;<br>    <span class="hljs-keyword">const</span> url = isDev ? <span class="hljs-string">"http://127.0.0.1:3000#/login"</span> : htmlUrl;<br>    log.info(url);<br>    mainWindow.loadURL(url);<br>    <span class="hljs-comment">// å› ä¸ºå¼€å‘çš„æ—¶å€™ electron è™½ç„¶ä½¿ç”¨chromeå†…æ ¸ï¼Œä½†æ˜¯ä¸æ²¡æœ‰ä»»ä½•chrmoeæ’ä»¶ã€‚å¼€å‘Reactçš„æ—¶å€™æœ€å¥½æœ‰ React dev tools æ’ä»¶ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼æ¥åŠ è½½é¢å¤–çš„æ’ä»¶ï¼Œè·¯å¾„æ˜¯æ’ä»¶å®‰è£…åœ¨chrmoeçš„è·¯å¾„ï¼Œæœ‰ç‚¹éš¾æ‰¾ï¼Œå¯ä»¥é…åˆ Everything æ¥æŸ¥æ‰¾</span><br>    <span class="hljs-keyword">if</span> (isDev) &#123;<br>        BrowserWindow.addDevToolsExtension(<span class="hljs-string">'C:\\Users\\kirno\\AppData\\Local\\Google\\Chrome\\User Data\\Default\\Extensions\\fmkadmapgofadopljbjfkapdkoienihi\\3.6.0_0'</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// Open the DevTools.</span><br>    <span class="hljs-comment">// mainWindow.webContents.openDevTools()</span><br><br>    <span class="hljs-comment">// Emitted when the window is closed.</span><br>    mainWindow.on(<span class="hljs-string">'closed'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-comment">// Dereference the window object, usually you would store windows</span><br>        <span class="hljs-comment">// in an array if your app supports multi windows, this is the time</span><br>        <span class="hljs-comment">// when you should delete the corresponding element.</span><br>        mainWindow = <span class="hljs-literal">null</span><br>    &#125;)<br><span class="hljs-comment">// è¿™é‡Œçº¿ç¨‹é—´é€šä¿¡ç”¨çš„ï¼Œelectron ä¸»è¦åˆ†ä¸º ä¸»çº¿ç¨‹ï¼ˆæµè§ˆå™¨ï¼‰å’Œæ¸²æŸ“çº¿ç¨‹ (ç½‘é¡µ) çš„å½¢å¼è¿è¡Œï¼Œæœ‰äº›äº‹æƒ…åœ¨ç½‘é¡µé‡Œæ˜¯æ¯”è¾ƒéš¾å®ç°ï¼Œå°±å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼è®©æµè§ˆå™¨å¸®ä½ åšã€‚ä¸‹é¢æ˜¯å®ç°è·å–ç³»ç»Ÿæ‰“å°æœºåˆ—è¡¨çš„åŠŸèƒ½</span><br>    ipcMain.on(<span class="hljs-string">'obtainPrinterList'</span>, (event) =&gt; &#123;<br>        <span class="hljs-keyword">const</span> printers = mainWindow.webContents.getPrinters();<br>        mainWindow.webContents.send(<span class="hljs-string">'getPrinterList'</span>, printers);<br>    &#125;);<br>&#125;<br><br><span class="hljs-comment">// This method will be called when Electron has finished</span><br><span class="hljs-comment">// initialization and is ready to create browser windows.</span><br><span class="hljs-comment">// Some APIs can only be used after this event occurs.</span><br>app.on(<span class="hljs-string">'ready'</span>, createWindow)<br><br><span class="hljs-comment">// Quit when all windows are closed.</span><br>app.on(<span class="hljs-string">'window-all-closed'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-comment">// On macOS it is common for applications and their menu bar</span><br>    <span class="hljs-comment">// to stay active until the user quits explicitly with Cmd + Q</span><br>    <span class="hljs-keyword">if</span> (process.platform !== <span class="hljs-string">'darwin'</span>) app.quit()<br>&#125;)<br><br>app.on(<span class="hljs-string">'activate'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-comment">// On macOS it's common to re-create a window in the app when the</span><br>    <span class="hljs-comment">// dock icon is clicked and there are no other windows open.</span><br>    <span class="hljs-keyword">if</span> (mainWindow === <span class="hljs-literal">null</span>) createWindow()<br>&#125;)<br><br><span class="hljs-comment">// In this file you can include the rest of your app's specific main process</span><br><span class="hljs-comment">// code. You can also put them in separate files and require them here.</span><br></code></pre></td></tr></table></figure><ol start="2"><li>åœ¨<code>package.json</code>æ–‡ä»¶ä¸­æ·»åŠ è„šæœ¬ï¼Œè¾…åŠ©å¼€å‘ï¼Œä»¥ä¸‹æ˜¯èŠ‚é€‰å†…å®¹</li></ol><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>"scripts": &#123;<br>        "ele": "electron .",<br>        "pub": "build --publish always",<br>        /* é‡æ–°ç¼–è¯‘ */<br>        "rebuild": "electron-rebuild",<br>        /* å¼€å‘è¿è¡Œ */<br>        "start": "react-app-rewired start",<br>        "build": "react-app-rewired build",<br>        "test": "react-app-rewired test",<br>        "eject": "react-scripts eject",<br>        "postinstall": "electron-builder install-app-deps",        <br>        "buil": "electron-builder install-app-deps",<br>        "preelectron-pack": "yarn build",<br>        /* æ‰“åŒ… */<br>        "electron-dist": "build -w",<br>        /* æ‰“åŒ…ï¼Œä½†ä¸ç”Ÿæˆå®‰è£…åŒ…æ–‡ä»¶ */<br>        "electron-pack": "electron-builder --dir",<br>        "release": "build"<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å°±å¯ä»¥è¿›è¡Œå¼€å‘äº†ã€‚ä»¥ä¸‹è®°å½•å‡ ä¸ªé—®é¢˜</p><h2 id="typeorm-çš„é—®é¢˜"><a href="#typeorm-çš„é—®é¢˜" class="headerlink" title="typeorm çš„é—®é¢˜"></a><code>typeorm</code> çš„é—®é¢˜</h2><ol><li><p>æ— æ³•æ‰¾åˆ° sqlite3 çš„åŒ…ï¼ŒåŸå› å¯èƒ½æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯sqlite3ç›´æ¥å®‰è£…åï¼Œå’Œelectronçš„ç‰ˆæœ¬ä¸ç¬¦åˆã€‚å¯ä»¥é€šè¿‡ <code>electron-build</code> åº“è§£å†³ï¼Œé‡æ–°ç¼–è¯‘å³å¯ï¼›äºŒæ˜¯å› ä¸ºå¯¼å…¥çš„æ–¹å¼ä¸å¯¹ï¼Œå¦‚æœä½¿ç”¨ </p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123;xxxx&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typeorm'</span><br></code></pre></td></tr></table></figure><p>çš„è¯ï¼Œç”±äºè®¾è®¡åˆ°cè¿™ç§ç¬¬ä¸‰æ–¹åº•å±‚åº“ï¼Œç„¶è€Œ <code>electron</code> çš„æ¸²æŸ“çº¿ç¨‹æ˜¯æ²¡æœ‰åŠæ³•è®¿é—®è¿™ç§åº•å±‚ä»£ç çš„ï¼Œæ‰€ä»¥å¯¼è‡´æ— æ³•<code>typrorm</code> åº•å±‚æ— æ³•è°ƒç”¨æˆåŠŸï¼Œæ‰€ä»¥è¿™é‡Œè¦å€ŸåŠ© <code>electron</code> çš„å‡½æ•° <code>require</code> æ–¹æ³•æ¥å¼•å…¥ï¼Œå®é™…ä¸Šå°±æ˜¯è®© electron æ¥å¸®æˆ‘ä»¬å¯¼åŒ…ã€‚ä½†æ˜¯å¦‚æœä½¿ç”¨ <code>require</code> çš„æ–¹æ³•æ¥å¯¼åŒ…ï¼Œå°±ä¼šå¤±å» <code>typescript</code> çš„ç±»å‹ä¼˜åŠ¿ï¼Œä»¥ä¸‹æ˜¯è§£å†³æ–¹æ³•ï¼š</p><ol><li><p>æ–°å»ºä¸€ä¸ª <code>libary.js</code> æ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> &#123; getConnection, getRepository &#125; = <span class="hljs-built_in">window</span>.require(<span class="hljs-string">'typeorm'</span>);<br><span class="hljs-built_in">module</span>.exports = &#123; getConnection, getRepository &#125;<br></code></pre></td></tr></table></figure></li><li><p>æ–°å»º <code>libary.d.ts</code> æ–‡ä»¶</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">declare</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRepository</span>&lt;<span class="hljs-title">Entity</span>&gt;(<span class="hljs-params">entityClass: ObjectType&lt;Entity&gt; | EntitySchema&lt;Entity&gt; | <span class="hljs-built_in">string</span>, connectionName?: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Repository</span>&lt;<span class="hljs-title">Entity</span>&gt;</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">declare</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getConnection</span>(<span class="hljs-params">connectionName?: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Connection</span></span>;<br></code></pre></td></tr></table></figure></li><li><p>å†è¦ä½¿ç”¨çš„åœ°æ–¹å¼•å…¥</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; getRepository, getConnection &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'../libary'</span>;<br></code></pre></td></tr></table></figure></li></ol><p>å³å¯ï¼Œè¿™é‡Œåˆ¶ä½œäº†ä¸¤ä¸ªå¸¸ç”¨æ–¹æ³•çš„å®ä¾‹ï¼Œå…¶ä»–æ–¹æ³•ä¹Ÿæ˜¯è¿™æ ·å¼•å¦‚ã€‚è¿™æ ·å°±ä¸ä¼šä¸¢å¤± ç±»å‹ã€‚è¿™ä¸ªæ–¹æ³•åŒæ ·é€‚ç”¨äºå¼•å…¥ electron å¯¹è±¡ã€‚</p></li><li><p>æ‰“åŒ…é—®é¢˜ï¼Œç”±äº<code>webpack</code>ä¼šæŠŠæ‰€æœ‰å¼•å…¥çš„æ–‡ä»¶éƒ½è¿›è¡Œæ‰“åŒ…ï¼Œç„¶è€Œ<code>typeorm</code>å› ä¸º è¦å…¼å®¹å¤šç§æ•°æ®åº“ï¼Œæ‰€ä»¥åº•å±‚ä¼šå¼•å…¥å¤šä¸­æ•°æ®åº“çš„åŒ…ï¼Œä½†æ˜¯å› ä¸ºæˆ‘ä»¬åªç”¨ä¸€ç§æ•°æ®ï¼Œå…¶ä»–çš„æ²¡æœ‰ï¼Œæ‰€ä»¥æ‰“åŒ…çš„æ—¶å€™ä¼šæŠ¥é”™ã€‚è§£å†³åŠæ³•å°±æ˜¯è®© <code>webpack</code>ä¸è¦æ‰“åŒ…é‚£äº›å¤šä½™æ²¡ç”¨åˆ°çš„åº“ï¼Œåœ¨å®é™…è¦ç”¨çš„æ—¶å€™å†å¼•å…¥ã€‚</p><ol><li><p>ç”±äº <code>create-react-app</code>çš„é…ç½®æ–‡ä»¶æ˜¯èµ¢è—çš„ï¼Œæ‰€ä»¥é€šè¿‡ <a href="https://github.com/timarney/react-app-rewired" target="_blank" rel="noopener">react-app-rewired</a> å’Œ <a href="https://github.com/arackaf/customize-cra" target="_blank" rel="noopener">customize-cra</a> é…åˆä¿®æ”¹ï¼Œæ–°å»º <code>/config-overrides.js</code> æ–‡ä»¶ï¼Œä»¥ä¸‹è¿˜æåˆ°äº†ä¸¤ç§æ‰“åŒ…ç›®æ ‡æ¨¡å¼ï¼Œå…·ä½“å¯ä»¥å»<code>webpack</code>å®˜ç½‘æŸ¥çœ‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> &#123; addLessLoader, override, addWebpackExternals, fixBabelImports &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">'customize-cra'</span>);<br><span class="hljs-built_in">module</span>.exports = &#123;<br>    <span class="hljs-attr">webpack</span>: override(<br>        <span class="hljs-comment">// æ·»åŠ lessæ”¯æŒ</span><br>        addLessLoader(&#123;<br>            <span class="hljs-attr">javascriptEnabled</span>: <span class="hljs-literal">true</span>,<br>        &#125;),<br>        <span class="hljs-comment">// é‡ç‚¹ï¼š å–æ¶ˆä¸å¿…è¦çš„åº“çš„æ‰“åŒ…</span><br>        addWebpackExternals(&#123;<br>            <span class="hljs-string">'pg'</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">'pg-hstore'</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">'mysql2'</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">'react-native-sqlite-storage'</span>: <span class="hljs-literal">true</span>,<br>        &#125;),<br>        <span class="hljs-comment">// å®¢æˆ·ç«¯ä½¿ç”¨ electron-rendereræ–¹å¼æ¸²æŸ“</span><br>        (config) =&gt; &#123;<br>            config.target = <span class="hljs-string">"electron-renderer"</span>;<br>            <span class="hljs-keyword">return</span> config;<br>        &#125;,<br>        (config) =&gt; &#123;<br>            config.optimization.minimize = <span class="hljs-literal">false</span>;<br>            <span class="hljs-keyword">return</span> config;<br>        &#125;,<br>    ),<br>    <span class="hljs-comment">// æœåŠ¡ç«¯ä½¿ç”¨ electron-mainæ–¹å¼æ¸²æŸ“</span><br>    devServer: <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> &#123;<br>        config.target = <span class="hljs-string">"electron-main"</span>;<br>        <span class="hljs-keyword">return</span> config;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol></li></ol><h2 id="è·¯å¾„é—®é¢˜"><a href="#è·¯å¾„é—®é¢˜" class="headerlink" title="è·¯å¾„é—®é¢˜"></a>è·¯å¾„é—®é¢˜</h2><p>ç”±äºæ‰“åŒ…ç‰ˆæœ¬å’Œå¼€å‘ç‰ˆæœ¬å­˜åœ¨è·¯å¾„å·®å¼‚ï¼Œæ‰€ä»¥éœ€è¦å¼•å…¥ <code>electron-is-dev</code>åŒ…æ¥åˆ¤æ–­å½“å‰çš„ç¯å¢ƒã€‚</p><p>æ•°æ®å­˜å‚¨è·¯å¾„å»ºè®®æ”¾å¤§ <code>electron.app.getAppPath()</code></p>]]></content>
      
      
      
        <tags>
            
            <tag> electron, typescript, react, antd </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2019/01/27/cjxzoi3mg000ojcu9qg5setqx/"/>
      <url>/2019/01/27/cjxzoi3mg000ojcu9qg5setqx/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">"My New Post"</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>2018-11-04æ—¥è®°</title>
      <link href="/2018/11/05/cjxzoi3ly000cjcu9bbr5ji1c/"/>
      <url>/2018/11/05/cjxzoi3ly000cjcu9bbr5ji1c/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©å‘¨æ—¥ï¼ŒåŒä¼‘çš„æœ€åä¸€å¤©ã€‚æ—©ä¸Šèµ·åºŠåå¿˜äº†å¹²å•¥ï¼Œå¦ˆå¦ˆä»–ä»¬ä¼°è®¡å‡ºå»æ‰¾å½¤å½¤ç©äº†ã€‚å¤§æ¦‚10ç‚¹å¤šè¯´å«æˆ‘ä»¬å‡†å¤‡ä¸€ä¸‹å»åƒé¥­ï¼Œç„¶åå°±å‡ºå»äº†ï¼Œæˆ‘ä»¬èµ°è·¯è¿‡å»ï¼Œåœ¨å—æµ·æ©¡å¡‘åŸé‚£è¾¹æ²¿å¤è¥¿çš„æ–¹å‘ä¸€å®¶å« é±¼è™¾èŸ¹ çš„ç‚¹ã€‚æµ·é²œå«äº†å¸¦å­ï¼Œè™¾ï¼Œå…¶ä»–çš„è¿˜æœ‰ ç†Ÿç…®ç‰›è‚‰ï¼Œè èæ’éª¨ï¼Œé…¿è±†è…ï¼Œè’œè“‰èŠ¥è“ï¼Œæ¾å­é±¼ï¼Œä¸‰æ–‡é±¼è…©ï¼Œå¤šå®é±¼é±¼ç‰‡ï¼Œå°±è®°å¾—è¿™ä¹ˆå¤šäº†ï¼Œå…¶ä¸­æ¾å­é±¼æ˜¯ä¸­é—´ç‚¹çš„ï¼Œå¤§å®¶éƒ½åƒé¥±éƒ½è¿˜æ²¡æœ‰ä¸Šèœã€‚<br>å›å»åï¼Œå°èˆ…è¯´è¦èµ°äº†ï¼Œæˆ‘å°±å†æ¥¼ä¸‹è½¦é‡Œé¢å°ç¡äº†ä¸€ä¼šï¼Œä»–ä¸Šå»æ‹¿ä¸œè¥¿ï¼Œç„¶åé€å¥¹å»äº†å¹³æ´²çš„ä¸€ä¸ªå…¬äº¤ç«™å275ï¼Œå›æ¥çš„è·¯å¡äº†ï¼Œé€—äº†ä¸€ä¸ªåœˆæ‰å›æ¥ã€‚<br>å›æ¥åç©äº†ä¸€ä¸‹åˆçš„GTAï¼Œå¥½ä¹…æ²¡æœ‰ç©äº†ï¼Œå…¶å®è¿˜ä¸é”™ï¼Œæœ‰ä¸€ä¸ªç ´åé”€å”®ç‰Œçš„ä»»åŠ¡ï¼Œä¹‹å‰ä¸€ç›´å¤±è´¥ï¼Œè€æ˜¯å¿˜è®°å“ªé‡Œæ²¡æœ‰ç ´åã€‚è¿™æ¬¡ç”¨æ‰‹æœºåšè®°å½•ï¼Œæ€»ç®—æ˜¯å®Œæˆäº†ã€‚</p><p><img src="1.jpg" width="20%"></p><p>ä»Šå¤©ä¹Ÿæ˜¯æ²¡è·‘æ­¥ï¼Œæ™šä¸Šå»äº†å§å®¶åƒè›‹ç³•ï¼Œå¥½è´µå•Šï¼Œ180+çš„è›‹ç³•ï¼Œæœ¬æ¥è®©æˆ‘ä¹°çš„ï¼Œåæ¥ç®—äº†ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ—¥è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018-11-03æ—¥è®°</title>
      <link href="/2018/11/05/cjxzoi3lc0002jcu9os70y54o/"/>
      <url>/2018/11/05/cjxzoi3lc0002jcu9os70y54o/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©å‘¨å…­ï¼Œå¯ä»¥ä¼‘æ¯çš„æ—¥å­ï¼Œæ˜¨å¤©å°èˆ…è¿‡æ¥äº†ã€‚æ˜å¤©å§çš„äºŒå¥³å„¿æ»¡æœˆï¼Œä»–è¿‡æ¥ä¸€èµ·åº†ç¥ã€‚æ˜æ˜è¿˜æ˜¯ä¸ªå©´å„¿ï¼Œä½ ä»¬éƒ½å¤§åƒå¤§å–çš„åº†ç¥ï¼Œå¥¹åªèƒ½çœ¼å·´å·´çš„çœ‹ç€ï¼Œåªèƒ½å–å¥¶ï¼ŒçœŸçš„å¥½å—ã€‚<br>ä»Šå¤©æ²¡æœ‰å‡ºå»ï¼Œä¹…è¿çš„åœ¨å®¶é‡Œå‘†äº†ä¸€æ•´å¤©ï¼Œæ—©ä¸Šèµ·æ¥å·²ç»9ç‚¹å¤šäº†ï¼Œå¦ˆå¦ˆä»–ä»¬å»å…¨åå¥èº«å¹¿åœºå®Œäº†ï¼Œä»¥ä¸ºä»–ä»¬ä¼šå«æˆ‘ï¼Œä½†æ˜¯æ²¡æœ‰ã€‚èµ·æ¥ååƒäº†ä¸ªæ—©é¤ï¼Œç™½ç²¥+ç‚’ç±³ç²‰ã€‚çœ‹ã€Šå’‹ä»¬ç©¿è¶Šå§ã€‹ï¼Œå› ä¸ºé‡Œé¢æœ‰å¼ å«å¥ï¼Œæ‰€ä»¥å°±çœ‹çœ‹ï¼ŒæŒºä¸é”™çš„ï¼Œæ¯”å¥”è·‘é‚£äº›æœ‰å†…å®¹ã€‚ä¸­åˆåƒäº†é¥ºå­ï¼Œç»™å¥¹ç…®äº†11ä¸ªé¦„é¥¨ï¼Œå› ä¸ºå¥¹è¯´åªè¦10ä¸ªï¼Œæˆ‘å°±æ‹¿èµ°äº†ä¸€ä¸ªã€‚<br>ä¸‹åˆçˆ¸å»äº†å…¬å¸ï¼Œè¯´ä¸‹åˆè¦å¼€ä¼šï¼Œæ™šä¸Šå›æ¥ã€‚æˆ‘2ç‚¹å¤šç¡äº†ä¸ªåˆè§‰ï¼Œä¸€ç›´ç¡åˆ°5ç‚¹å¤šã€‚å¥½ä¹…æ²¡ç¡é‚£ä¹ˆä¹…çš„åˆè§‰äº†ï¼Œä»¥è‡³äºæ™šä¸Šæœ‰ç‚¹ç¡ä¸ç€ã€‚ä»Šå¤©ä¹Ÿæ²¡æœ‰è·‘æ­¥ï¼Œæ™šä¸Šå’Œå¦ˆå¦ˆæ‰“éº»å°†ï¼Œä¹Ÿæ˜¯ä¸€ç›´è¾“ï¼Œå°±æ‰¾åˆ°ä¸€å…ƒé’±è€Œå·²ã€‚ä½©è²ç»™æˆ‘äº†25ï¼Œæœ€åè®©æˆ‘çˆ¸ç©ï¼Œä»–å›æ¥äº†ï¼Œè¾“äº†å¤šå°‘å°±ä¸çŸ¥é“äº†ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ—¥è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018-11-02æ—¥è®°</title>
      <link href="/2018/11/02/cjxzoi3ll0006jcu9cy80o1tb/"/>
      <url>/2018/11/02/cjxzoi3ll0006jcu9cy80o1tb/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—©æ‹‰è‚šå­äº†ï¼Œæ˜¨æ™š1ç‚¹å¤šçš„æ—¶å€™é¥¿äº†ï¼Œè·‘èµ·æ¥å–äº†ä¸ªè°·ç²’å¤šï¼Œåƒäº†å‰©ä¸‹çš„é¢åŒ…ã€‚ç„¶åæ—©ä¸Šæˆ‘å…ˆä¸Šäº†ä¸ªå•æ‰€ï¼Œæƒ³ç€å…ˆè®©è€å©†å»æ´—æ¼±ï¼Œå°±å›æˆ¿é—´ç»§ç»­ç¡è§‰ï¼Œç„¶åçªç„¶å°±è‚šå­ç—›ï¼Œç„¶åä¸Šå•æ‰€ï¼Œéå¸¸çš„çƒ‚ã€‚ç„¶åä»Šå¤©æ—©ä¸Šæ‹‰äº†3å›ã€‚<br>æ—©ä¸Šåƒçš„æ˜¯æ’éª¨ç²¥ï¼Œä¸­åˆåƒçš„æ˜¯é¥­ï¼Œæœ‰è±†è§’ï¼ŒçŒªè„šï¼Œè‚‰é¥¼ã€‚<br>è€å©†è¯´çœ¼éœœæœ‰å¯èƒ½æ˜¯å‡çš„ï¼Œå“‡â€¦â€¦å‡ ç™¾å—çš„ä¸œè¥¿ï¼Œå“åˆ°äº†ã€‚åæ¥è¯´æ˜¯åŒ…è£…ä¸åŒâ€¦â€¦å”‰ï¼Œè°çŸ¥é“äº†ï¼ŒåŒ–å¦†å“çš„ä¸œè¥¿æ·±ä¼¼æµ·å•Šã€‚<br>ä¸‹åˆä»²ä¼¯çš„å¼ å›½å†›æ¥äº†ï¼Œè¿˜æ˜¯ä¹‹å‰çš„ç»´æŠ¤çš„äº‹æƒ…ï¼Œå˜›â€¦â€¦ä¸å¤ªæƒ³åŒæ„ï¼Œå› ä¸ºæ‡’ï¼Œè€Œä¸”ä»–ä»¬è€æ²¹æ¡ï¼Œä¸å¤ªæ•¢å’Œä»–ä»¬åˆä½œï¼Œè¿˜æ˜¯ç›´æ¥ç»™é’±ç°å®ç‚¹ã€‚<br>æ™šä¸Šå°èˆ…æ¥äº†ï¼Œæ™šé¤ç›¸å¯¹ä¸°å¯Œäº›ã€‚å¼ å›½å†›è¯´8ç‚¹åŠå¼€ä¼šï¼Œä½†æ˜¯æˆ‘8ç‚¹éƒ½è¿˜æ²¡åƒé¥­ï¼Œäºæ˜¯å°±å’Œä»–ä»¬è¯´æ¨è¿Ÿç‚¹ã€‚å¯æ˜¯å±…ç„¶åœ¨8ç‚¹30åˆ†æ²¡åˆ°å°±åƒå®Œäº†ï¼Œå–äº†æ±¤ï¼Œéå¸¸çš„é¥±ï¼Œæ„Ÿè§‰è¿™å‡ å¤©éƒ½ç™½è·‘æ­¥äº†ã€‚ç„¶åæ‹–åˆ°å¿«9ç‚¹çš„æ—¶å€™ï¼Œæˆ‘é“¾æ¥äº†è¿›å»å¼€ä¼šï¼Œå¼€åˆ°å·®ä¸åˆ°11ç‚¹æ‰ç»“æŸï¼Œæ‰€ä»¥æ‰ä¸æƒ³å’Œä»–ä»¬å¼€ä¼šï¼Œå¤ªå©†å©†å¦ˆå¦ˆäº†ã€‚ç»“è®ºæˆ‘è¿™è¾¹å†™ä¸€ä¸ªexcelæ¨¡æ¿çš„Demoã€‚ä»Šæ™šå¦ˆå¦ˆæƒ³æ‰“éº»å°†ï¼Œä¸è¿‡æˆ‘è¦å¼€ä¼šï¼Œå°±æ²¡æœ‰æ‰“ï¼Œä¹Ÿæ²¡æœ‰è·‘æ­¥ã€‚<br>ä»Šå¤©æ²¡æœ‰æ¶ˆè´¹ï¼Œè‡ªä»å®¶é‡Œå¸¦é¥­ï¼Œæ¯å¤©0æ¶ˆè´¹ï¼Œä»€ä¹ˆçš„ğŸ˜</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ—¥è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018-11-01æ—¥è®°</title>
      <link href="/2018/11/01/cjxzoi3m4000fjcu9hsd3gx8k/"/>
      <url>/2018/11/01/cjxzoi3m4000fjcu9hsd3gx8k/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©3ç‚¹å¤šçš„æ—¶å€™è€å©†è¯´è‚šå­ç—›é†’äº†ï¼Œç„¶åæŠŠæˆ‘ä¹Ÿåµé†’äº†â€¦â€¦é—®ä»–è¦ä¸è¦å»åŒ»é™¢ï¼Œå¥¹è¯´å…ˆä¸ç”¨ï¼Œæˆ‘å°±å’Œä»–è¯´é‚£å¤©äº®äº†å’Œå¥¹å»å§ã€‚ç„¶åæˆ‘ç¡ä¹‹å‰åˆè¯´äº†ä¸‹ï¼Œå¦‚æœè¦å»å°±æ¥å«é†’æˆ‘ã€‚è¿™ä¸ªä¸€å®šè¦è®°ä¸‹æ¥ï¼Œå› ä¸ºå¥¹æŠ±æ€¨è¯´å¥¹è‚šå­ç—›ï¼Œæˆ‘å±…ç„¶è¯´å¤©äº®æ‰é€å¥¹å»åŒ»é™¢ï¼Œæ„¿æœ›å•Šã€‚æ—©ä¸Š6ç‚¹èµ·æ¥ï¼Œé€å¥¹å»äº†åŒ»é™¢çœ‹äº†æ€¥ç—‡ï¼Œå¥¹èŠ±è´¹äº† 44 å…ƒå¤šå§ï¼Œçœ‹ç—…ç”¨çš„ã€‚å¼€äº†äº›è¯ï¼ŒéªŒäº†ä¸ªè¡€å¸¸è§„ï¼Œç™½ç»†èƒå¤šäº†ï¼Œå…¸å‹çš„éªŒè¯ï¼Œä¼°è®¡æ˜¯ç»†èŒæ„ŸæŸ“äº†ã€‚<br>å›åˆ°å®¶å·²ç»å¿«9ç‚¹åŠäº†ï¼Œåƒäº†ä¸ªæ—©é¤ï¼Œå¦ˆå¦ˆç…®çš„çŒªè‚‰ç²¥ã€‚ç„¶åè¡¥äº†ä¸‹è§‰ï¼Œå·®ä¸å¤š11ç‚¹å¤šçš„æ—¶å€™å‡ºå‘å»ä¸Šç­ï¼Œä¸‹åˆ°å•è½¦æˆ¿æ‰æƒ³èµ·æ¥å¿˜è®°å¸¦ä¸­åˆé¥­äº†ï¼Œåˆè·‘å›å»æ‹¿ã€‚åœ¨è½¦ä¸Šçœ‹åˆ°è¯´æ–°çš„ç¡¬ç›˜åˆ°äº†ï¼Œå¾ˆå…´å¥‹ï¼Œä¸€å›åˆ°åŠå…¬å®¤å°±æ‰¾å¿«é€’ã€‚å‘ç°å¥¹çš„çœ¼éœœä¹Ÿåˆ°äº†ï¼Œä¹°äº†å¥½ä¹…ï¼Œç»ˆäºåˆ°è´§äº†ã€‚</p><img src="/2018/11/01/cjxzoi3m4000fjcu9hsd3gx8k/2.jpg" title="æ‹†å¼€å‰"> <img src="/2018/11/01/cjxzoi3m4000fjcu9hsd3gx8k/1.jpg" title="æ‹†å¼€å"><p>å¤©å•Šï¼Œè¿™ä¸¤ä¸ªä¸œè¥¿çš„ä»·æ ¼åŸºæœ¬ä¸€æ ·çš„ã€‚å“¼ï¼Œå¥³äººçš„SSDã€‚<br>ä¸­åˆåƒçš„é¥ºå­ã€‚</p><p>ä¸‹åˆåšäº†ä¸ªç¥å¥‡çš„è½¯ä»¶ï¼Œçœ‹å°è§†é¢‘çš„ï¼Œå“ˆå“ˆï¼Œå› ä¸ºé‚£ä¸ªç½‘å®åœ¨å¤ªå¿«äº†ï¼Œè€Œä¸”åˆä¸ç”¨å¢™ï¼Œäºæ˜¯å°±æ£é¼“äº†ä¸€ä¸‹ã€‚å¥½ä¹…æ²¡æœ‰å†™ract-nativeäº†ï¼Œå¥½å¤šéƒ½å¿˜è®°äº†ï¼Œå“ˆå“ˆï¼Œæ”¾æ­Œæˆªå›¾å…ˆ</p><p><img src="3.jpeg" width="20%"></p><p>é€Ÿåº¦å¾ˆå¿«ï¼Œä¸è¿‡ä¸å’‹æ›´æ–°çš„æ ·å­ï¼Œç°åœ¨ä¹Ÿçˆ¬å–äº†é¦–é¡µè€Œå·²ï¼Œç­‰æœ‰ç©ºäº†ï¼Œå°±å†æ”¹æ”¹ã€‚<br>ç¡¬ç›˜åˆ°äº†ï¼Œæ‰€ä»¥ç½‘ä¸Šéƒ½åœ¨æç”µè„‘ï¼Œæ²¡æœ‰å»è·‘æ­¥ï¼Œä¸€å¼€å§‹é€Ÿåº¦æœ‰é—®é¢˜ï¼Œå†™é€Ÿåº¦æ‰300ä¸åˆ°ï¼Œåå°çªç„¶æ‰ç›˜äº†ï¼Œç„¶åè¯†åˆ«ä¸äº†ç¡¬ç›˜ï¼Œæ¢äº†ä¸€æ ¹ï¼Œè¿˜æ˜¯ä¸è¡Œï¼Œä»¥ä¸ºæ˜¯SSDçš„é—®é¢˜ï¼Œæ¢åˆ°HDDç¡¬ç›˜ä¹Ÿä¸è¡Œï¼ŒåŸæ¥æ¢çš„çº¿æœ¬èº«ä¹Ÿæœ‰é—®é¢˜â€¦â€¦ã€‚è¿˜å¥½ä¸»æ¿æ²¡æœ‰é—®é¢˜ï¼Œæ£é¼“åˆ°11ç‚¹å¤šï¼Œä¸æäº†ï¼Œå»æ´—æ¾¡ï¼Œå‡†å¤‡ç¡è§‰äº†</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ—¥è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018-10-31æ—¥è®°</title>
      <link href="/2018/11/01/cjxzoi3m9000kjcu998orfohf/"/>
      <url>/2018/11/01/cjxzoi3m9000kjcu998orfohf/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©æ¯”è¾ƒæ—©å‡ºé—¨ï¼Œå› ä¸ºä»Šå¤©è¦å»å¤©å®‰æ•°ç åŸé‚£è¾¹å¼€ä¼šï¼Œæ—©ä¸Šåƒçš„å•¥åˆå¿˜äº†ï¼Œä¸‹æ¬¡æ‹ç…§è®°å½•å§ã€‚<br>è€å©†ä»Šå¤©ä¹Ÿä¸Šç­äº†ï¼Œæœ¬æ¥è¯´å»åŒ»é™¢çš„ï¼Œåæ¥åˆè¯´ä¸ç”¨äº†ï¼Œå…ˆçœ‹çœ‹æƒ…å†µå†è¯´ã€‚æ¥åˆ°å…¬å¸å¤§æ¦‚9ç‚¹é’Ÿï¼Œæ—¶é—´å·®ä¸å¤šï¼Œå› ä¸ºæˆ‘æ‰“ç®—éª‘è‡ªè¡Œè½¦å»å¤©å®‰ã€‚å»åˆ°ç”µæ¢¯ï¼Œæƒ³èµ·å¸¦å”‡è†ï¼Œå·²è¿‘è¿›å…¥ç§‹å­£äº†ï¼Œå¤©æ°”æœ‰ç‚¹å†·äº†ï¼Œå¾ˆå¹²ç‡¥ï¼Œå˜´å”‡å¼€å§‹ä¸èˆ’æœäº†ã€‚<br>å»åˆ°äº†å¤©å®‰ï¼Œå·®ä¸€ä¸¤åˆ†é’Ÿï¼Œæ²¡è¿Ÿåˆ°ï¼Œä¸è¿‡ä»–ä»¬è®²çš„æ˜¯ä»–ä»¬çš„æ—§ç³»ç»Ÿçš„äº‹æƒ…ã€‚å¤§æ¦‚çš„æ„æ€æ˜¯æƒ³æŠŠæ—§ç³»ç»Ÿå’Œæ–°ç³»ç»Ÿä¸€èµ·è¿›è¡Œç»´æŠ¤â€¦â€¦è¿™æ ·ä¸€æ¥ï¼Œå·¥ä½œé‡å°±åˆå¤§äº†ã€‚ä¼šè®®å¼€å®Œä¹‹åæˆ‘å°±å›æ¥äº†ï¼Œä¸æƒ³å’Œä»–ä»¬åƒé¥­ï¼Œä¸è¿‡æˆ‘ä¹Ÿæ˜¯åæ¥æ‰æƒ³èµ·æ¥æˆ‘å¸¦é¥­äº†ï¼Œè¿˜æœ‰æ²¡æœ‰å’Œä»–ä»¬åƒï¼Œä¹Ÿæ˜¯éª‘è‡ªè¡Œè½¦å›æ¥çš„ã€‚<br>å›æ¥æ—¶è·¯è¿‡ä¸€ä¸ªå–è±†è…èŠ±çš„ï¼Œå¿ä¸ä½å«äº†ä¸€ç¢—ã€‚å¥¹è¿˜æœ‰åŒçš®å¥¶å–ï¼Œä¸è¿‡æˆ‘æ‹…å¿ƒè´¨é‡é—®é¢˜ï¼Œå°±æ²¡æœ‰è¦ï¼Œåªè¦äº†è±†è…èŠ±<code>3å…ƒ</code>ã€‚ä¸­åˆæ˜¯åƒå¸¦çš„é¥­ï¼Œå’Œå¦ˆå¦ˆè¯´æƒ³é‡æ–°å¸¦é¥­ï¼Œäºæ˜¯ä¸­åˆå°±æœ‰é¥­åƒäº†ï¼Œå”‰ï¼Œæœç„¶ç¦»ä¸å¼€æ¯äº²å•Šã€‚è²è—•çŒªè‚‰ï¼Œæœ¨è€³èŠ¹èœï¼Œå“ˆå“ˆåƒå¤ªå¤šäº†ï¼Œå¥½ä¹…ä¸­åˆæ²¡åƒé‚£ä¹ˆé¥±äº†ã€‚<br>ä¸‹åˆå’Œæ—ä¿Šé‘«è®¨è®ºäº†ä¸€ä¸‹ã€Šç”»åƒã€‹çš„é¡¹ç›®ï¼Œè¿™ä¸ªé¡¹ç›®ä¹Ÿæ‰˜æŒºä¹…çš„äº†ï¼Œä»–ä»¬çš„éœ€æ±‚ä¹Ÿå¤§æ”¹äº†ä¸€ç•ªã€‚ç„¶ååæ¥æ‰çŸ¥é“ä»–ä»¬è¿˜æœ‰5kå…ƒçš„é¡¹ç›®è´¹æ²¡æœ‰ç»™ã€‚<br>æ™šä¸Šè·‘äº†20åˆ†é’Ÿæ­¥ï¼Œç„¶åè¿˜åšäº†å‡ ä¸ªåŸºæœ¬çš„è…¹éƒ¨è‚Œè‚‰è¿åŠ¨ã€‚ä»Šå¤©æ¯”è¾ƒæ—©ä¸‹å»ï¼Œæƒ³ç€ä»Šå¤©æ˜¯ä¸‡åœ£èŠ‚ï¼Œç„¶è€Œä¸‹å»åä¹Ÿæ²¡å•¥çœ‹çš„ã€‚ä»Šå¹´æ²¡æœ‰ä¸Šä¸€å¹´é‚£ä¹ˆçƒ­é—¹ã€‚<br>æ™šä¸Šäº¬ä¸œç»™æˆ‘æˆ‘ç”µè¯ï¼Œè¯´ä¸œè¥¿ä¿®è¦å¥½ä¹…ï¼Œç»™æˆ‘æ¢ä¸ªå…¶ä»–çš„ï¼Œ intel çš„ 256g çš„å›ºæ€ç¡¬ç›˜ã€‚å¯¹äºæˆ‘æ¥è¯´å½“ç„¶å¥½ï¼Œæ¯•ç«Ÿæˆ‘é‚£ä¹ˆå·²ç»å¿«3å¹´äº†ï¼Œç°åœ¨ç»™æˆ‘ä¸ªæ–°çš„ï¼Œè€Œä¸”æ˜¯intelçš„ï¼Œå“ˆå“ˆã€‚å†…å­˜è¿˜æ˜¯æ²¡æœ‰å¯„å‡ºå»ï¼Œå¤ªéº»çƒ¦äº†ï¼Œæ˜¨å¤©å¿«é€’å‘˜è¯´æœ€è¿‘çš„è‡ªæç‚¹éƒ½åœ¨çŸ³æ¹¾ï¼Œå¤ªéº»çƒ¦äº†ã€‚è€Œä¸”ä¸Šæ¬¡æ£€æµ‹å†…å­˜ä¼¼ä¹æ²¡æœ‰é—®é¢˜ï¼Œæ‰€ä»¥å°±ä¸ä¿®äº†ã€‚æ–°ç¡¬ç›˜åˆ°äº†è¯•è¯•ï¼Œçœ‹çœ‹è¿˜ä¼šä¸ä¼šæ€»æ˜¯è“å±å†è¯´ã€‚</p><img src="/2018/11/01/cjxzoi3m9000kjcu998orfohf/1.jpg" title="ä¸‡åœ£èŠ‚æ‹åˆ°çš„å¿«é—ª"><p>è¿™æ˜¯æˆ‘ç°åœ¨çš„ä½“å‹ï¼Œç°åœ¨å¼€å§‹è¿åŠ¨ï¼Œç›¸ä¿¡ä¸ä¹…çš„å°†æ¥ï¼Œå®šèƒ½æ‹¥æœ‰8å—è…¹è‚Œ â˜º ï¸</p><img src="/2018/11/01/cjxzoi3m9000kjcu998orfohf/3.jpg" title="æœ€æ–°çš„ä¸ªäººç…§ç‰‡"><table><thead><tr><th>èŠ±è´¹é¡¹</th><th>é‡‘é¢</th></tr></thead><tbody><tr><td>è†œæ‹œå•è½¦</td><td>1</td></tr><tr><td>è†œæ‹œå•è½¦</td><td>1</td></tr><tr><td>è±†è…èŠ±</td><td>3</td></tr></tbody></table><p>çœŸæ˜¯ä¸€ä¸ªçœé’±çš„æ—¥å­å‘¢ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ—¥è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018-10-29æ—¥è®°</title>
      <link href="/2018/10/30/cjxzoi3l00000jcu92r6grvyv/"/>
      <url>/2018/10/30/cjxzoi3l00000jcu92r6grvyv/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©æ—©ä¸Šè¿‡äº†ä¸€éè·Ÿå•å®çš„æ¥å£ï¼Œå‘ç°è¿˜æœ‰æœ‰æ¯”è¾ƒå¤šé—®é¢˜çš„ï¼Œäºæ˜¯å°±æ²¡æœ‰åšä¸‹å»äº†ï¼ŒæŠŠå‡ ä¸ªæœ‰çš„ç•Œé¢å®Œå–„äº†ã€‚<br>ä¸­åˆåƒçš„ä¸‰æ´¥ï¼Œå’¸é±¼è’¸è‚‰é¥­ï¼Œå¥¹åƒäº†é…±æ²¹é¸¡é¥­ã€‚ä¸‹åˆç»™äº†åŒ…æ–°ä¹°çš„ç‰›å¥¶å¥¹å–ï¼Œä¸è¿‡ä»–æ—æ™šçš„æ—¶å€™è¿‡æ¥è¯´è‚ å­ä¸èˆ’æœï¼Œè¯´å¯èƒ½æ˜¯å–ç‰›å¥¶å–çš„ï¼Œä¹Ÿä¸çŸ¥é“è¯´ä»€ä¹ˆå¥½ï¼Œæˆ‘è™½ç„¶è¿™å‡ å¤©éƒ½æ‹‰è‚šå­ï¼Œä½†æ˜¯è‡³å°‘ä¸ä¼šç—›ã€‚ä¸è¿‡ä»Šå¤©è¿˜è¡Œï¼Œæ²¡æœ‰æ€ä¹ˆæ‹‰è‚šå­äº†ã€‚<br>æ™šä¸Šå¤§æ¦‚6ç‚¹45å·¦å³å›å»çš„ã€‚æ™šé¤æ˜¯æ’éª¨èƒ¡èåœç²‰è‘›æ±¤ï¼Œå…¶ä»–å¿˜äº†ï¼Œåƒçš„ç±³é¥­ï¼Œæœ‰æ±¤å–å°±æ˜¯å®¹æ˜“åƒå¾—å¤ªé¥±ã€‚åƒå®Œé¥­å»å¼„äº†ä¸€ä¸‹ç”µè„‘ï¼Œé‚£å°ç”µè„‘è‡ªä»æ¢äº†ä¸»æ¿å°±å„ç§å®¹æ˜“è“å±å¡æ­»ï¼Œåæ¥æƒ³ä¼šä¸ä¼šæ˜¯ç¡¬ç›˜é—®é¢˜ï¼Œè€Œä¸æ˜¯å†…å­˜é—®é¢˜ï¼Œä¸€çœ‹å¼€æœºCç›˜å ç”¨ç‡ä¸€ç›´100%ä¸ä¸‹æ¥ï¼Œçœ‹æ¥æ˜¯äº†ã€‚ç„¶ååšäº†ä¸€ä¸‹ç¡¬ç›˜æ£€æµ‹ï¼Œæœç„¶æœ‰åé“ã€‚äºæ˜¯ç”³è¯·äº†å”®åï¼Œä¸€çœ‹æ˜¯2015-11-11æ—¥ä¹°çš„ï¼Œå·®å‡ å¤©å°±è¿‡3å¹´ä¿ä¿®äº†ï¼Œè¿˜å¥½ï¼Œæœ¬æ¥æƒ³æ”¾å›¾ç‰‡çš„ï¼Œå¥ˆä½•macè¯»å–ä¸äº†å›¾ç‰‡ï¼Œfuckã€‚æ€•ç¬¬äºŒå¤©å¿˜è®°å¸¦ï¼Œå°±æ‹†äº†ä¸‹æ¥ã€‚æ”¾åˆ°äº†å¤–é¢çš„æ¡Œå­ä¸Šã€‚<br>åœ¨å¿«21ç‚¹30åˆ†çš„æ—¶å€™å»è·‘äº†ä¸€ä¸‹æ­¥ï¼Œæ²¿ç€æ²³è¾¹å¾€å§æ–¹å‘å®¶è·‘å»ï¼Œåœ¨è—•ç”°å…¬å›­å…œåœˆã€‚ä¸¤å¤©æ²¡æœ‰è·‘äº†ï¼Œè·‘äº†15åˆ†é’Ÿå·¦å³å°±ä¸è¡Œäº†ï¼Œä¸»è¦æ˜¯å‘¼å¸å¤ªå¹²ç‡¥ä¸èˆ’æœï¼Œå…¶ä»–è¿˜å¥½ã€‚<br>ç„¶åå»å§å®¶åšäº†ä¸€ä¼šï¼Œä»–ä»¬å®¶åœ¨çœ‹å„¿ç«¥éŸ³ä¹ã€‚å¦¹å¦¹åœ¨ç¡è§‰ï¼Œå§è¯´è¯šå“¥ä»Šæ™šä¸å›æ¥ï¼Œä»–è¶Šæ¥è¶Šå¿™çš„æ ·å­ã€‚å¤§æ¦‚å¿«22ç‚¹çš„æ—¶å€™å›äº†å®¶ï¼Œå«å¦ˆå¦ˆç…®äº†ä¸ªè‡ªå·±åšçš„é…’ï¼Œæœ‰ç‚¹é…¸ï¼Œæ²¡æœ‰ç±³é…’å¥½å–ï¼Œç„¶åçœ‹äº†ä¸‹ç²¾çµæ—…ç¤¾3ï¼Œåœ¨23ç‚¹å·¦å³å‡†å¤‡æ´—æ¾¡ç¡è§‰äº†ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ—¥è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018-10-30æ—¥è®°</title>
      <link href="/2018/10/30/cjxzoi3li0005jcu9cp1urwm8/"/>
      <url>/2018/10/30/cjxzoi3li0005jcu9cp1urwm8/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©æ‰¾äº†ä¸€ä¸‹è®°æ—¥è®°çš„è½¯ä»¶ï¼ŒæŒºéš¾æ‰¾çš„ï¼Œæ‰¾ä¸åˆ°ç¬¦åˆå¿ƒæ„çš„ï¼Œè§‰å¾—è¿˜è¡Œçš„åˆè¦é’±ï¼Œéº»çƒ¦ã€‚<br>å¥½å¤šæ¬¡è¯´è¦è®°æ—¥è®°éƒ½æ˜¯è®°äº†å‡ å¤©å°±åšæŒä¸ä¸‹å»äº†ï¼Œè¿™æ¬¡ä¸çŸ¥é“èƒ½åšæŒå¤šä¹…ï¼Œå”‰â€¦â€¦</p><p>ä»Šå¤©å¥¹æ²¡æœ‰æ¥ä¸Šç­ï¼Œè¯´æ˜¯è‚ èƒƒä¸èˆ’æœï¼Œå«å¥¹å»åŒ»é™¢ï¼Œå¥¹è¯´å»ä¸€æ¬¡æ²¡å‡ ç™¾å…ƒçš„ï¼Œä¸æƒ³å»ã€‚é‚£å°±ç®—äº†ï¼Œå¥¹èº«ä½“ä¸€ç›´å®¹æ˜“å‡ºé—®é¢˜ï¼Œå«å¥¹å’Œæˆ‘å»è·‘æ­¥åˆå„ç§ç†ç”±ï¼Œç®¡å¥¹å‘¢ï¼Œçƒ¦æ­»äº†ï¼Œæ€»æ˜¯å¬å¥¹è¯´è¿™é‡Œä¸èˆ’æœé‚£é‡Œä¸èˆ’æœçš„ï¼Œè‡ªå·±åˆä¸æ³¨æ„ï¼Œè¶Šæ¥è¶Šä¸æƒ³ç®¡å¥¹äº†ã€‚<br>ä¸‹åˆå¥¹å‘ä¿¡æ¯è¿‡æ¥ï¼Œè¯´è¦åƒå®Œäº†ã€‚ä»Šæ™šå›å»ä¹°ç‚¹ç»™å¥¹æ‰è¡Œã€‚</p><p><img src="http://kirno-markdown.oss-cn-shenzhen.aliyuncs.com/18-10-30/78244602.jpg" width="30%"></p><p>ä»Šå¤©ä¸€ä¸ªäººæ¥ä¸Šç­ï¼Œ11ç‚¹å·¦å³æœ‰ä¸€ä¸ªäººæ¥è¯´è¦å½•ä¼ä¸šä¿¡æ¯ï¼Œæ‰¾äº†ä¸€ä¸‹è¥ä¸šæ‰§ç…§ç»™ä»–ï¼Œç„¶åæˆ‘å°±è¿”å›åœ¨åé¢çš„æŸœç­’çš„ç¬¬äºŒæ ¼é‡Œé¢ï¼ˆè®°ä¸‹æ¥ï¼Œå…å¾—ä»¥åæ‰¾å¿˜äº†ï¼‰ã€‚<br>ä¸‹åˆè¿˜æ˜¯æƒ³æ¢ä¸€ä¸ªæ—¥è®°è½¯ä»¶ï¼Œäºæ˜¯çœ‹ä¸­äº†hexoï¼Œè¿™ä¸ªä¸œè¥¿æ¯•ç«Ÿæ˜¯å¼€æºçš„ï¼Œè‡ªç”±åº¦éå¸¸çš„é«˜ï¼Œè€Œä¸”ä½¿ç”¨çš„githubæœåŠ¡å™¨ï¼Œå®‰å…¨ä¹Ÿä¸é”™ï¼Œä½†æ˜¯æœ‰å‡ ä¸ªé—®é¢˜</p><p>æ–‡ç« åŠ å¯†<br>é¦–é¡µç­›é€‰</p><p>ç¬¬ä¸€ä¸ªé—®é¢˜å¾ˆå¥½è§£å†³ï¼Œä½¿ç”¨äº† hexo-blog-encrypt è¿™ä¸ªæ’ä»¶è§£å†³äº†ã€‚ä½†æ˜¯ç¬¬äºŒä¸ªé—®é¢˜ï¼Œæ€»ä¸å¯èƒ½åœ¨é¦–é¡µæ˜¾ç¤ºæ—¥å¿—é‚£ä¹ˆå‚»é€¼å§ï¼Œæ‰€ä»¥å°±åŠ¨æ‰‹è§£å†³ï¼Œçœ‹äº†å¾ˆä¹…æ¨¡æ¿ä»£ç ï¼Œç”±äºå®ƒæ˜¯ejså†™çš„ï¼Œä¹‹å‰æ²¡ç”¨è¿‡ï¼Œæ‰€ä»¥å„ç§ä¸é€‚åº”ã€‚æœ€ç»ˆè§£å†³äº†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ejs">&lt;% page.posts.each(function(post, i)&#123; %&gt;<br>  &lt;% let isOk = true; %&gt;<br>  &lt;% post.tags.limit(3).each(function (tag) &#123; %&gt;<br>      &lt;% isOk = true; %&gt;<br>      &lt;% console.log(&apos;tagä¸º&apos;+tag.name) %&gt;<br>      &lt;% if(tag.name === &apos;æ—¥è®°&apos;)&#123;isOk = false;&#125; %&gt;<br>    &lt;% &#125;); %&gt; <br>  &lt;% if(isOk)&#123; %&gt;<br>    &lt;%- partial(&apos;archive-post&apos;, &#123;post: post, even: i % 2 == 0&#125;) %&gt;      <br>  &lt;% &#125; %&gt; <br>&lt;% &#125;) %&gt;<br></code></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™ä¸ªåŠæ³•ä¹Ÿæ˜¯å¾ˆç¬¨æˆ³ï¼Œå› ä¸ºæ˜¯æŠŠæŸ¥å‡ºæ¥çš„æ•°æ®å†åˆ¤æ–­ä¸€æ¬¡ã€‚åæ¥å‘ç°å¯ä»¥å†æŸ¥è¯¢å‡ºæ¥çš„æ—¶å€™è¿›è¡Œä¸€æ¬¡è¿‡æ»¤ã€‚<br>æ–¹æ³•ç ”ç©¶ä¸­â€¦</p><p>ç®—äº†ï¼Œæ”¾å¼ƒäº†</p><p>ä»Šæ™šä¹Ÿè·‘æ­¥äº†ï¼Œå“ˆå“ˆï¼Œæ•´æ•´20åˆ†é’Ÿï¼Œæ²¡æœ‰å·é¸¡äº†ã€‚ç®—ä¸‹æ¥ä¹Ÿæœ‰7å¤©ï¼Œå˜»å˜»</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ—¥è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dnsCheck</title>
      <link href="/2018/07/10/cjxzoi3mb000mjcu97vkaxzkn/"/>
      <url>/2018/07/10/cjxzoi3mb000mjcu97vkaxzkn/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨digå‘½ä»¤è¿›è¡Œæ£€æµ‹ã€‚<br>è¿è¡Œ dig ä¸»æœºè®°å½•å‘½ä»¤è¿›è¡Œæ£€æµ‹æˆ–è€…è¿è¡Œ dig ä¸»æœºè®°å½• @8.8.8.8å‘½ä»¤æŒ‡å®šä½¿ç”¨è°·æ­ŒDNSè¿›è¡ŒéªŒè¯ã€‚ä¾‹å¦‚ï¼Œ dig txt b.aliyuntest.com @8.8.8.8ã€‚<br><img src="http://oepv0v7je.bkt.clouddn.com/18-7-10/92556404.jpg" alt><br>å¦‚æœè¿”å›ç»“æœä¸­å­˜åœ¨ç±»ä¼¼å›¾ç¤ºä¸­çš„TXTè®°å½•ï¼Œä¸”è®°å½•å€¼ä¸è®¢å•è¿›åº¦é¡µé¢ä¸­çš„è®°å½•å€¼ä¸€è‡´ï¼Œè¡¨ç¤ºæ‚¨çš„DNSé…ç½®æ­£ç¡®ä¸”å·²ç”Ÿæ•ˆï¼›å¦‚æœè®°å½•å€¼ä¸åŒï¼Œè¯·æŒ‰ç…§è®¢å•è¿›åº¦é¡µé¢ä¸­çš„è®°å½•å€¼åœ¨DNSåŸŸåè§£ææœåŠ¡å•†å¤„æ›´æ–°è¯¥éªŒè¯è®°å½•ã€‚<br>å¦‚æœè¿”å›ç»“æœä¸­ä¸å­˜åœ¨TXTè®°å½•ï¼Œå¯èƒ½æ˜¯DNSé…ç½®æœ‰è¯¯æˆ–è€…é…ç½®æœªç”Ÿæ•ˆã€‚å¦‚é…ç½®é”™è¯¯ï¼Œè¯·æŒ‰ç…§è®¢å•è¿›åº¦é¡µé¢ä¸­çš„é…ç½®è¦æ±‚åœ¨DNSåŸŸåè§£ææœåŠ¡å•†å¤„é‡æ–°é…ç½®ï¼›å¦‚æœé…ç½®é•¿æ—¶é—´æœªç”Ÿæ•ˆï¼Œè¯·è”ç³»åŸŸåæ‰˜ç®¡å•†ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>linuxå¸¸ç”¨å‘½ä»¤</title>
      <link href="/2018/07/02/cjxzoi3m6000hjcu9vm1xdi4c/"/>
      <url>/2018/07/02/cjxzoi3m6000hjcu9vm1xdi4c/</url>
      
        <content type="html"><![CDATA[<ol><li>æŸ¥çœ‹apt-getä¸‹è½½çš„è½¯ä»¶çš„ä½ç½®</li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>gitlabå®‰è£…æ•™ç¨‹</title>
      <link href="/2018/06/28/cjxzoi3n9001jjcu9ye57ynw9/"/>
      <url>/2018/06/28/cjxzoi3n9001jjcu9ye57ynw9/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è¿™æ˜¯ä¸€ç‰‡å…³äºGitLabçš„å®‰è£…æ•™ç¨‹ä»¥åŠè¸©è¿‡çš„å‘</p></blockquote><p>æµªè´¹äº†ä¸€ä¸ªä¸‹åˆçš„æ—¶é—´ï¼Œç»ˆäºæŠŠGitlabæ­å»ºå®Œæˆï¼Œæ­å»ºç¯å¢ƒå¦‚ä¸‹ï¼š</p><ul><li><p>ç³»ç»Ÿï¼ˆè™šæ‹Ÿæœºï¼‰</p><p>  Distributor ID:    Ubuntu</p><p>  Description:    Ubuntu 18.04 LTS</p><p>  Release:    18.04</p><p>  Codename:    bionic</p></li><li><p>gitlab V11.0.1</p></li></ul><a id="more"></a><h2 id="å®‰è£…Gitlab"><a href="#å®‰è£…Gitlab" class="headerlink" title="å®‰è£…Gitlab"></a>å®‰è£…Gitlab</h2><p>è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œgitlabå®˜æ–¹æºå¤ªæ…¢äº†ï¼Œä¸€ä¸ªgitlabå®‰è£…åŒ…è¦<code>500M+</code>å¦‚æœç›´æ¥ä¸‹è½½ï¼Œå¾ˆå®¹æ˜“æŒ‚æ‰ï¼Œæˆ–è€…ç­‰å¾ˆä¹…ï¼Œæ‰€ä»¥è¿™é‡Œè¦æ›¿æ¢æºã€‚ä¸è¿‡ä¼¼ä¹åœ¨é˜¿é‡Œäº‘ä¸Šæ­è½½çš„è¯ï¼Œä¼šå¾ˆå¿«ï¼Œä¸ç”¨æ›´æ¢ã€‚</p><p>è¿™é‡Œæ¨è <a href="https://mirrors.tuna.tsinghua.edu.cn/" target="_blank" rel="noopener">æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™</a> é‡Œé¢æœ‰ä¸å°‘çš„é•œåƒæºï¼Œå…¶ä¸­å°±åŒ…æ‹¬äº†gitlabçš„ã€‚</p><p>å…·ä½“åœ°å€æ˜¯</p><pre><code>deb http://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/ubuntu bionic main</code></pre><blockquote><p>æ³¨æ„å…¶ä¸­ <code>bionic</code> æ˜¯ç³»ç»Ÿä»£å·ï¼Œæ¯”å¦‚æˆ‘çš„ubuntu 18 ä»£å·å°±æ˜¯ <code>bionic</code> å…¶ä»–çš„ç³»ç»Ÿå¯ä»¥ä½¿ç”¨ <code>lsb_relase</code> å‘½ä»¤è‡ªè¡ŒæŸ¥è¯¢ã€‚</p></blockquote><p><strong>ä½¿ç”¨æ–¹æ³•</strong> <a href="https://mirrors.tuna.tsinghua.edu.cn/help/gitlab-ce/" target="_blank" rel="noopener">å‚è€ƒ</a></p><ol><li><p>ä¿¡ä»» GitLab çš„ GPG å…¬é’¥:</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">curl https://packages.gitlab.com/gpg.key 2&gt; /dev/null | sudo apt-key add - &amp;&gt;/dev/null<br></code></pre></td></tr></table></figure></li><li><p>è®¾ç½®æº</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd /etc/apt/sources.list.d<br>vim gitlab-ce.list<br></code></pre></td></tr></table></figure></li><li><p>ç¼–è¾‘gitlab-ce.list è¾“å…¥ä»¥ä¸‹å†…å®¹</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">deb https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/ubuntu/ bionic main<br></code></pre></td></tr></table></figure></li><li><p>æ›´æ–°å¹¶å®‰è£…</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt-get update<br>sudo apt-get install gitlab-ce<br></code></pre></td></tr></table></figure></li><li><p>é…ç½®gitlab</p><p> ç”±äºgitlabè¦ç”¨åˆ°åŸŸåï¼Œæ‰€ä»¥éœ€è¦å‡†å¤‡å¥½åŸŸåã€‚ç”±äºæˆ‘æ˜¯ç”¨è™šæ‹Ÿæœºæ­å»ºï¼Œæ‰€ä»¥å…¬å…±åŸŸåç”¨ä¸äº†ï¼Œæ‰€ä»¥æˆ‘å°±è‡ªå·±æ­å»ºäº†ä¸€ä¸ªåŸŸåæœåŠ¡ã€‚å¯ä»¥å‚è€ƒå¯é€‰æ­¥éª¤ï¼Œæ­å»ºç§æœ‰DNSæœåŠ¡å™¨ã€‚</p><p> é…ç½®æ–‡ä»¶æ˜¯ <code>/etc/gitlab/gitlab.rb</code> æ–‡ä»¶ï¼Œå› ä¸ºæ–‡ä»¶å†…å®¹è¿‡å¤šï¼Œå°±ç®€å•çš„æŠŠä¼šç”¨åˆ°çš„é…ç½®åˆ—å‡ºæ¥</p><ol><li><p>åŸŸåï¼Œè¿™ä¸ªè®¾è®¡åˆ°äº†gitlabç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„é“¾æ¥ï¼Œæ‰€ä»¥å¿…é¡»ä¿®æ”¹ä¸º<strong>è‡ªå·±çš„åŸŸå</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs undefined"># external_url &apos;http://gitlab.explme.com&apos;<br>external_url &apos;http://kirno.com&apos;<br></code></pre></td></tr></table></figure></li><li><p>é…ç½®æ—¶åŒºï¼Œç”±äºé»˜è®¤æ˜¯UTCï¼Œå¯¼è‡´ä½¿ç”¨çš„æ—¶å€™æ—¶é—´ä¸æ­£ç¡®ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹ä¸ºæœ¬åœ°çš„æ—¶åŒº</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs undefined"># gitlab_rails[&apos;time_zone&apos;] = &apos;UTC&apos;<br>gitlab_rails[&apos;time_zone&apos;] = &apos;Asia/Shanghai&apos;<br></code></pre></td></tr></table></figure></li><li><p>é‚®ä»¶ï¼Œç”±äºgitlabä¼šé€šè¿‡é‚®ç®±æ‰¾å›å¯†ç æˆ–è€…è®¤è¯ï¼Œæ‰€ä»¥éœ€è¦é…ç½®ã€‚åŸæœ¬æ˜¯ä½¿ç”¨ç³»ç»Ÿè‡ªå·±çš„é‚®ä»¶ç³»ç»Ÿï¼Œä½†æ˜¯æˆ‘ä¸ä¼šé…ç½®ï¼Œæ‰€ä»¥å°±æ˜¯ç”¨äº†QQé‚®ç®±ä½œä¸ºå‘é€æ–¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs undefined">gitlab_rails[&apos;smtp_enable&apos;] = true<br>gitlab_rails[&apos;smtp_address&apos;] = &quot;smtp.qq.com&quot;<br>gitlab_rails[&apos;smtp_port&apos;] = 465<br># å‘é€æ–¹çš„é‚®ç®±å®Œæ•´åœ°å€ xx@qq.com<br>gitlab_rails[&apos;smtp_user_name&apos;] = &quot;XXX&quot;<br># è¿™é‡Œæ˜¯å‘é€æ–¹çš„QQé‚®ç®±åœ°å€ï¼Œä¹Ÿå°±æ˜¯å’Œä¸Šé¢çš„ä¸€æ ·<br>gitlab_rails[&apos;gitlab_email_from&apos;] = &apos;XXX&apos;<br># å¯†ç ï¼Œæ³¨æ„è¿™é‡Œè¦ä½¿ç”¨QQé‚®ç®±çš„ æˆæƒç  ä¸æ˜¯å¯†ç ï¼Œå¯ä»¥åœ¨è®¾ç½®ï¼Œè´¦æˆ·å¤„æ‰¾åˆ°<br>gitlab_rails[&apos;smtp_password&apos;] = &quot;xxx&quot;    <br>gitlab_rails[&apos;smtp_domain&apos;] = &quot;smtp.qq.com&quot;<br>gitlab_rails[&apos;smtp_authentication&apos;] = &quot;login&quot;<br>gitlab_rails[&apos;smtp_enable_starttls_auto&apos;] = true<br>gitlab_rails[&apos;smtp_tls&apos;] = true<br></code></pre></td></tr></table></figure></li></ol></li></ol><p>é…ç½®å®Œæˆååˆå§‹åŒ– gitlab æ—¶é—´æ¯”è¾ƒä¹…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gitlab-ctl reconfigure<br></code></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æµ‹è¯•é‚®ä»¶</p><pre><code><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># è¿›å…¥æ§åˆ¶å°</span><br>gitlab-rails console<br><span class="hljs-comment"># å‘é€é‚®ä»¶</span><br>Notify.test_email(<span class="hljs-string">"æ”¶ä»¶äººé‚®ç®±"</span>, <span class="hljs-string">"æ ‡é¢˜"</span>, <span class="hljs-string">"å†…å®¹"</span>).deliver_now<br></code></pre></td></tr></table></figure></code></pre><p>ç„¶åå°±å¯ä»¥åœ¨æµè§ˆå™¨é€šè¿‡åŸŸåè®¿é—®äº†</p><h2 id="æ±‰åŒ–æ•™ç¨‹"><a href="#æ±‰åŒ–æ•™ç¨‹" class="headerlink" title="æ±‰åŒ–æ•™ç¨‹"></a>æ±‰åŒ–æ•™ç¨‹</h2><p>é»˜è®¤çš„gitlabæ˜¯è‹±æ–‡ï¼Œå¯ä»¥é€‰æ‹©è¿›è¡Œæ±‰åŒ–ï¼Œä¸è¿‡å…¶å®æ±‰åŒ–å¹¶ä¸å®Œæ•´ã€‚</p><ol><li><p><a href="https://gitlab.com/xhang/gitlab/tags" target="_blank" rel="noopener">ä¸‹è½½æ±‰åŒ–æ–‡ä»¶</a> æ–‡ä»¶æ¯”è¾ƒå¤§åœ¨ 48m+ å·¦å³ï¼Œè€Œä¸”ä¸‹è½½æ¯”è¾ƒæ…¢ï¼Œæ‰€ä»¥å»ºè®®ä¸‹è½½å®Œæ‹‰ä¸ŠæœåŠ¡å™¨ã€‚</p><blockquote><p>ä¸€å®šè¦æ³¨æ„ç‰ˆæœ¬ï¼Œå·²å®‰è£…çš„gitlabç‰ˆæœ¬å¯ä»¥é€šè¿‡ <code>cat /opt/gitlab/embedded/service/gitlab-rails/VERSION</code> å‘½ä»¤æŸ¥çœ‹</p></blockquote></li><li><p>ä¸‹è½½å®Œä¹‹åè§£å‹ï¼Œé€šè¿‡ <code>cat gitlab/VERSION</code> æŸ¥çœ‹æ˜¯ç‰ˆæœ¬æ˜¯å¦åŒ¹é…ï¼Œå¦‚æœç‰ˆæœ¬ä¸åŒ¹é…å¯èƒ½ä¼šå¯¼è‡´gitlabå´©æºƒï¼Œæ‰€ä»¥å°å¿ƒ</p></li><li><p>åœæ­¢gitlab</p></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs undefined">gitlab-ctl stop<br></code></pre></td></tr></table></figure><ol start="3"><li>è¦†ç›– </li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">cp -rf gitlab/* /opt/gitlab/embedded/service/gitlab-rails/<br></code></pre></td></tr></table></figure><ol start="4"><li>é‡æ–°é…ç½®gitlabå¹¶å¯åŠ¨å®ƒ</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">gitlab-ctl reconfigure<br>gitlab-ctl restart<br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨ç°æœ‰çš„Nginxä½œä¸ºæœåŠ¡å™¨"><a href="#ä½¿ç”¨ç°æœ‰çš„Nginxä½œä¸ºæœåŠ¡å™¨" class="headerlink" title="ä½¿ç”¨ç°æœ‰çš„Nginxä½œä¸ºæœåŠ¡å™¨"></a>ä½¿ç”¨ç°æœ‰çš„Nginxä½œä¸ºæœåŠ¡å™¨</h2><p>è¿™ä¸ªåœ°æ–¹å·¨å‘ï¼ŒçœŸçš„æ˜¯å·¨å‘ï¼Œè¢«å¡åœ¨è¿™é‡Œå¤ªä¹…äº†ğŸ˜­ã€‚<br>é¦–å…ˆé€šè¿‡apt-getæˆ–è€…ä»å®˜ç½‘ä¸‹è½½çš„nginxï¼Œå¦‚æœæ²¡æœ‰æ³¨æ„çš„è¯éƒ½ä¸è¡Œï¼Œå› ä¸ºä»–ä»¬é»˜è®¤éƒ½ä¸æ”¯æŒ <code>Passenger</code> è¿™æ˜¯ä¸ªå·¨å‘å•Šï¼Œå¤šå°‘æ¬¡å› ä¸ºè¿™ä¸ªæ‘”é¼ æ ‡äº†ğŸ–±ï¸ã€‚è™½ç„¶ç½‘ä¸Šæœ‰æ•™ç¨‹é€šè¿‡ passenger-install-nginx-modules çš„æ–¹å¼æ¥é‡æ–°å®‰è£…nginxï¼Œä½†æ˜¯è¿™ä¸ªçš„ç¼–è¯‘è¿‡ç¨‹è´¼æ…¢ï¼Œæˆ‘çš„åŒæ ¸4gäº‘æœåŠ¡å™¨å®Œå…¨å¡æ­»åœ¨è¿™äº†ï¼Œæ‰€ä»¥ä¸æ¨èã€‚è¿˜æœ‰çš„åŠæ³•å°±æ˜¯é€šè¿‡åˆ©ç”¨ <code>nginx 1.9</code> ä»¥ä¸Šçš„ç‰ˆæœ¬çš„åŠ¨æ€æ¨¡å—åŠ è½½åŠŸèƒ½æ¥å®ç°ã€‚</p><ol><li>å®‰è£… <code>ruby</code> æ²¡åŠæ³•ï¼Œpassengerä¾èµ– <code>ruby</code></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt install ruby<br></code></pre></td></tr></table></figure><ol start="2"><li>å®‰è£… <code>passenger</code> å®‰è£…è¿™ä¸ªä¸œè¥¿æœ€å¥½æ¢æºï¼Œå¦åˆ™å·¨æ…¢</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">æ¢æº</span><br>gem sources --add https://gems.ruby-china.com/ --remove https://rubygems.org/<br><span class="hljs-meta">$</span><span class="bash"> gem sources -l</span><br>https://gems.ruby-china.com<br><span class="hljs-meta">#</span><span class="bash"> ç¡®ä¿åªæœ‰ gems.ruby-china.com</span><br><span class="hljs-meta"><br>#</span><span class="bash">å®‰è£…</span><br>gem install passenger<br></code></pre></td></tr></table></figure><ol start="3"><li>ä¸‹è½½nginxæºç ï¼Œç¼–è¯‘æ¨¡å—ï¼Œ<a href="https://www.phusionpassenger.com/library/install/nginx/install_as_nginx_module.html" target="_blank" rel="noopener">å‚è€ƒ</a></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd /path-to-nginx-source-dir<br>./configure --prefix=/opt/nginx \<br>  --add-dynamic-module=$(passenger-config --nginx-addon-dir) \<br>  --add-module=/path-to-some-other-nginx-module<br>make<br>sudo make install<br></code></pre></td></tr></table></figure><ol start="4"><li>é…ç½®ç°æœ‰çš„nginxçš„é…ç½®æ–‡ä»¶ <code>nginx.conf</code>, æ·»åŠ </li></ol><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs nginx">#user  nobody;<br>worker_processes  1;<br><br>#============é‡ç‚¹================================<br>load_module modules/ngx_http_passenger_module.so;<br>#===============================================<br><br>events &#123;<br>    worker_connections  1024;<br>&#125;<br><br><br>http &#123;<br>    include       mime.types;<br>    default_type  application/octet-stream;<br><br>    #============é‡ç‚¹===å¦‚æœå¿˜è®°passengerçš„ç›®å½•äº†ï¼Œå¯ä»¥é€šè¿‡ passenger-config --root æŒ‡ä»¤æ¥è·å–=============================<br>    passenger_root /var/lib/gems/2.3.0/gems/passenger-5.3.3;<br>    #===============================================<br><br>    sendfile        on;<br><br>    keepalive_timeout  65;<br>    ...<br></code></pre></td></tr></table></figure><ol start="5"><li>é‡ä¸­ä¹‹é‡ï¼Œè¿™é‡Œæœ€å‘ï¼Œé…ç½®äº†å¥½äº†<code>nginx</code>ä¹‹åæŠ¥äº†ä¸€ä¸ªå¥‡è‘©ğŸ¤®çš„é”™è¯¯</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs undefined">2018/07/10 10:44:19 [crit] 28138#0: *3739 connect() to unix:/tmp/passenger.uPSo3Mj/agents.s/core failed (2: No such file or directory) while connecting to upstream, client: 119.127.17.115, server: xxx, request: &quot;GET / HTTP/1.1&quot;, upstream: &quot;passenger:unix:/tmp/passenger.uPSo3Mj/agents.s/core:&quot;, host: &quot;xxx&quot;<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªåœ°æ–¹æµªè´¹äº†æˆ‘ä¸€ä¸ªä¸‹åˆåŠ åŠä¸ªæ—©ä¸ŠğŸŒï¼Œå¤šæ¬¡æƒ³æ”¾å¼ƒï¼Œç½‘ä¸Šè¿˜æ‰¾ä¸åˆ°èµ„æ–™ã€‚å…¶å®è§£å†³ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯é‡å¯nginxï¼Œä¸èƒ½ç®€å•çš„<code>nginx -s reload</code> æˆ–è€… <code>nginx -s reopen</code> çš„é‡å¯ï¼Œæ²¡æœ‰æ•ˆæœçš„ï¼Œå¿…é¡»è¦å…ˆ <code>kill</code> äº†nginxçš„è¿›ç¨‹ç„¶åå†é‡æ–°è¿è¡Œ <code>nginx</code> æ‰è¡ŒğŸ˜­ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘é‡è£…äº†gitlabï¼Œå„ç§ç™¾åº¦ï¼Œè°·æ­Œï¼Œå·®ç‚¹å°±å»çœ‹gitlabæºç äº†ğŸ˜­ã€‚æ‰‹æŠ–é‡å¯ngxinåæˆåŠŸçœ‹åˆ°<code>/tmp</code>ä¸‹åˆ›å»º<code>passenger.xxx</code>æ–‡ä»¶ï¼Œå¤ªå¼€å¿ƒäº†ã€‚ç„¶ååˆ·æ–°é¡µé¢æœç„¶æˆåŠŸ</p><ol start="6"><li>ä¸€å®šè¦è®°ä½é…ç½® <code>passenger_root /var/lib/gems/2.3.0/gems/passenger-5.3.3;</code> å¦åˆ™ä¹Ÿä¼šå‡ºç°403é”™è¯¯</li></ol><p><img src="http://oepv0v7je.bkt.clouddn.com/18-7-10/20173328.jpg" alt="æˆåŠŸå›¾"></p><h2 id="å¯é€‰-æ­å»ºç§æœ‰DNSæœåŠ¡å™¨"><a href="#å¯é€‰-æ­å»ºç§æœ‰DNSæœåŠ¡å™¨" class="headerlink" title="(å¯é€‰)æ­å»ºç§æœ‰DNSæœåŠ¡å™¨"></a>(å¯é€‰)æ­å»ºç§æœ‰DNSæœåŠ¡å™¨</h2><p>ç½‘ä¸ŠåŸºæœ¬éƒ½æ˜¯ <code>bind9</code> çš„æ•™ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿå°±ä½¿ç”¨å®ƒæ¥æ­å»ºã€‚</p><p>é¦–å…ˆå®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt-get install bind9<br></code></pre></td></tr></table></figure><p>å®‰è£…äº†ä¹‹åï¼Œæœ‰å‡ ä¸ªè·¯å¾„éœ€è¦äº†è§£</p><ul><li>/etc/bind ç”¨äºå­˜æ”¾ä¸»è¦çš„é…ç½®æ–‡ä»¶</li><li>/var/cache/bind ç”¨äºå­˜æ”¾åŸŸåç›¸å…³çš„é…ç½®æ–‡ä»¶</li></ul><p>æ¯”å¦‚æˆ‘è¦åˆ›å»ºä¸€ä¸ª <code>kirno.com</code> çš„åŸŸå</p><p>é¦–å…ˆç¼–è¾‘ <code>/etc/bind/named.conf.local</code> æ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs undefined">// è¿™é‡Œçš„ kirno.com å°±æ˜¯æƒ³è¦åˆ›å»ºçš„åŸŸå<br>zone &quot;kirno.com&quot; &#123;    <br>    type master;<br><br>    // è¿™ä¸ªå¯¹åº”ç€ /var/cache/bind é‡Œé¢çš„è§£æé…ç½®æ–‡ä»¶çš„åå­—<br>    file &quot;db.kirno.com&quot;;<br>&#125;;<br></code></pre></td></tr></table></figure><p>ç„¶åæŠŠ <code>/etc/bind</code> ç›®å½•ä¸‹çš„è§£æé…ç½®æ¨¡æ¿ <code>db.local</code> å¤åˆ¶åˆ° <code>/var/cache/bind</code> é‡Œé¢</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">cp /etc/<span class="hljs-built_in">bind</span>/db.local.com /var/cache/<span class="hljs-built_in">bind</span>/db.kirno.com<br></code></pre></td></tr></table></figure><p>ç¼–è¾‘ <code>/var/cache/bind/db.kirno.com</code> æŠŠå…¶ä¸­çš„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs undefined">@INA127.0.0.1<br></code></pre></td></tr></table></figure><p>æ”¹ä¸º</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs undefined">@INA192.168.2.100<br></code></pre></td></tr></table></figure><blockquote><p>å…¶ä¸­ <code>192.168.2.100</code> æ˜¯ä½ æƒ³è§£æçš„åŸŸåå¯¹åº”ç€çš„ip</p></blockquote><p>æœ€åç¼–è¾‘ <code>/etc/bind/named.conf.options</code> æ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs undefined">options &#123;<br>directory &quot;/var/cache/bind&quot;;<br><br>// If there is a firewall between you and nameservers you want<br>// to talk to, you may need to fix the firewall to allow multiple<br>// ports to talk.  See http://www.kb.cert.org/vuls/id/800113<br><br>// If your ISP provided one or more IP addresses for stable <br>// nameservers, you probably want to use them as forwarders.  <br>// Uncomment the following block, and insert the addresses replacing <br>// the all-0&apos;s placeholder.<br><br>forwarders &#123;<br> 223.5.5.5;<br>&#125;;<br><br>//========================================================================<br>// If BIND logs error messages about the root key being expired,<br>// you will need to update your keys.  See https://www.isc.org/bind-keys<br>//========================================================================<br>dnssec-validation auto;<br><br>auth-nxdomain no;    # conform to RFC1035<br>listen-on-v6 &#123; any; &#125;;<br>&#125;;<br></code></pre></td></tr></table></figure><blockquote><p>å…¶ä¸­ <code>223.5.5.5</code> æ˜¯é˜¿é‡Œäº‘çš„DNSï¼Œè¿™é‡Œçš„æ„æ€å…¶å®æ˜¯å¦‚æœæœ¬åœ°æ‰¾ä¸åˆ°ç›¸åº”çš„åŸŸåï¼Œå°±ä¼šäº¤ç»™ç¬¬ä¸‰æ–¹DNSæœåŠ¡å™¨å¤„ç†,æ‰€ä»¥æ”¹æˆä»»æ„çš„å¯ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åŸŸåæœåŠ¡å™¨å³å¯ã€‚</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> gitlab </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>btæœç´¢è„šæœ¬</title>
      <link href="/2018/06/19/cjxzoi3lv000ajcu9u1ib83jl/"/>
      <url>/2018/06/19/cjxzoi3lv000ajcu9u1ib83jl/</url>
      
        <content type="html"><![CDATA[<h2 id="è„šæœ¬"><a href="#è„šæœ¬" class="headerlink" title="è„šæœ¬"></a>è„šæœ¬</h2><pre><code class="javascript">javascript:pachong();<span class="function"><span class="keyword">function</span> <span class="title">pachong</span>(<span class="params"></span>) </span>{<span class="keyword">var</span> currentUrl = location.href;<span class="keyword">if</span> (currentUrl.indexOf(<span class="string">"http://sdkcloud.pro/"</span>) == <span class="number">-1</span>) {<span class="keyword">var</span> query = prompt(<span class="string">"è¯·è¾“å…¥æƒ³è¦æœç´¢çš„èµ„æºå…³é”®å­—"</span>);<span class="keyword">if</span>(query.trim()){<span class="keyword">var</span> sdkUrl = <span class="string">"http://sdkcloud.pro/xfs.php?s="</span>+query;location.href = sdkUrl;}} <span class="keyword">else</span> {addBtn();}}<span class="function"><span class="keyword">function</span> <span class="title">addBtn</span>(<span class="params"></span>)</span>{<span class="keyword">var</span> list = <span class="built_in">document</span>.querySelectorAll(<span class="string">".T1 a"</span>);list.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>{<span class="keyword">var</span> l = item.href;<span class="keyword">var</span> mag = l.substring(<span class="number">20</span>, l.length);<span class="keyword">var</span> url =  <span class="string">"https://apiv.ga/magnet/"</span>+mag;<span class="keyword">var</span> btn = <span class="string">"&lt;a style='margin-left:5px;text-decoration:none;border:1px solid #efefef;border-radius:4px;font-size:15px;padding:5px' href='"</span>+url+<span class="string">"' target='view_window'&gt;%E6%92%AD%E6%94%BE&lt;/a&gt;"</span>;item.innerHTML = item.innerHTML + btn;});}</code></pre><a id="more"></a><p>å‡†å¤‡ï¼Œ</p><p>åˆ›å»ºæ”¶è—å¤¹ï¼Œç„¶ååå­—éšä¾¿å¡«å†™ï¼Œç½‘å€å¡«å…¥ä¸Šè¿°è„šæœ¬å³å¯</p><p>chrome:</p><ol><li>æ‰“å¼€ä¹¦ç­¾ç®¡ç†å™¨ <code>alt+ctr+B</code></li><li>æ·»åŠ ç½‘å€</li><li>æŒ‰ç…§ä¸‹å›¾å¡«å†™<br><img src="http://i4.buimg.com/567571/cbc2cc2efe423ace.png" alt></li></ol><p>å…¶å®ƒæµè§ˆå™¨ç±»ä¼¼ï¼Œåæ­£å°±æ˜¯åŠ å…¥åˆ°æ”¶è—å¤¹å°±å¯ä»¥äº†</p><p>ä½¿ç”¨æ–¹æ³•</p><p>åœ¨ä»»æ„ç½‘é¡µç‚¹å‡»ï¼Œè¾“å…¥æƒ³è¦è§‚çœ‹çš„èµ„æºï¼Œä¹Ÿå¯ä»¥æ˜¯å¸®åŠ©åå’Œç¤¾ä¼šæ›´åŠ å’Œè°çš„èµ„æº</p><p><img src="http://i2.buimg.com/567571/056c5bde613f7c07.png" alt></p><p>ç„¶åä¼šè·³è½¬åˆ°èµ„æºé¡µé¢ï¼Œåœ¨èµ„æºé¡µé¢å†ç‚¹å‡»ä¸€æ¬¡</p><p><img src="http://i2.buimg.com/567571/a4b0f5a147a6c273.png" alt></p><p>ç‚¹å‡»æ’­æ”¾å³å¯</p><p><img src="http://i2.buimg.com/567571/4e3701e0b54b1d0e.png" alt></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>é€šè¿‡æºç æ¥ç¼–è¯‘nginx</title>
      <link href="/2018/06/19/cjxzoi3mm000tjcu9k1a706ym/"/>
      <url>/2018/06/19/cjxzoi3mm000tjcu9k1a706ym/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨é…ç½®å‚æ•°è¿›è¡Œç¼–è¯‘ã€‚å®ƒå®šä¹‰äº†ç³»ç»Ÿçš„å„ä¸ªæ–¹é¢,åŒ…å«äº†nginxæ‰€å…è®¸çš„é“¾æ¥æ–¹æ³•ã€‚é…ç½®åä¼šç”Ÿæˆä¸€ä¸ª <code>Makefile</code> æ–‡ä»¶. ä»¥ä¸‹æ˜¯é…ç½®æ”¯æŒçš„å‚æ•°:</p><p><code>--prefix=path</code> â€” å®šä¹‰ä¸€ä¸ªç”¨äºä¿å­˜æœåŠ¡å™¨çš„ç›®å½• This same directory will also be used for all relative paths set by configure (except for paths to libraries sources) and in the nginx.conf configuration file. It is set to the /usr/local/nginx directory by default.</p><p>â€“sbin-path=path â€” sets the name of an nginx executable file. This name is used only during installation. By default the file is named prefix/sbin/nginx.</p><p>â€“conf-path=path â€” sets the name of an nginx.conf configuration file. If needs be, nginx can always be started with a different configuration file, by specifying it in the command-line parameter -c file. By default the file is named prefix/conf/nginx.conf.<br><a id="more"></a><br>â€“pid-path=path â€” sets the name of an nginx.pid file that will store the process ID of the main process. After installation, the file name can always be changed in the nginx.conf configuration file using the pid directive. By default the file is named prefix/logs/nginx.pid.</p><p>â€“error-log-path=path â€” sets the name of the primary error, warnings, and diagnostic file. After installation, the file name can always be changed in the nginx.conf configuration file using the error_log directive. By default the file is named prefix/logs/error.log.</p><p>â€“http-log-path=path â€” sets the name of the primary request log file of the HTTP server. After installation, the file name can always be changed in the nginx.conf configuration file using the access_log directive. By default the file is named prefix/logs/access.log.</p><p>â€“build=name â€” sets an optional nginx build name.</p><p>â€“user=name â€” sets the name of an unprivileged user whose credentials will be used by worker processes. After installation, the name can always be changed in the nginx.conf configuration file using the user directive. The default user name is nobody.</p><p>â€“group=name â€” sets the name of a group whose credentials will be used by worker processes. After installation, the name can always be changed in the nginx.conf configuration file using the user directive. By default, a group name is set to the name of an unprivileged user.</p><p>â€“with-select_module<br>â€“without-select_module â€” enables or disables building a module that allows the server to work with the select() method. This module is built automatically if the platform does not appear to support more appropriate methods such as kqueue, epoll, or /dev/poll.</p><p>â€“with-poll_module<br>â€“without-poll_module â€” enables or disables building a module that allows the server to work with the poll() method. This module is built automatically if the platform does not appear to support more appropriate methods such as kqueue, epoll, or /dev/poll.</p><p>â€“without-http_gzip_module â€” disables building a module that compresses responses of an HTTP server. The zlib library is required to build and run this module.</p><p>â€“without-http_rewrite_module â€” disables building a module that allows an HTTP server to redirect requests and change URI of requests. The PCRE library is required to build and run this module.</p><p>â€“without-http_proxy_module â€” disables building an HTTP server proxying module.</p><p>â€“with-http_ssl_module â€” enables building a module that adds the HTTPS protocol support to an HTTP server. This module is not built by default. The OpenSSL library is required to build and run this module.</p><p>â€“with-pcre=path â€” sets the path to the sources of the PCRE library. The library distribution (version 4.4 â€” 8.40) needs to be downloaded from the PCRE site and extracted. The rest is done by nginxâ€™s ./configure and make. The library is required for regular expressions support in the location directive and for the ngx_http_rewrite_module module.</p><p>â€“with-pcre-jit â€” builds the PCRE library with â€œjust-in-time compilationâ€ support (1.1.12, the pcre_jit directive).</p><p>â€“with-zlib=path â€” sets the path to the sources of the zlib library. The library distribution (version 1.1.3 â€” 1.2.11) needs to be downloaded from the zlib site and extracted. The rest is done by nginxâ€™s ./configure and make. The library is required for the ngx_http_gzip_module module.</p><p>â€“with-cc-opt=parameters â€” sets additional parameters that will be added to the CFLAGS variable. When using the system PCRE library under FreeBSD, â€“with-cc-opt=â€-I /usr/local/includeâ€ should be specified. If the number of files supported by select() needs to be increased it can also be specified here such as this: â€“with-cc-opt=â€-D FD_SETSIZE=2048â€.</p><p>â€“with-ld-opt=parameters â€” sets additional parameters that will be used during linking. When using the system PCRE library under FreeBSD, â€“with-ld-opt=â€-L /usr/local/libâ€ should be specified.</p><p>Example of parameters usage (all of this needs to be typed in one line):</p><p>./configure<br>    â€“sbin-path=/usr/local/nginx/nginx<br>    â€“conf-path=/usr/local/nginx/nginx.conf<br>    â€“pid-path=/usr/local/nginx/nginx.pid<br>    â€“with-http_ssl_module<br>    â€“with-pcre=../pcre-8.40<br>    â€“with-zlib=../zlib-1.2.11<br>After configuration, nginx is compiled and installed using make.</p><p>./configure \<br>â€“prefix=/etc/nginx \<br>â€“add-dynamic-module=$(passenger-config â€“nginx-addon-dir) \<br>â€“with-openssl=/home/kirno/download/openssl-1.0.2o \<br>â€“with-pcre=/home/kirno/download/pcre-8.42 \<br>â€“with-zlib=/home/kirno/download/zlib-1.2.11 \<br>â€“with-http_ssl_module \<br>â€“with-threads \<br>â€“with-debug \<br>â€“with-http_v2_module</p>]]></content>
      
      
      
        <tags>
            
            <tag> nginx </tag>
            
            <tag> ç¼–è¯‘ </tag>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PL2303HX çš„é©±åŠ¨å®‰è£…</title>
      <link href="/2018/06/19/cjxzoi3lp0007jcu907zba8ep/"/>
      <url>/2018/06/19/cjxzoi3lp0007jcu907zba8ep/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç”±äºå®˜æ–¹ä¸å†æ”¯æŒPL2303HX,æ‰€ä»¥å°±æ²¡æœ‰äº†win10ä¸Šå¯ç”¨çš„å®˜æ–¹é©±åŠ¨.æœ‰ä¸€ä¸ªåº”è¯¥æ˜¯æ°‘é—´é«˜æ‰‹çš„äººè¡¥å……äº†è¿™ä¸ªç©ºç™½</p></blockquote><p><a href="http://www.ifamilysoftware.com/news37.html" target="_blank" rel="noopener">å®˜ç½‘ä¸‹è½½</a></p><p><a href="https://pan.baidu.com/s/1N33jAnw1XGreeLBNxHSpSA" target="_blank" rel="noopener">ç™¾åº¦å¤‡ä»½ä¸‹è½½</a> å¯†ç : t65v</p><p>ä¸‹è½½å®Œä¹‹åå®‰è£…å°±å¯ä»¥äº†</p>]]></content>
      
      
      
        <tags>
            
            <tag> å•ç‰‡æœº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>node è¿œç¨‹è°ƒè¯•</title>
      <link href="/2018/06/19/cjxzoi3mn000ujcu9y3o2mek4/"/>
      <url>/2018/06/19/cjxzoi3mn000ujcu9y3o2mek4/</url>
      
        <content type="html"><![CDATA[<ol><li><p>è¿›å…¥é¡¹ç›®æ ¹ç›®å½•ï¼Œå‡å¦‚å¯åŠ¨ä¸ªæ–‡ä»¶åœ¨ <code>./bin/www</code> è¿™é‡Œã€‚</p></li><li><p>å‘½ä»¤</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">node --inspect=0.0.0.0:3001 bin/www<br></code></pre></td></tr></table></figure><p> å…¶ä¸­ <code>0.0.0.0</code> è¡¨ç¤ºç›‘å¬çš„Ipåœ°å€ï¼Œå…¨0 è¡¨ç¤ºä»»æ„åœ°æ–¹å¯ä»¥è®¿é—®ã€‚3001 æ˜¯è®¿é—®ç«¯å£ bin/www å°±æ˜¯ç¨‹åºçš„å¯åŠ¨æ–‡ä»¶</p><a id="more"></a></li><li><p>æ‰“å¼€ Chrome è¾“å…¥åœ°å€ <code>chrome://inspect</code> </p><p> <img src="http://oepv0v7je.bkt.clouddn.com/18-3-9/66188112.jpg" alt></p><p> é€‰æ‹© <code>Configure</code> åœ¨å¼¹å‡ºæ¥çš„çª—å£è¾“å…¥ è¿œç¨‹æœåŠ¡å™¨çš„ IP å’Œ ç«¯å£ ç„¶å ç‚¹å‡» <code>Done</code> å°±å¯ä»¥äº†</p></li><li><p>ç­‰å¾…ä»¥ä¸‹å‡ºç°</p><p> <img src="http://oepv0v7je.bkt.clouddn.com/18-3-9/2925952.jpg" alt></p><p> ç‚¹å‡» <code>inspect</code> å³å¯å¼€å§‹è°ƒè¯•</p></li><li><p>è¿›å…¥ <code>source</code> ç•Œé¢å°±å¯ä»¥æ–­ç‚¹äº†</p><p> <img src="http://oepv0v7je.bkt.clouddn.com/18-3-9/2879619.jpg" alt></p></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitHubåº“æ•´ç†</title>
      <link href="/2018/06/19/cjxzoi3mk000rjcu9ksqxw501/"/>
      <url>/2018/06/19/cjxzoi3mk000rjcu9ksqxw501/</url>
      
        <content type="html"><![CDATA[<p><strong>javascript</strong></p><ol><li><p><a href="https://github.com/axios/axios" target="_blank" rel="noopener">axios</a> â­38,326</p><p>  javascriptçš„ http client åº“</p></li><li><p><a href="https://github.com/react-community/create-react-native-app" target="_blank" rel="noopener">create-react-native-app</a> â­8,843</p><p> ç®€ä»‹ï¼šè¾…åŠ©åˆ›å»º react-native ç¨‹åº</p><p> <a href="https://github.com/react-community/create-react-native-app/blob/master/react-native-scripts/template/README.md" target="_blank" rel="noopener">å¼€å‘æ–‡æ¡£</a></p><a id="more"></a></li><li><p><a href="https://github.com/facebook/create-react-app" target="_blank" rel="noopener">create-react-app</a> â­45,526</p><p> ç®€ä»‹: è¾…åŠ©åˆ›å»º react-app ç¨‹åº</p><p> <a href="https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md#advanced-configuration" target="_blank" rel="noopener">å¼€å‘æ–‡æ¡£</a></p></li><li><p><a href="https://github.com/nhnent/tui.editor" target="_blank" rel="noopener">tui.editor</a> â­5,989</p><p> ç®€ä»‹: markdownç¼–è¯‘å™¨</p><p> <a href="http://ui.toast.com/tui-editor/" target="_blank" rel="noopener">å¼€å‘æ–‡æ¡£</a></p></li></ol><p><strong>android</strong></p><ol><li><p><a href="https://github.com/square/picasso" target="_blank" rel="noopener">picasso</a> â­15,153</p><p> ç®€ä»‹: åŸºäºandroidçš„å›¾ç‰‡åŠ è½½åº“</p><p> <a href="http://square.github.io/picasso/" target="_blank" rel="noopener">å¼€å‘æ–‡æ¡£</a></p></li></ol><p><strong>python</strong></p><ol><li><p><a href="https://github.com/Prinsphield/Wechat_AutoJump" target="_blank" rel="noopener">Wechat_AutoJump</a> â­1,261</p><p> ç®€ä»‹: è·³ä¸€è·³çš„pythonç‰ˆæœ¬å¼€æŒ‚ç¨‹åºï¼Œåˆ©ç”¨äº†å›¾ç‰‡è¯†åˆ«å’Œäººå·¥aiï¼Œå€¼å¾—å­¦ä¹ </p><p> <a href="http://square.github.io/picasso/" target="_blank" rel="noopener">å¼€å‘æ–‡æ¡£</a></p></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> gitHub </tag>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åè®®</title>
      <link href="/2018/06/19/cjxzoi3ms000yjcu9x1nd6sa9/"/>
      <url>/2018/06/19/cjxzoi3ms000yjcu9x1nd6sa9/</url>
      
        <content type="html"><![CDATA[<h1 id="2018å¹´5æœˆ5æ—¥"><a href="#2018å¹´5æœˆ5æ—¥" class="headerlink" title="2018å¹´5æœˆ5æ—¥"></a>2018å¹´5æœˆ5æ—¥</h1><h3 id="æœºå°å‘é€ç»™å®¢æˆ·ç«¯"><a href="#æœºå°å‘é€ç»™å®¢æˆ·ç«¯" class="headerlink" title="æœºå°å‘é€ç»™å®¢æˆ·ç«¯"></a>æœºå°å‘é€ç»™å®¢æˆ·ç«¯</h3><table><thead><tr><th>å­—æ®µ</th><th style="text-align:center">ç±»å‹</th><th style="text-align:right">è¯´æ˜</th></tr></thead><tbody><tr><td>clientId</td><td style="text-align:center">string</td><td style="text-align:right">å”¯ä¸€è¯†åˆ«ç </td></tr><tr><td>col 2 is</td><td style="text-align:center">centered</td><td style="text-align:right">$12</td></tr><tr><td>col 3 is</td><td style="text-align:center">right-aligned</td><td style="text-align:right">$1</td></tr></tbody></table><ol><li><p>ä¸»é¢˜<code>zbc/client/death</code> æ­»äº¡ä¸»é¢˜:</p><p> æè¿°:    å½“å®¢æˆ·ç«¯æ‰çº¿çš„æ—¶å€™å‘é€</p><p> ç­‰çº§:  &gt;=1</p><p> æ•°æ®:</p></li></ol><table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>è¯´æ˜</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>clientId</td><td>string</td><td>å”¯ä¸€è¯†åˆ«ç </td><td>0201</td></tr></tbody></table><ol start="2"><li><p>ä¸»é¢˜ <code>zbc/client/login</code> è¿æ¥ä¸»é¢˜</p><p> æè¿°:    æœºå°è¿æ¥ä¸Šæ¥åå‘é€</p><p> ç­‰çº§:    &gt;=1</p><p> æ•°æ®:</p></li></ol><table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>è¯´æ˜</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>clientId</td><td>string</td><td>å”¯ä¸€è¯†åˆ«ç </td><td>0201</td></tr></tbody></table><a id="more"></a><ol start="3"><li><p>ä¸»é¢˜ <code>zbc/client/circle</code> è½¬åœˆä¸»é¢˜</p><p> æè¿°:    æ¯è½¬ä¸€åœˆå°±å‘é€ä¸€æ¬¡æ•°æ®åˆ°æœåŠ¡å™¨</p><p> ç­‰çº§:    &gt;=1</p><p> æ•°æ®:</p></li></ol><table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>è¯´æ˜</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>clientId</td><td>string</td><td>å”¯ä¸€è¯†åˆ«ç </td><td>0201</td></tr><tr><td>circle</td><td>number</td><td>è½¬æ•°</td><td>20</td></tr><tr><td>totalCircle</td><td>number</td><td>æ€»è½¬æ•°</td><td>100</td></tr><tr><td>userId</td><td>string</td><td>æ“ä½œå‘˜ID</td><td>sdfef</td></tr><tr><td>orderId</td><td>string</td><td>å½“å‰å¸ƒç¥¨ID</td><td>dfdfdsdf</td></tr><tr><td>orderNum</td><td>number</td><td>è½å¸ƒæ•°</td><td>10</td></tr></tbody></table><ol start="3"><li><p>ä¸»é¢˜ <code>zbc/client/ccd</code> æ‰«ææ¡å½¢ç æ•°æ®</p><p> æè¿°:    æœºå°æ‰«æäºŒç»´ç åå‘é€ç»™æœåŠ¡å™¨</p><p> ç­‰çº§:    &gt;=1</p><p> æ•°æ®:</p></li></ol><table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>è¯´æ˜</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>clientId</td><td>string</td><td>å”¯ä¸€è¯†åˆ«ç </td><td>0201</td></tr><tr><td>code</td><td>string</td><td>æ¡å½¢ç æ•°æ®</td><td>02215158</td></tr></tbody></table><hr><h3 id="æœåŠ¡ç«¯å‘é€ç»™æœºå°"><a href="#æœåŠ¡ç«¯å‘é€ç»™æœºå°" class="headerlink" title="æœåŠ¡ç«¯å‘é€ç»™æœºå°"></a>æœåŠ¡ç«¯å‘é€ç»™æœºå°</h3><ol><li><p>ä¸»é¢˜ <code>zbc/server/å”¯ä¸€è¯†åˆ«ç /changeUser</code> æ›´æ¢æ“ä½œå‘˜</p><p> æè¿°:    æœºå°æ›´æ¢æ“ä½œå‘˜</p><p> ç­‰çº§:    &gt;=1</p><p> æ•°æ®:</p></li></ol><table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>è¯´æ˜</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>userName</td><td>string</td><td>æ“ä½œå‘˜å§“å</td><td>å¼ ä¸‰</td></tr><tr><td>userId</td><td>string</td><td>ç”¨æˆ·ID</td><td>26d51fd5f</td></tr></tbody></table><ol><li><p>ä¸»é¢˜ <code>zbc/server/å”¯ä¸€è¯†åˆ«ç /login</code> æœºå°å†å²æ•°æ®</p><p> æè¿°:    æœºå°ç™»é™†å,æœåŠ¡å™¨å‘é€ç»™ä»–å†å²æ•°æ®,ä¹Ÿå°±æ˜¯æ–­ç½‘å‰çš„æ•°æ®</p><p> ç­‰çº§:    &gt;=1</p><p> æ•°æ®:</p></li></ol><table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>è¯´æ˜</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>clientNum</td><td>string</td><td>æœºå°å·</td><td>001</td></tr><tr><td>circle</td><td>number</td><td>è½¬æ•°</td><td>20</td></tr><tr><td>totalCircle</td><td>number</td><td>æ€»è½¬æ•°</td><td>100</td></tr><tr><td>userId</td><td>string</td><td>æ“ä½œå‘˜ID</td><td>sdfef</td></tr><tr><td>userName</td><td>string</td><td>æ“ä½œå‘˜å§“å</td><td>å¼ ä¸‰</td></tr><tr><td>orderId</td><td>string</td><td>å½“å‰å¸ƒç¥¨ID</td><td>dfdfdsdf</td></tr><tr><td>orderNum</td><td>number</td><td>è½å¸ƒæ•°</td><td>10</td></tr></tbody></table><ol><li><p>ä¸»é¢˜ <code>zbc/server/å”¯ä¸€è¯†åˆ«ç /ccd</code> å¸ƒç¥¨æ•°æ®</p><p> æè¿°:    æœºå°CCDæ‰«æå,æœåŠ¡ç«¯æŠŠå¸ƒç¥¨æ•°æ®å‘é€ç»™æœºå°</p><p> ç­‰çº§:    &gt;=1</p><p> æ•°æ®:</p></li></ol><table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>è¯´æ˜</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>orderNum</td><td>string</td><td>å¸ƒç¥¨å·</td><td>02123548</td></tr></tbody></table><ol><li><p>ä¸»é¢˜ <code>zbc/server/å”¯ä¸€è¯†åˆ«ç /init</code> æ·»åŠ æœºå°è®¾å¤‡çš„æ—¶å€™å‘é€</p><p> æè¿°:    æ·»åŠ è®¾å¤‡çš„æ—¶å€™å‘ä¸€æ¬¡ç»™å•ç‰‡æœº,è®©å•ç‰‡æœºè®°å½•</p><p> ç­‰çº§:    &gt;=1</p><p> æ•°æ®:</p></li></ol><table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>è¯´æ˜</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>clientNum</td><td>string</td><td>æœºå°å·</td><td>001</td></tr></tbody></table><ol><li><p>ä¸»é¢˜ <code>zbc/server/å”¯ä¸€è¯†åˆ«ç /error</code> é”™è¯¯ä¿¡æ¯</p><p> æè¿°:    å¦‚æœå‡ºç°é”™è¯¯,æœåŠ¡ç«¯ä¼šæŠŠé”™è¯¯å‘é€ç»™æœºå°</p><p> ç­‰çº§:    &gt;=1</p><p> æ•°æ®:</p></li></ol><table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>è¯´æ˜</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>msg</td><td>string</td><td>é”™è¯¯ä¿¡æ¯</td><td>è¯¥å‘˜å·¥å·²ç¦»èŒ</td></tr></tbody></table>]]></content>
      
      
      
        <tags>
            
            <tag> åè®® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c#è°ƒç”¨æ•°æ®åº“ä¹‹Dapper</title>
      <link href="/2018/06/19/cjxzoi3mu000zjcu9ihr07ysk/"/>
      <url>/2018/06/19/cjxzoi3mu000zjcu9ihr07ysk/</url>
      
        <content type="html"><![CDATA[<p>è¿™é‡Œè®°å½•ä¸€ä¸‹Dapperçš„ä½¿ç”¨æ–¹å¼ï¼Œè¿™ä¸ªåº“æœ‰ç‚¹åƒjavaçš„<code>mybatis</code>å¯ä»¥å¾ˆæ–¹ä¾¿çš„æŠŠæŸ¥è¯¢å‡ºæ¥çš„æ•°æ®æ˜ å°„åˆ°å¯¹è±¡ä¸Šé¢å»ã€‚</p><ol><li><p><strong>å®‰è£…</strong></p><ol><li><p>é€šè¿‡ NetGet å°±å¯ä»¥å®‰è£…äº†ï¼Œvsè‡ªå¸¦çš„ä¸€ä¸ªåŒ…ç®¡ç†å·¥å…·</p><p><img src="http://oepv0v7je.bkt.clouddn.com/18-3-6/97896696.jpg" alt></p><a id="more"></a></li></ol></li><li><strong>åˆå§‹åŒ–</strong> <ol><li>é€šè¿‡</li></ol></li></ol><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> IDbConnection <span class="hljs-title">GetConnection</span>(<span class="hljs-params"></span>)</span><br>&#123;<br>    <span class="hljs-comment">// CONN_STR è¿™ä¸ªæ˜¯é“¾æ¥å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ postgresql çš„é“¾æ¥å­—ç¬¦ä¸²æ˜¯</span><br>    <span class="hljs-comment">// private static string CONN_STR = "PORT=5432;DATABASE=test;HOST=localhost;PASSWORD=123456;USER ID=postgres";</span><br>    <span class="hljs-keyword">var</span> connection = <span class="hljs-keyword">new</span> NpgsqlConnection(CONN_STR);<br>    connection.Open();<br>    <span class="hljs-keyword">return</span> connection;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li>ä½¿ç”¨<ol><li>æŸ¥è¯¢ä¸€ä¸ª</li></ol></li></ol><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SqlHelper</span><br>   &#123;<br>       <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">string</span> CONN_STR = <span class="hljs-string">"PORT=5432;DATABASE=test;HOST=localhost;PASSWORD=123456;USER ID=postgres"</span>;<br><br><br>       <span class="hljs-function"><span class="hljs-keyword">public</span> IDbConnection <span class="hljs-title">GetConnection</span>(<span class="hljs-params"></span>)</span><br>       &#123;<br><br>           <span class="hljs-keyword">var</span> connection = <span class="hljs-keyword">new</span> NpgsqlConnection(CONN_STR);<br><br>           connection.Open();<br><br><br>           <span class="hljs-keyword">return</span> connection;<br>       &#125;<br><br>       <span class="hljs-keyword">public</span> List&lt;T&gt; All&lt;T&gt;(<span class="hljs-keyword">string</span> sql)<br>       &#123;<br>           <span class="hljs-keyword">var</span> con = GetConnection();<br>           <span class="hljs-keyword">var</span> list = con.Query&lt;T&gt;(sql).ToList();<br>           con.Close();<br>           <span class="hljs-keyword">return</span> list;<br>       &#125;<br><br>       <span class="hljs-keyword">internal</span> List&lt;T&gt; All&lt;T&gt;(<span class="hljs-keyword">string</span> sql, <span class="hljs-keyword">object</span> p)<br>       &#123;<br>           <span class="hljs-keyword">var</span> con = GetConnection();<br>           <span class="hljs-keyword">var</span> list = con.Query&lt;T&gt;(sql, p).ToList();<br>           con.Close();<br>           <span class="hljs-keyword">return</span> list;<br>       &#125;<br><br>       <span class="hljs-keyword">internal</span> T First&lt;T&gt;(<span class="hljs-keyword">string</span> sql, <span class="hljs-keyword">object</span> p)<br>       &#123;<br>           <span class="hljs-keyword">var</span> con = GetConnection();<br>           <span class="hljs-keyword">var</span> first = con.QuerySingle&lt;T&gt;(sql, p);<br>           con.Close();<br>           <span class="hljs-keyword">return</span> first;<br>       &#125;<br><br>       <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">Add</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> sql, <span class="hljs-keyword">object</span> obj</span>)</span><br>       &#123;<br>           <span class="hljs-keyword">var</span> con = GetConnection();<br>           <span class="hljs-keyword">var</span> row = con.Execute(sql, obj);<br>           con.Close();<br>           <span class="hljs-keyword">return</span> row;<br>       &#125;<br><br>       <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> <span class="hljs-title">AddAndGetId</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> sql, <span class="hljs-keyword">object</span> obj</span>)</span><br>       &#123;<br>           <span class="hljs-keyword">var</span> con = GetConnection();<br>           <span class="hljs-keyword">var</span> row = con.Execute(sql, obj);<br>           <span class="hljs-keyword">if</span> (row != <span class="hljs-number">1</span>)<br>           &#123;<br>               con.Close();<br>               <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;<br>           &#125;<br>           <span class="hljs-keyword">const</span> <span class="hljs-keyword">string</span> sql2 = <span class="hljs-string">"select last_insert_id()"</span>;<br>           <span class="hljs-keyword">var</span> re = con.Query&lt;<span class="hljs-keyword">string</span>&gt;(sql2).ToArray();<br>           con.Close();<br>           <span class="hljs-keyword">return</span> re[<span class="hljs-number">0</span>];<br>       &#125;<br><br>       <span class="hljs-function"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">int</span> <span class="hljs-title">Update</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> sql, <span class="hljs-keyword">object</span> worker</span>)</span><br>       &#123;<br>           <span class="hljs-keyword">var</span> con = GetConnection();<br>           <span class="hljs-keyword">var</span> row = con.Execute(sql, worker);<br>           con.Close();<br>           <span class="hljs-keyword">return</span> row;<br>       &#125;<br><br>       <span class="hljs-meta">#<span class="hljs-meta-keyword">region</span> å•ä¾‹æ¨¡å¼</span><br><br>       <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SqlHelper _instance;<br><br>       <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">SqlHelper</span>(<span class="hljs-params"></span>)</span><br>       &#123;<br>       &#125;<br><br>       <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SqlHelper <span class="hljs-title">GetInstance</span>(<span class="hljs-params"></span>)</span><br>       &#123;<br>           <span class="hljs-keyword">return</span> _instance ?? (_instance = <span class="hljs-keyword">new</span> SqlHelper());<br>       &#125;<br><br>       <span class="hljs-meta">#<span class="hljs-meta-keyword">endregion</span></span><br>   &#125;<br></code></pre></td></tr></table></figure><p>ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œè°ƒç”¨çš„æ—¶å€™</p><p><code>SqlHelper.getInstance().First&lt;Order&gt;(&quot;select * from order where id = @Id&quot;, new {Id = &quot;123456&quot;})</code></p><p>å…¶ä¸­ Order æ˜¯å®ä½“ç±»ï¼Œå¯¹åº”ç€æ•°æ®åº“çš„å­—æ®µã€‚</p><hr><p>ä»¥ä¸Šæ˜¯ç®€å•ç”¨æ³•ï¼Œä¸‹é¢çš„æ˜¯å¤æ‚ç”¨æ³•</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">var</span> sql = <span class="hljs-string">"select * from user left join address where userId = @UserId"</span>;<br><span class="hljs-keyword">var</span> procedureList = con.Query&lt;User, Address, User&gt;(sql,<br>(user, address) =&gt;<br>&#123;<br>    user.address = address;<br>    <span class="hljs-keyword">return</span> user;<br>&#125;, <span class="hljs-keyword">new</span> &#123;UserId = <span class="hljs-string">"123456"</span>&#125;).ToList();<br></code></pre></td></tr></table></figure><p><code>IDbConnection</code>è¿™æ˜¯ä¸€ä¸ªæ¥å£ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªQueryå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥å—å¤šä¸ªæ³›å‹ï¼Œè‡³äºå¤šå°‘ä¸ªï¼Œä¸å…³è”çš„è¡¨æœ‰å…³ï¼Œæ¯”å¦‚ ä¸€ä¸ª ç”¨æˆ·<code>User</code> æœ‰å¤šä¸ª åœ°å€<code>Address</code> ,é‚£ä¹ˆç¬¬ä¸€ä¸ªæ³›å‹å°±æ˜¯ç”¨æˆ·ï¼Œç¬¬äºŒä¸ªæ³›å‹å°±æ˜¯Addressï¼Œç¬¬ä¸‰ä¸ªå°±æ˜¯è¦è¿”å›çš„å¯¹è±¡ã€‚ç„¶åå†å®ç°å¯¹è±¡ä¹‹é—´çš„å…³ç³»ã€‚æœ€åè¿”å›çš„å¯¹è±¡å°±æ˜¯ä¸€ä¸ªå¡«å……è¿‡æ•°æ®çš„å¯¹è±¡äº†ï¼Œéå¸¸å¥½ç”¨ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> c# </tag>
            
            <tag> Dapper </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>categories</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>tags</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
