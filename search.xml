<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Mysql数据库备份</title>
      <link href="/2019/07/31/cjyqrrd3n001vk8u95gq78og3/"/>
      <url>/2019/07/31/cjyqrrd3n001vk8u95gq78og3/</url>
      
        <content type="html"><![CDATA[<p>备份数据库：</p><p>使用的工具为 <a href="https://www.percona.com/doc/percona-xtrabackup/2.4/installation/yum_repo.html" target="_blank" rel="noopener">Xtrabackup</a></p><blockquote><p><code>Xtrabackup8</code> 适用于mysql8, mysql8以下的数据库用 <code>Xtrabackup2.4</code></p></blockquote><h2 id="一、-安装"><a href="#一、-安装" class="headerlink" title="一、 安装"></a>一、 安装</h2><p>建议从系统的软件库安装，自己编译简直是自取灭亡，<a href="https://www.percona.com/doc/percona-xtrabackup/2.4/installation.html#installing-percona-xtrabackup-from-repositories" target="_blank" rel="noopener">官方安装方法</a></p><h3 id="1-CentOS"><a href="#1-CentOS" class="headerlink" title="1. CentOS"></a>1. CentOS</h3><ol><li><p>Centos6及以上系统</p><blockquote><p>Centos5不行，以下是官方给出的原因</p><p><em>RHEL</em>/<em>Centos</em> 5 doesn’t support installing the packages directly from the remote location so you’ll need to download the package first and install it manually with <strong>rpm</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">&gt; $ wget https://repo.percona.com/yum/percona-release-latest.noarch.rpm<br>&gt; $ rpm -ivH percona-release-latest.noarch.rpm<br>&gt;<br></code></pre></td></tr></table></figure></blockquote><p>安装软件源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ yum install https://repo.percona.com/yum/percona-release-latest.noarch.rpm<br></code></pre></td></tr></table></figure><p>中途的确认 y 确认就好</p></li><li><p>测试源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum list | grep percona<br></code></pre></td></tr></table></figure><p>这个命令会列出源内所有以 <code>percona</code> 开头的软件，如果其中包括了 <code>percona-xtrabackup-24</code> 就没什么问题了</p></li><li><p>安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum install percona-xtrabackup-24<br></code></pre></td></tr></table></figure><p>完成！！😊</p></li></ol><h3 id="2-Ubuntu"><a href="#2-Ubuntu" class="headerlink" title="2. Ubuntu"></a>2. Ubuntu</h3><ol><li><p>从官方获取软件源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ wget https://repo.percona.com/apt/percona-release_latest.$(lsb_release -sc)_all.deb<br></code></pre></td></tr></table></figure></li><li><p>安装下载下来的源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ sudo dpkg -i percona-release_latest.$(lsb_release -sc)_all.deb<br></code></pre></td></tr></table></figure></li><li><p>更新软件列表</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt-get update<br></code></pre></td></tr></table></figure></li><li><p>安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt-get install percona-xtrabackup-24<br></code></pre></td></tr></table></figure><p>完成</p></li></ol><h2 id="二、-备份"><a href="#二、-备份" class="headerlink" title="二、 备份"></a>二、 备份</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs undefined">innobackupex --user=root --password=123456 --compress --database=数据库名 /备份路径<br></code></pre></td></tr></table></figure><h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs undefined"># 常用参数<br>--user：该选项表示备份账号。<br>--password：该选项表示备份的密码。<br>--port：该选项表示备份数据库的端口。<br>--host：该选项表示备份数据库的地址。<br>--socket：该选项表示mysql.sock所在位置，以便备份进程登录mysql。<br>--defaults-file：该选项指定了从哪个文件读取MySQL配置，必须放在命令行第一个选项的位置。<br>--databases：该选项接受的参数为数据名，如果要指定多个数据库，彼此间需要以空格隔开；如：&quot;db1 db2&quot;，同时，在指定某数据库时，也可以只指定其中的某张表。如：&quot;mydatabase.mytable&quot;。该选项对innodb引擎表无效，还是会备份所有innodb表。此外，此选项也可以接受一个文件为参数，文件中每一行为一个要备份的对象。<br><br>#压缩参数<br>--compress：该选项表示压缩innodb数据文件的备份。<br>--compress-threads：该选项表示并行压缩worker线程的数量。<br>--compress-chunk-size：该选项表示每个压缩线程worker buffer的大小，单位是字节，默认是64K。<br><br>#加密参数<br>--encrypt：该选项表示通过ENCRYPTION_ALGORITHM的算法加密innodb数据文件的备份，目前支持的算法有ASE128,AES192,AES256。<br>--encrypt-key：该选项使用合适长度加密key，因为会记录到命令行，所以不推荐使用。<br>--encryption-key-file：该选项表示文件必须是一个简单二进制或者文本文件，加密key可通过以下命令行命令生成：openssl rand -base64 24。<br>--encrypt-threads：该选项表示并行加密的worker线程数量。<br>--encrypt-chunk-size：该选项表示每个加密线程worker buffer的大小，单位是字节，默认是64K。<br><br>#增量备份参数<br>--incremental：该选项表示创建一个增量备份，需要指定--incremental-basedir。<br>--incremental-basedir：该选项表示接受了一个字符串参数指定含有full backup的目录为增量备份的base目录，与--incremental同时使用。<br>--incremental-lsn：该选项表示指定增量备份的LSN，与--incremental选项一起使用。<br>--incremental-dir：该选项表示增量备份的目录。<br>--incremental-force-scan：该选项表示创建一份增量备份时，强制扫描所有增量备份中的数据页。<br>--incremental-history-name：该选项表示存储在PERCONA_SCHEMA.xtrabackup_history基于增量备份的历史记录的名字。Percona Xtrabackup搜索历史表查找最近（innodb_to_lsn）成功备份并且将to_lsn值作为增量备份启动出事lsn.与innobackupex--incremental-history-uuid互斥。如果没有检测到有效的lsn，xtrabackup会返回error。<br>--incremental-history-uuid：该选项表示存储在percona_schema.xtrabackup_history基于增量备份的特定历史记录的UUID。 <br><br>#主从<br>--slave-info：该选项表示对slave进行备份的时候使用，打印出master的名字和binlog pos，同样将这些信息以change master的命令写入xtrabackup_slave_info文件。可以通过基于这份备份启动一个从库。<br>--safe-slave-backup：该选项表示为保证一致性复制状态，这个选项停止SQL线程并且等到show status中的slave_open_temp_tables为0的时候开始备份，如果没有打开临时表，bakcup会立刻开始，否则SQL线程启动或者关闭知道没有打开的临时表。如果slave_open_temp_tables在--safe-slave-backup-timeount（默认300秒）秒之后不为0，从库sql线程会在备份完成的时候重启。<br><br>--include：该选项表示使用正则表达式匹配表的名字[db.tb]，要求为其指定匹配要备份的表的完整名称，即databasename.tablename。<br>--tables-file：该选项表示指定含有表列表的文件，格式为database.table，该选项直接传给--tables-file。<br>--no-timestamp：该选项可以表示不要创建一个时间戳目录来存储备份，指定到自己想要的备份文件夹。<br>--rsync：该选项表示通过rsync工具优化本地传输，当指定这个选项，innobackupex使用rsync拷贝非Innodb文件而替换cp，当有很多DB和表的时候会快很多，不能--stream一起使用。<br>--stream：该选项表示流式备份的格式，backup完成之后以指定格式到STDOUT，目前只支持tar和xbstream。<br>--ibbackup：该选项指定了使用哪个xtrabackup二进制程序。IBBACKUP-BINARY是运行percona xtrabackup的命令。这个选项适用于xtrbackup二进制不在你是搜索和工作目录，如果指定了该选项,innoabackupex自动决定用的二进制程序。<br>--kill-long-queries-timeout：该选项表示从开始执行FLUSH TABLES WITH READ LOCK到kill掉阻塞它的这些查询之间等待的秒数。默认值为0，不会kill任何查询，使用这个选项xtrabackup需要有Process和super权限。<br>--kill-long-query-type：该选项表示kill的类型，默认是all，可选select。<br>--ftwrl-wait-threshold：该选项表示检测到长查询，单位是秒，表示长查询的阈值。<br>--ftwrl-wait-query-type：该选项表示获得全局锁之前允许那种查询完成，默认是ALL，可选update。<br>--galera-info：该选项表示生成了包含创建备份时候本地节点状态的文件xtrabackup_galera_info文件，该选项只适用于备份PXC。<br>--defaults-extra-file：该选项指定了在标准defaults-file之前从哪个额外的文件读取MySQL配置，必须在命令行的第一个选项的位置。一般用于存备份用户的用户名和密码的配置文件。<br>----defaults-group：该选项表示从配置文件读取的组，innobakcupex多个实例部署时使用。<br>--no-lock：该选项表示关闭FTWRL的表锁，只有在所有表都是Innodb表并且不关心backup的binlog pos点，如果有任何DDL语句正在执行或者非InnoDB正在更新时（包括mysql库下的表），都不应该使用这个选项，后果是导致备份数据不一致，如果考虑备份因为获得锁失败，可以考虑--safe-slave-backup立刻停止复制线程。<br>--tmpdir：该选项表示指定--stream的时候，指定临时文件存在哪里，在streaming和拷贝到远程server之前，事务日志首先存在临时文件里。在 使用参数stream=tar备份的时候，你的xtrabackup_logfile可能会临时放在/tmp目录下，如果你备份的时候并发写入较大的话 xtrabackup_logfile可能会很大(5G+)，很可能会撑满你的/tmp目录，可以通过参数--tmpdir指定目录来解决这个问题。<br>--history：该选项表示percona server 的备份历史记录在percona_schema.xtrabackup_history表。   --close-files：该选项表示关闭不再访问的文件句柄，当xtrabackup打开表空间通常并不关闭文件句柄目的是正确的处理DDL操作。如果表空间数量巨大，这是一种可以关闭不再访问的文件句柄的方法。使用该选项有风险，会有产生不一致备份的可能。<br>--compact：该选项表示创建一份没有辅助索引的紧凑的备份。--throttle：该选项表示每秒IO操作的次数，只作用于bakcup阶段有效。apply-log和--copy-back不生效不要一起用。<br></code></pre></td></tr></table></figure><h2 id="三、还原"><a href="#三、还原" class="headerlink" title="三、还原"></a>三、还原</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">innobackupex --copy-back [--defaults-file=MY.CNF] [--defaults-group=GROUP-NAME] BACKUP-DIR<br></code></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs undefined">nnobackupex --copy-back [--defaults-file=MY.CNF] [--defaults-group=GROUP-NAME] BACKUP-DIR<br>innobackupex --move-back [--defaults-file=MY.CNF] [--defaults-group=GROUP-NAME] BACKUP-DIR<br><br>--copy-back：做数据恢复时将备份数据文件拷贝到MySQL服务器的datadir。<br>--move-back：这个选项与--copy-back相似，唯一的区别是它不拷贝文件，而是移动文件到目的地。这个选项移除backup文件，用时候必须小心。使用场景：没有足够的磁盘空间同事保留数据文件和Backup副本<br><br>注意：<br>    1.datadir目录必须为空。除非指定innobackupex --force-non-empty-directorires选项指定，否则--copy-backup选项不会覆盖<br>    2.在restore之前,必须shutdown MySQL实例，你不能将一个运行中的实例restore到datadir目录中<br>    3.由于文件属性会被保留，大部分情况下你需要在启动实例之前将文件的属主改为mysql，这些文件将属于创建备份的用户<br>    chown -R my5711:mysql /data1/dbrestore<br>    以上需要在用户调用Innobackupex之前完成<br>--force-non-empty-directories：指定该参数时候，使得innobackupex --copy-back或--move-back选项转移文件到非空目录，已存在的文件不会被覆盖。如果--copy-back和--move-back文件需要从备份目录拷贝一个在datadir已经存在的文件，会报错失败。<br></code></pre></td></tr></table></figure><h2 id="四、备份脚本"><a href="#四、备份脚本" class="headerlink" title="四、备份脚本"></a>四、备份脚本</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/sh</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">"开始备份"</span><br>innobackupex --user=root --password=cdkj2017 --database=common_db --compress /home/databasebackup<br><span class="hljs-built_in">echo</span> <span class="hljs-string">"备份成功"</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">"删除7天前的备份"</span><br>a=`date -d -7day +%Y-%m-%d*`<br><span class="hljs-comment"># 删除7天前的备份</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">"7天前的时间为<span class="hljs-variable">$&#123;a&#125;</span>"</span><br>rm -rf /home/databasebackup/<span class="hljs-variable">$&#123;a&#125;</span><br><span class="hljs-comment"># 发送备份成功通知</span><br>curl -d <span class="hljs-string">"text=畅点数据库备份成功通知&amp;desp=数据库名 common_db 备份成功"</span> https://sc.ftqq.com/SCU17509Te58a968e0e85f6103d14a4ad257470db5c6fce4fc5d5b.send<br></code></pre></td></tr></table></figure><h2 id="五、定时备份"><a href="#五、定时备份" class="headerlink" title="五、定时备份"></a>五、定时备份</h2><p>linux中使用 <code>crontab</code></p><ol><li><p>crontab -l 列出定时任务</p></li><li><p>crontab -e 编辑定时任务</p><p>格式大概是这样的<em> </em> <em> </em> <em> 五个</em>号代表的意思分别是分，时，日，月，周</p><p>比如每天凌晨2点执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">0 2 * * * /home/databasebackup/backup.sh<br></code></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> mysql </tag>
            
            <tag> backup </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在vscode中使用Typescript开发node</title>
      <link href="/2019/07/16/cjyqrrd1j001pk8u9t4djhccv/"/>
      <url>/2019/07/16/cjyqrrd1j001pk8u9t4djhccv/</url>
      
        <content type="html"><![CDATA[<p>使用<code>Typescript</code>开发node的话，可以使用<code>ts-node</code>库，这样就可以直接运行，不需要另外编译。</p><a id="more"></a><ol><li><p>初始化项目</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">tsc init [项目名]<br></code></pre></td></tr></table></figure></li><li><p>添加yarn管理</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">yarn init<br></code></pre></td></tr></table></figure></li><li><p>添加依赖包</p><p>| 包名                                             | 说明                                           | 安装方式 |<br>| ———————————————— | ———————————————- | ——– |<br>| <a href="https://www.npmjs.com/package/ts-node" target="_blank" rel="noopener">ts-node</a> | 用于直接运行,不需要翻译                        | -D       |<br>| typescript                                       | 不知道为啥，就算全局装了，这里不装还是会出问题 | -D       |</p></li><li><p>添加调试参数</p><p><img src="../images/vscode-node/1563249553392.png" alt="1563249553392"></p></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> node </tag>
            
            <tag> vscode </tag>
            
            <tag> typescript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo 折腾日记</title>
      <link href="/2019/07/12/cjyqrrcxy000vk8u90jyqj9fc/"/>
      <url>/2019/07/12/cjyqrrcxy000vk8u90jyqj9fc/</url>
      
        <content type="html"><![CDATA[<p>Hexo 也用了一段时间了，记录一下折腾日记</p><h2 id="hexo主题推荐之-Next"><a href="#hexo主题推荐之-Next" class="headerlink" title="hexo主题推荐之 Next"></a>hexo主题推荐之 <code>Next</code></h2><p><a href="https://theme-next.org/docs/getting-started/" target="_blank" rel="noopener">主题</a>风格挺好看的，简单明了，具体配官方比较全。</p><p><img src="https://user-images.githubusercontent.com/16272760/61057395-d2deb000-a427-11e9-8e28-f348fe181795.png" alt></p><a id="more"></a><h2 id="首页文章过滤"><a href="#首页文章过滤" class="headerlink" title="首页文章过滤"></a>首页文章过滤</h2><p>有些文章不想在首页出现，可以用 <a href="https://github.com/Jamling/hexo-generator-index2/blob/master/README_zh.md" target="_blank" rel="noopener">hexo-generator-index2</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install hexo-generator-index2<br></code></pre></td></tr></table></figure><p>来解决，使用比较简单</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-comment"># index2 generator是否包含官方的hexo-generator-index，默认true（包含）</span><br><span class="hljs-attr">index2_include_index:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># defult is true</span><br><br><span class="hljs-comment"># 配置index2 generator，可以是数组或对象</span><br><span class="hljs-attr">index2_generator:</span><br><span class="hljs-attr">  per_page:</span> <span class="hljs-number">10</span><br><span class="hljs-attr">  order_by:</span> <span class="hljs-bullet">-date</span><br><span class="hljs-attr">  include:</span><br><span class="hljs-bullet">    -</span> <span class="hljs-string">category</span> <span class="hljs-string">Web</span> <span class="hljs-comment"># 只包含Web分类下的文章</span><br><span class="hljs-attr">  exclude:</span><br><span class="hljs-bullet">    -</span> <span class="hljs-string">tag</span> <span class="hljs-string">Hexo</span> <span class="hljs-comment"># 不包含标签为Hexo的文章</span><br></code></pre></td></tr></table></figure><h2 id="live2D-看板娘"><a href="#live2D-看板娘" class="headerlink" title="live2D 看板娘"></a>live2D 看板娘</h2><p>有看板娘的感觉很好，页面不至于太单调，具体使用 <a href="https://github.com/EYHN/hexo-helper-live2d/blob/master/README.zh-CN.md" target="_blank" rel="noopener">hexo-helper-live2d</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install --save hexo-helper-live2d<br></code></pre></td></tr></table></figure><p>这个只是安装了依赖，还要安装具体的看板娘</p><p>使用 <code>npm install [看板娘的名字]</code> 名字如下：</p><ul><li><code>live2d-widget-model-chitose</code></li><li><code>live2d-widget-model-epsilon2_1</code></li><li><code>live2d-widget-model-gf</code></li><li><code>live2d-widget-model-haru/01</code> (use <code>npm install --save live2d-widget-model-haru</code>)</li><li><code>live2d-widget-model-haru/02</code> (use <code>npm install --save live2d-widget-model-haru</code>)</li><li><code>live2d-widget-model-haruto</code></li><li><code>live2d-widget-model-hibiki</code></li><li><code>live2d-widget-model-hijiki</code></li><li><code>live2d-widget-model-izumi</code></li><li><code>live2d-widget-model-koharu</code></li><li><code>live2d-widget-model-miku</code></li><li><code>live2d-widget-model-ni-j</code></li><li><code>live2d-widget-model-nico</code></li><li><code>live2d-widget-model-nietzsche</code></li><li><code>live2d-widget-model-nipsilon</code></li><li><code>live2d-widget-model-nito</code></li><li><code>live2d-widget-model-shizuku</code></li><li><code>live2d-widget-model-tororo</code></li><li><code>live2d-widget-model-tsumiki</code></li><li><code>live2d-widget-model-unitychan</code></li><li><code>live2d-widget-model-wanko</code></li><li><code>live2d-widget-model-z16</code></li></ul><p><a href="https://huaji8.top/post/live2d-plugin-2.0/" target="_blank" rel="noopener">各看板娘预览</a></p><h2 id="简单命令"><a href="#简单命令" class="headerlink" title="简单命令"></a>简单命令</h2><ol><li><p>生产网站</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">hexo g<br></code></pre></td></tr></table></figure></li></ol><ol start="2"><li><p>上传网站</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">hexo delop<br></code></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在nodejs使用mysql库中连接mysql8的问题</title>
      <link href="/2019/07/12/cjyqrrcxq000qk8u9pt0i3f71/"/>
      <url>/2019/07/12/cjyqrrcxq000qk8u9pt0i3f71/</url>
      
        <content type="html"><![CDATA[<p><img src="/images/mysql8withNodeJs/微信图片_20190712134146.png" alt></p><p>由于mysql8.0的更新，mysql的默认认证方式从 <code>mysql_native_password</code>更换为<code>caching_sha2_password</code>所以导致 <a href="https://github.com/mysqljs/mysql" target="_blank" rel="noopener">mysql</a> 库用不了，报错</p><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs undefined">(node:11152) UnhandledPromiseRejectionWarning: Error: ER_NOT_SUPPORTED_AUTH_MODE: Client does not support authentication protocol requested by server; consider upgrading MySQL client<br>    at Handshake.Sequence._packetToError (d:\workspace\gendanbao\htmlDemo\node_modules\mysql\lib\protocol\sequences\Sequence.js:47:14)<br>    at Handshake.ErrorPacket (d:\workspace\gendanbao\htmlDemo\node_modules\mysql\lib\protocol\sequences\Handshake.js:123:18)<br>    at Protocol._parsePacket (d:\workspace\gendanbao\htmlDemo\node_modules\mysql\lib\protocol\Protocol.js:291:23)<br>    at Parser._parsePacket (d:\workspace\gendanbao\htmlDemo\node_modules\mysql\lib\protocol\Parser.js:433:10)<br>    at Parser.write (d:\workspace\gendanbao\htmlDemo\node_modules\mysql\lib\protocol\Parser.js:43:10)<br>    at Protocol.write (d:\workspace\gendanbao\htmlDemo\node_modules\mysql\lib\protocol\Protocol.js:38:16)<br>    at Socket.&lt;anonymous&gt; (d:\workspace\gendanbao\htmlDemo\node_modules\mysql\lib\Connection.js:91:28)<br>    at Socket.&lt;anonymous&gt; (d:\workspace\gendanbao\htmlDemo\node_modules\mysql\lib\Connection.js:525:10)<br>    at Socket.emit (events.js:189:13)<br>    at addChunk (_stream_readable.js:284:12)<br>    --------------------<br>    at Protocol._enqueue (d:\workspace\gendanbao\htmlDemo\node_modules\mysql\lib\protocol\Protocol.js:144:48)<br>    at Protocol.handshake (d:\workspace\gendanbao\htmlDemo\node_modules\mysql\lib\protocol\Protocol.js:51:23)<br>    at PoolConnection.connect (d:\workspace\gendanbao\htmlDemo\node_modules\mysql\lib\Connection.js:119:18)<br>    at Pool.getConnection (d:\workspace\gendanbao\htmlDemo\node_modules\mysql\lib\Pool.js:48:16)<br>    at d:\workspace\gendanbao\htmlDemo\node_modules\typeorm\driver\mysql\MysqlDriver.js:764:18<br>    at new Promise (&lt;anonymous&gt;)<br>    at MysqlDriver.createPool (d:\workspace\gendanbao\htmlDemo\node_modules\typeorm\driver\mysql\MysqlDriver.js:761:16)<br>    at MysqlDriver.&lt;anonymous&gt; (d:\workspace\gendanbao\htmlDemo\node_modules\typeorm\driver\mysql\MysqlDriver.js:274:51)<br>    at step (d:\workspace\gendanbao\htmlDemo\node_modules\tslib\tslib.js:136:27)<br>    at Object.next (d:\workspace\gendanbao\htmlDemo\node_modules\tslib\tslib.js:117:57)<br>warning.js:18<br>(node:11152) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 1)<br>warning.js:18<br>(node:11152) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.<br></code></pre></td></tr></table></figure><p>截止目前(2019-07-12)为止，官方仅仅提出了修复的<a href="https://github.com/mysqljs/mysql/pull/2233" target="_blank" rel="noopener">PR</a>,但是还没有合并到项目里面去。</p><p>目前能在网上找到的解决方案有两个：</p><ol><li><p>设置数据库，使用原来的认证方式</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED WITH mysql_native_password BY &apos;your_new_password&apos;;<br></code></pre></td></tr></table></figure></li></ol><ol start="2"><li><p>使用 <code>X DevAPI</code> 库替换现在的库</p><p><code>X DevAPI</code> 是 <code>mysql</code> 官方推出的库。<a href="https://dev.mysql.com/doc/dev/connector-nodejs/8.0/" target="_blank" rel="noopener">地址</a></p></li></ol><p>参考：</p><ul><li><a href="https://stackoverflow.com/questions/50093144/mysql-8-0-client-does-not-support-authentication-protocol-requested-by-server" target="_blank" rel="noopener">https://stackoverflow.com/questions/50093144/mysql-8-0-client-does-not-support-authentication-protocol-requested-by-server</a></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> mysql </tag>
            
            <tag> node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>redux</title>
      <link href="/2019/07/04/cjyqrrcxu000tk8u9dyi0ipkp/"/>
      <url>/2019/07/04/cjyqrrcxu000tk8u9dyi0ipkp/</url>
      
        <content type="html"><![CDATA[<p> <img src="https://avatars3.githubusercontent.com/u/31783875?s=460&amp;v=4" alt="img"></p><p>从今天开始，我要坚持每天一篇文章!!!</p><h2 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h2><blockquote><p>Redux由Dan Abramov在2015年创建的科技术语。是受2014年Facebook的Flux架构以及函数式编程语言Elm启发。很快，Redux因其简单易学体积小在短时间内成为最热门的前端架构。</p></blockquote><p>以上是百科的介绍，之所以学习Redux，目的就是解决没有关系的组件之间的通信问题。</p>]]></content>
      
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> redux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>typesafe-actions-zh</title>
      <link href="/2019/07/03/cjyqrrdjg002ck8u92i3aj4nn/"/>
      <url>/2019/07/03/cjyqrrdjg002ck8u92i3aj4nn/</url>
      
        <content type="html"><![CDATA[<div align="center"><br><br># typesafe-actions<br><br>&gt; 主要是学习翻译用的，目前翻译不完整<br><br>Typesafe utilities designed to reduce types <strong>verbosity</strong><br>and <strong>complexity</strong>  in Redux Architecture.<br><br><a id="more"></a><br><br><em>This library is part of the <a href="https://github.com/piotrwitek/react-redux-typescript-guide" target="_blank" rel="noopener">React &amp; Redux TypeScript Guide</a></em> ecosystem :book:<br><br><a href="https://www.npmjs.com/package/typesafe-actions" target="_blank" rel="noopener"><img src="https://img.shields.io/npm/v/typesafe-actions.svg" alt="Latest Stable Version"></a><br><a href="https://www.npmjs.com/package/typesafe-actions" target="_blank" rel="noopener"><img src="https://img.shields.io/npm/dm/typesafe-actions.svg" alt="NPM Downloads"></a><br><a href="https://www.npmjs.com/package/typesafe-actions" target="_blank" rel="noopener"><img src="https://img.shields.io/npm/dt/typesafe-actions.svg" alt="NPM Downloads"></a><br><a href="https://www.npmjs.com/package/typesafe-actions" target="_blank" rel="noopener"><img src="https://img.shields.io/bundlephobia/minzip/typesafe-actions.svg" alt="Bundlephobia Size"></a><br><br><a href="https://semaphoreci.com/piotrekwitek/typesafe-actions" target="_blank" rel="noopener"><img src="https://semaphoreci.com/api/v1/piotrekwitek/typesafe-actions/branches/master/shields_badge.svg" alt="Build Status"></a><br><a href="https://david-dm.org/piotrwitek/typesafe-actions" target="_blank" rel="noopener"><img src="https://david-dm.org/piotrwitek/typesafe-actions/status.svg" alt="Dependencies Status"></a><br><a href="https://david-dm.org/piotrwitek/typesafe-actions?type=peer" target="_blank" rel="noopener"><img src="https://img.shields.io/npm/l/typesafe-actions.svg?style=flat" alt="License"></a><br><a href="https://spectrum.chat/typesafe-actions" target="_blank" rel="noopener"><img src="https://withspectrum.github.io/badge/badge.svg" alt="Join the community on Spectrum"></a><br><br><br><br>:star: <em>Found it useful? Want more updates?</em> <a href="https://github.com/piotrwitek/typesafe-actions/stargazers" target="_blank" rel="noopener"><strong>Show your support by giving a :star:</strong></a><br><br>:tada: <em>Now updated to support <strong>TypeScript v3.5</strong></em> :tada:<br><br><a href="https://www.buymeacoffee.com/zh9guxbA5" target="_blank" rel="noopener"><br>  <img src="https://www.buymeacoffee.com/assets/img/custom_images/orange_img.png" alt="Buy Me a Coffee"><br></a><br><a href="https://www.patreon.com/piotrekwitek" target="_blank" rel="noopener"><br>  <img src="https://c5.patreon.com/external/logo/become_a_patron_button@2x.png" alt="Become a Patron" width="160"><br></a><br><br></div><hr><p><strong>Features</strong></p><ul><li><strong>minimalistic</strong> - according to <code>size-snapshot</code> (Minified: 3.48 KB, Gzipped: 1.03 KB), check also on <a href="https://bundlephobia.com/result?p=typesafe-actions" target="_blank" rel="noopener">bundlephobia</a></li><li><strong>secure and optimized</strong> - no external dependencies, bundled in 3 different formats (<code>cjs</code>, <code>esm</code> and <code>umd</code> for browser) with separate optimized bundles for dev &amp; prod (same as <code>react</code>)</li><li><strong>focus on quality</strong> - complete test-suite for an entire API surface containing regular runtime tests and extra type-tests to guarantee <strong>type soundness</strong> and to prevent regressions in the future TypeScript versions</li><li><strong>focus on performance</strong> - integrated performance benchmarks to guarantee that the computational complexity of types are in check and there are no slow-downs when your application grow <code>npm run benchmark:XXX</code></li></ul><p><strong>Codesandbox links</strong></p><ul><li>Reference Todo-App implementation using <code>typesafe-actions</code>: <a href="https://codesandbox.io/s/github/piotrwitek/typesafe-actions/tree/master/codesandbox" target="_blank" rel="noopener">Link</a></li><li>Starter to help reproduce bug reports: <a href="https://codesandbox.io/s/github/piotrwitek/typesafe-actions/tree/master/codesandbox" target="_blank" rel="noopener">Link</a></li></ul><hr><h2 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h2><!-- START doctoc generated TOC please keep comment here to allow auto update --><!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE --><ul><li><a href="#motivation">Motivation</a></li><li><a href="#installation">Installation</a></li><li><a href="#compatibility-notes">Compatibility Notes</a></li><li><a href="#contributing-guide">Contributing Guide</a></li><li><a href="#funding">Funding</a></li><li><a href="#tutorial">Tutorial</a><ul><li><a href="#constants">Constants</a></li><li><a href="#actions">Actions</a><ul><li><a href="#1-basic-actions">1. Basic actions</a></li><li><a href="#2-fsa-compliant-actions">2. FSA compliant actions</a></li><li><a href="#3-custom-actions-non-standard-use-cases">3. Custom actions (non-standard use-cases)</a></li></ul></li><li><a href="#action-helpers">Action Helpers</a><ul><li><a href="#using-action-creators-instances-instead-of-type-constants">Using action-creators instances instead of type-constants</a></li><li><a href="#using-regular-type-constants">Using regular type-constants</a></li></ul></li><li><a href="#reducers">Reducers</a><ul><li><a href="#extending-internal-types-to-enable-type-free-syntax-with-createreducer">Extending internal types to enable type-free syntax with <code>createReducer</code></a></li><li><a href="#using-createreducer-api-with-type-free-syntax">Using createReducer API with type-free syntax</a></li><li><a href="#alternative-usage-with-regular-switch-reducer">Alternative usage with regular switch reducer</a></li></ul></li><li><a href="#async-flows">Async-Flows</a><ul><li><a href="#with-redux-observable-epics">With <code>redux-observable</code> epics</a></li><li><a href="#with-redux-saga-sagas">With <code>redux-saga</code> sagas</a></li></ul></li></ul></li><li><a href="#api-docs">API Docs</a><ul><li><a href="#action-creators-api">Action-Creators API</a><ul><li><a href="#action"><code>action</code></a></li><li><a href="#createaction"><code>createAction</code></a></li><li><a href="#createstandardaction"><code>createStandardAction</code></a></li><li><a href="#createcustomaction"><code>createCustomAction</code></a></li><li><a href="#createasyncaction"><code>createAsyncAction</code></a></li></ul></li><li><a href="#reducer-creators-api">Reducer-Creators API</a><ul><li><a href="#createreducer"><code>createReducer</code></a></li></ul></li><li><a href="#action-helpers-api">Action-Helpers API</a><ul><li><a href="#gettype"><code>getType</code></a></li><li><a href="#isactionof"><code>isActionOf</code></a></li><li><a href="#isoftype"><code>isOfType</code></a></li></ul></li><li><a href="#type-helpers-api">Type-Helpers API</a><ul><li><a href="#actiontype"><code>ActionType</code></a></li><li><a href="#statetype"><code>StateType</code></a></li></ul></li></ul></li><li><a href="#migration-guides">Migration Guides</a><ul><li><a href="#v3xx-to-v4xx"><code>v3.x.x</code> to <code>v4.x.x</code></a></li><li><a href="#v2xx-to-v3xx"><code>v2.x.x</code> to <code>v3.x.x</code></a></li><li><a href="#v1xx-to-v2xx"><code>v1.x.x</code> to <code>v2.x.x</code></a></li><li><a href="#migrating-from-redux-actions-to-typesafe-actions">Migrating from <code>redux-actions</code> to <code>typesafe-actions</code></a></li></ul></li><li><a href="#recipes">Recipes</a><ul><li><a href="#restrict-meta-type-in-action-creator">Restrict Meta type in <code>action</code> creator</a></li></ul></li><li><a href="#compare-to-others">Compare to others</a><ul><li><a href="#redux-actions"><code>redux-actions</code></a></li></ul></li><li><a href="#mit-license">MIT License</a></li></ul><!-- END doctoc generated TOC please keep comment here to allow auto update --><hr><h2 id="Motivation"><a href="#Motivation" class="headerlink" title="Motivation"></a>Motivation</h2><p>当时我准备把Redux和Typescript进行结合开发，我尝试使用<a href="https://redux-actions.js.org/" target="_blank" rel="noopener">redux-actions</a> 来减少需要维护的代码和 <strong>action-creators</strong> 模板。不幸的是，由于错误的类型以及不完整的类型接口布遍了代码，所以结果并不理想<a href="#redux-actions">(点击这里查看对照)</a>  </p><p>现存的解决方案不是太冗余就是使用 class 来解决(可读性差，而且需要new关键字😱)</p><p><strong>所以我创建了<code>typesafe-actions</code> 来解决上述的痛点</strong></p><p>核心设计方案是设计一个使用TypeScript中<strong>type-inference</strong>💪力量的API来举起“可维护的负担”的类型注释。另外，我希望使他“看起来或者感觉起来”都尽可能的接近我们所习惯的JavaScript❤️,所以我不想写太多多余的注解来给代码带来过多的噪点。</p><p><a href="#table-of-contents">⇧ back to top</a></p><hr><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">// NPM<br>npm install typesafe-actions<br><br>// YARN<br>yarn add typesafe-actions<br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">⇧ back to top</a></p><hr><h2 id="兼容性注意"><a href="#兼容性注意" class="headerlink" title="兼容性注意"></a>兼容性注意</h2><p><strong>TypeScript support</strong></p><ul><li><a href="mailto:`typesafe-actions@1.X.X" target="_blank" rel="noopener">`typesafe-actions@1.X.X</a>` - minimal TS v2.7</li><li><a href="mailto:`typesafe-actions@2.X.X" target="_blank" rel="noopener">`typesafe-actions@2.X.X</a>` - minimal TS v2.9</li><li><a href="mailto:`typesafe-actions@3.X.X" target="_blank" rel="noopener">`typesafe-actions@3.X.X</a>` - minimal TS v3.2</li><li><a href="mailto:`typesafe-actions@4.X.X" target="_blank" rel="noopener">`typesafe-actions@4.X.X</a>` - minimal TS v3.2</li></ul><p><strong>浏览器支持情况</strong></p><p>兼容所有主流浏览器。</p><p>旧的浏览器的支持情况：IE &lt;= 11 ，某些手机浏览器你需要提供下列的扩展库</p><ul><li><a href="https://developer.mozilla.org/pl/docs/Web/JavaScript/Referencje/Obiekty/Object/assign#Polyfill" target="_blank" rel="noopener">Object.assign</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes" target="_blank" rel="noopener">Array.prototype.includes</a></li></ul><p><strong>Recommended polyfill for IE</strong></p><p>To provide the best compatibility please include a popular polyfill package in your application, such as <code>core-js</code> or <code>react-app-polyfill</code> for <code>create-react-app</code>.<br>Please check the <code>React</code> guidelines to learn how to do that: <a href="https://reactjs.org/docs/javascript-environment-requirements.html" target="_blank" rel="noopener">LINK</a><br>A polyfill fo IE11 is included in our <code>/codesandbox</code> application.</p><p><a href="#table-of-contents">⇧ back to top</a></p><hr><h2 id="Contributing-Guide"><a href="#Contributing-Guide" class="headerlink" title="Contributing Guide"></a>Contributing Guide</h2><p>We are open for contributions. If you’re planning to contribute please make sure to read the contributing guide: <a href="/CONTRIBUTING.md">CONTRIBUTING.md</a></p><p><a href="#table-of-contents">⇧ back to top</a></p><hr><h2 id="Funding"><a href="#Funding" class="headerlink" title="Funding"></a>Funding</h2><p><strong>Typesafe-Actions</strong> is an independent open-source project created by people investing their free time for the benefit of our community.</p><p>If you are using <strong>Typesafe-Actions</strong> please consider donating as this will guarantee the project will be updated and maintained in the long run.</p><p>Issues can be funded by anyone interested in them being resolved. Reward will be transparently distributed to the contributor handling the task through the IssueHunt platform.</p><p><a href="https://issuehunt.io/repos/110746954" target="_blank" rel="noopener"><img src="https://issuehunt.io/static/embed/issuehunt-button-v1.svg" alt="Let&#39;s fund issues in this repository"></a></p><p><a href="#table-of-contents">⇧ back to top</a></p><hr><h2 id="Tutorial"><a href="#Tutorial" class="headerlink" title="Tutorial"></a>Tutorial</h2><p>为了展示使用了这个库<strong>type-safety</strong>后的灵活性和强大，让我们使用Redux结构来构建一个最常见的应用——经典的 todo-app 应用</p><blockquote><p><strong>注意</strong><br>请确保你以具备以下的知识点以便能顺利的完成教程: <a href="https://www.typescriptlang.org/docs/handbook/type-inference.html" target="_blank" rel="noopener">Type Inference</a>, <a href="https://github.com/Microsoft/TypeScript/wiki/What%27s-new-in-TypeScript#control-flow-based-type-analysis" target="_blank" rel="noopener">Control flow analysis</a>, <a href="https://github.com/Microsoft/TypeScript/wiki/What%27s-new-in-TypeScript#tagged-union-types" target="_blank" rel="noopener">Tagged union types</a>, <a href="https://www.typescriptlang.org/docs/handbook/generics.html" target="_blank" rel="noopener">Generics</a> and <a href="https://www.typescriptlang.org/docs/handbook/advanced-types.html" target="_blank" rel="noopener">Advanced Types</a>.</p></blockquote><p><a href="#table-of-contents">⇧ back to top</a></p><h3 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h3><blockquote><p><strong>RECOMMENDATION:</strong><br>When using <code>typesafe-actions</code> in your project you won’t need to export and reuse <strong>string constants</strong>. It’s because <strong>action-creators</strong> created by this library have static property with <strong>action type</strong> that you can easily access using <strong>actions-helpers</strong> and then use it in reducers, epics, sagas, and basically any other place. This will simplify your codebase and remove some boilerplate code associated with the usage of <strong>string constants</strong>. Check our <code>/codesandbox</code> application to learn some best-practices to create such codebase.</p></blockquote><p><strong>使用字符串常量时的Typescript局限</strong> - 当使用字符创常量作为<code>action</code>的type时, 请确保使用<strong>简单易懂的字符串常量</strong>. 限制来自原 type-system, 因为所有的动态字符创操作（比如：字符串连接，字符串模板以及作为映射的对象）会扩大这个类型成为着急类，<code>String</code>。结果就是破坏了action的上下文意思。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// Example file: './constants.ts'</span><br><br><span class="hljs-comment">// WARNING: 错误的使用方法</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ADD = prefix + <span class="hljs-string">'ADD'</span>; <span class="hljs-comment">// =&gt; string</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ADD = <span class="hljs-string">`<span class="hljs-subst">$&#123;prefix&#125;</span>/ADD`</span>; <span class="hljs-comment">// =&gt; string</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>   ADD: <span class="hljs-string">'@prefix/ADD'</span>, <span class="hljs-comment">// =&gt; string</span><br>&#125;<br><br><span class="hljs-comment">// 正确的使用方法</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ADD = <span class="hljs-string">'@prefix/ADD'</span>; <span class="hljs-comment">// =&gt; '@prefix/ADD'</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> TOGGLE = <span class="hljs-string">'@prefix/TOGGLE'</span>; <span class="hljs-comment">// =&gt; '@prefix/TOGGLE'</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> (&#123;<br>  ADD: <span class="hljs-string">'@prefix/ADD'</span>, <span class="hljs-comment">// =&gt; '@prefix/ADD'</span><br>&#125; <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>) <span class="hljs-comment">// working in TS v3.4 and above =&gt; https://github.com/Microsoft/TypeScript/pull/29510</span><br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">⇧ back to top</a></p><h3 id="Actions"><a href="#Actions" class="headerlink" title="Actions"></a>Actions</h3><p>不同的项目有不同的需求，不同的团队有不同的约定，这就是为什么我认为<code>typesafe-actions</code>设计的为什么需要设计的灵活。这里提供三种常用的不同方式让你选择，所以你可以选择最适合你团队的。</p><h4 id="1-Basic-actions"><a href="#1-Basic-actions" class="headerlink" title="1. Basic actions"></a>1. Basic actions</h4><p><code>action</code> 和 <code>createAction</code> 是两个使用预设好的属性 ({ type, payload, meta })来创建 <strong>actions</strong>的创建者. 这使他们简洁而又自以为是。</p><p>重要的属性是生成的<strong>action-creator</strong>将具有可变数量的参数并保留其语义名称（id，title，amount等）。</p><p>这两个创建者是非常像的，唯一不同的是 <code>action</code> 不能和 <code>action-helpers</code>一起使用。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; action, createAction &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> add = <span class="hljs-function">(<span class="hljs-params">title: <span class="hljs-built_in">string</span></span>) =&gt;</span> action(<span class="hljs-string">'todos/ADD'</span>, &#123; id: cuid(), title, completed: <span class="hljs-literal">false</span> &#125;);<br><span class="hljs-comment">// add: (title: string) =&gt; &#123; type: "todos/ADD"; payload: &#123; id: string, title: string, completed: boolean; &#125;; &#125;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> add = createAction(<span class="hljs-string">'todos/ADD'</span>, <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> &#123;<br>  <span class="hljs-comment">// Note: "action" callback does not need "type" parameter</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">title: <span class="hljs-built_in">string</span></span>) =&gt;</span> action(&#123; id: cuid(), title, completed: <span class="hljs-literal">false</span> &#125;);<br>&#125;);<br><span class="hljs-comment">// add: (title: string) =&gt; &#123; type: "todos/ADD"; payload: &#123; id: string, title: string, completed: boolean; &#125;; &#125;</span><br></code></pre></td></tr></table></figure><h4 id="2-FSA-compliant-actions"><a href="#2-FSA-compliant-actions" class="headerlink" title="2. FSA compliant actions"></a>2. FSA compliant actions</h4><p>This style is aligned with <a href="https://github.com/redux-utilities/flux-standard-action" target="_blank" rel="noopener">Flux Standard Action</a>, so your <strong>action</strong> object shape is constrained to <code>({ type, payload, meta, error })</code>. It is using <strong>generic type arguments</strong> for <code>meta</code> and <code>payload</code> to simplify creation of type-safe action-creators.</p><p>It is important to notice that in the resulting <strong>action-creator</strong> arguments are also constrained to the predefined: <code>(payload, meta)</code>, making it the most opinionated creator.</p><blockquote><p><strong>TIP</strong>: This creator is the most compatible with <code>redux-actions</code> in case you are migrating.</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; createStandardAction &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> toggle = createStandardAction(<span class="hljs-string">'todos/TOGGLE'</span>)&lt;<span class="hljs-built_in">string</span>&gt;();<br><span class="hljs-comment">// toggle: (payload: string) =&gt; &#123; type: "todos/TOGGLE"; payload: string; &#125;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> add = createStandardAction(<span class="hljs-string">'todos/ADD'</span>).map(<br>  <span class="hljs-function">(<span class="hljs-params">title: <span class="hljs-built_in">string</span></span>) =&gt;</span> (&#123;<br>    payload: &#123; id: cuid(), title, completed: <span class="hljs-literal">false</span> &#125;,<br>  &#125;)<br>);<br><span class="hljs-comment">// add: (payload: string) =&gt; &#123; type: "todos/ADD"; payload: &#123; id: string, title: string, completed: boolean; &#125;; &#125;</span><br></code></pre></td></tr></table></figure><h4 id="3-Custom-actions-non-standard-use-cases"><a href="#3-Custom-actions-non-standard-use-cases" class="headerlink" title="3. Custom actions (non-standard use-cases)"></a>3. Custom actions (non-standard use-cases)</h4><p>This approach will give us the most flexibility of all creators, providing a variadic number of named parameters and custom properties on <strong>action</strong> object to fit all the custom use-cases.</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; createCustomAction &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">const</span> add = createCustomAction(<span class="hljs-string">'todos/ADD'</span>, <span class="hljs-function"><span class="hljs-params">type</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">title: <span class="hljs-built_in">string</span></span>) =&gt;</span> (&#123; <span class="hljs-keyword">type</span>, id: cuid(), title, completed: <span class="hljs-literal">false</span> &#125;);<br>&#125;);<br><span class="hljs-comment">// add: (title: string) =&gt; &#123; type: "todos/ADD"; id: string; title: string; completed: boolean; &#125;</span><br></code></pre></td></tr></table></figure><blockquote><p><strong>TIP</strong>: For more examples please check the <a href="#table-of-contents">API Docs</a>.</p></blockquote><blockquote><p><strong>RECOMMENDATION</strong><br>Common approach is to create a <code>RootAction</code> in the central point of your redux store - it will represent all possible action types in your application. You can even merge it with third-party action types as shown below to make your model complete.</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// types.d.ts</span><br><span class="hljs-comment">// example of including `react-router` actions in `RootAction`</span><br><span class="hljs-keyword">import</span> &#123; RouterAction, LocationChangeAction &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-redux'</span>;<br><span class="hljs-keyword">import</span> &#123; TodosAction &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'../features/todos'</span>;<br><br><span class="hljs-keyword">type</span> ReactRouterAction = RouterAction | LocationChangeAction;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> RootAction =<br>  | ReactRouterAction<br>  | TodosAction;<br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">⇧ back to top</a></p><h3 id="Action-Helpers"><a href="#Action-Helpers" class="headerlink" title="Action Helpers"></a>Action Helpers</h3><p>现在我想展时以下<strong>action-helpers</strong>以及解释一下他的用例。我们将要实现一个没有副作用的当用户成功添加新数据时展现成功的提示。</p><p>主要注意以下，所有的这些helpers都是扮演者类型守护者，所以他们全部都是小标签组成的唯一Type(<code>RootAction</code>)来指定我们想要的action类型</p><p><strong>使用<code>action-creators</code>来替代类型常量</strong></p><p>我们可以用<strong>action-creators</strong>来替代类型常量来匹配reduces里指定的action以及epics用例。通过为包含类型字符的<strong>action-creator</strong>实例添加静态属性来使用</p><p>最常用的命令就是<code>getType</code>，他常用于常规的reducer中的switch cases:</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">switch</span> (action.type) &#123;<br>  <span class="hljs-keyword">case</span> getType(todos.add):<br>    <span class="hljs-comment">// below action type is narrowed to: &#123; type: "todos/ADD"; payload: Todo; &#125;</span><br>    <span class="hljs-keyword">return</span> [...state, action.payload];<br>  ...<br></code></pre></td></tr></table></figure><p>Then we have the <code>isActionOf</code> helper which accept <strong>action-creator</strong> as first parameter matching actions with corresponding type passed as second parameter (it’s a curried function).</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// epics.ts</span><br><span class="hljs-keyword">import</span> &#123; isActionOf &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">import</span> &#123; add &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'./actions'</span>;<br><br><span class="hljs-keyword">const</span> addTodoToast: Epic&lt;RootAction, RootAction, RootState, Services&gt; = <span class="hljs-function">(<span class="hljs-params">action$, store, &#123; toastService &#125;</span>) =&gt;</span><br>  action$.pipe(<br>    filter(isActionOf(add)),<br>    tap(<span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> &#123; <span class="hljs-comment">// here action type is narrowed to: &#123; type: "todos/ADD"; payload: Todo; &#125;</span><br>      toastService.success(...);<br>    &#125;)<br>    ...<br>    <br>  <span class="hljs-comment">// Works with multiple actions! (with type-safety up to 5)</span><br>  action$.pipe(<br>    filter(isActionOf([add, toggle])) <span class="hljs-comment">// here action type is narrowed to a smaller union:</span><br>    <span class="hljs-comment">// &#123; type: "todos/ADD"; payload: Todo; &#125; | &#123; type: "todos/TOGGLE"; payload: string; &#125;</span><br></code></pre></td></tr></table></figure><h4 id="Using-regular-type-constants"><a href="#Using-regular-type-constants" class="headerlink" title="Using regular type-constants"></a>Using regular type-constants</h4><p>Alternatively if your team prefers to use regular <strong>type-constants</strong> you can still do that.</p><p>We have an equivalent helper (<code>isOfType</code>) which accept <strong>type-constants</strong> as parameter providing the same functionality.</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// epics.ts</span><br><span class="hljs-keyword">import</span> &#123; isOfType &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">import</span> &#123; ADD &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'./constants'</span>;<br><br><span class="hljs-keyword">const</span> addTodoToast: Epic&lt;RootAction, RootAction, RootState, Services&gt; = <span class="hljs-function">(<span class="hljs-params">action$, store, &#123; toastService &#125;</span>) =&gt;</span><br>  action$.pipe(<br>    filter(isOfType(ADD)),<br>    tap(<span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> &#123; <span class="hljs-comment">// here action type is narrowed to: &#123; type: "todos/ADD"; payload: Todo; &#125;</span><br>    ...<br>    <br>  <span class="hljs-comment">// Works with multiple actions! (with type-safety up to 5)</span><br>  action$.pipe(<br>    filter(isOfType([ADD, TOGGLE])) <span class="hljs-comment">// here action type is narrowed to a smaller union:</span><br>    <span class="hljs-comment">// &#123; type: "todos/ADD"; payload: Todo; &#125; | &#123; type: "todos/TOGGLE"; payload: string; &#125;</span><br></code></pre></td></tr></table></figure><blockquote><p><strong>TIP:</strong> you can use action-helpers with other types of conditional statements.</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; isActionOf, isOfType &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">if</span> (isActionOf(actions.add, action)) &#123;<br>  <span class="hljs-comment">// here action is narrowed to: &#123; type: "todos/ADD"; payload: Todo; &#125;</span><br>&#125;<br><span class="hljs-comment">// or with type constants</span><br><span class="hljs-keyword">if</span> (isOfType(types.ADD, action)) &#123;<br>  <span class="hljs-comment">// here action is narrowed to: &#123; type: "todos/ADD"; payload: Todo; &#125;</span><br>&#125;<br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">⇧ back to top</a></p><h3 id="Reducers"><a href="#Reducers" class="headerlink" title="Reducers"></a>Reducers</h3><h4 id="Extending-internal-types-to-enable-type-free-syntax-with-createReducer"><a href="#Extending-internal-types-to-enable-type-free-syntax-with-createReducer" class="headerlink" title="Extending internal types to enable type-free syntax with createReducer"></a>Extending internal types to enable type-free syntax with <code>createReducer</code></h4><p>We can extend internal types of <code>typesafe-actions</code> module with <code>RootAction</code> definition of our application so that you don’t need to pass generic type arguments with <code>createReducer</code> API:</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// types.d.ts</span><br><span class="hljs-keyword">import</span> &#123; StateType, ActionType &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> RootAction = ActionType&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./actions'</span>).default&gt;;<br><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">module</span> 'typesafe-actions' &#123;<br>  <span class="hljs-keyword">interface</span> Types &#123;<br>    RootAction: RootAction;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// now you can use</span><br>createReducer(...)<br><span class="hljs-comment">// instead of</span><br>createReducer&lt;State, Action&gt;(...)<br></code></pre></td></tr></table></figure><h4 id="Using-createReducer-API-with-type-free-syntax"><a href="#Using-createReducer-API-with-type-free-syntax" class="headerlink" title="Using createReducer API with type-free syntax"></a>Using createReducer API with type-free syntax</h4><p>We can prevent a lot of boilerplate code and type errors using this powerfull and completely typesafe API.</p><p>Using handleAction chain API:<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// using action-creators</span><br><span class="hljs-keyword">const</span> counterReducer = createReducer(<span class="hljs-number">0</span>)<br>  <span class="hljs-comment">// state and action type is automatically inferred and return type is validated to be exact type</span><br>  .handleAction(add, <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> state + action.payload)<br>  .handleAction(add, ... <span class="hljs-comment">// &lt;= error is shown on duplicated or invalid actions</span><br>  .handleAction(increment, <span class="hljs-function">(<span class="hljs-params">state, _</span>) =&gt;</span> state + <span class="hljs-number">1</span>)<br>  .handleAction(... <span class="hljs-comment">// &lt;= error is shown when all actions are handled</span><br>  <br>  <span class="hljs-comment">// or handle multiple actions using array</span><br>  .handleAction([add, increment], <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span><br>    state + (action.type === <span class="hljs-string">'ADD'</span> ? action.payload : <span class="hljs-number">1</span>)<br>  );<br><br><span class="hljs-comment">// all the same scenarios are working when using type-constants</span><br><span class="hljs-keyword">const</span> counterReducer = createReducer(<span class="hljs-number">0</span>)<br>  .handleAction(<span class="hljs-string">'ADD'</span>, <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> state + action.payload)<br>  .handleAction(<span class="hljs-string">'INCREMENT'</span>, <span class="hljs-function">(<span class="hljs-params">state, _</span>) =&gt;</span> state + <span class="hljs-number">1</span>);<br>  <br>counterReducer(<span class="hljs-number">0</span>, add(<span class="hljs-number">4</span>)); <span class="hljs-comment">// =&gt; 4</span><br>counterReducer(<span class="hljs-number">0</span>, increment()); <span class="hljs-comment">// =&gt; 1</span><br></code></pre></td></tr></table></figure></p><h4 id="Alternative-usage-with-regular-switch-reducer"><a href="#Alternative-usage-with-regular-switch-reducer" class="headerlink" title="Alternative usage with regular switch reducer"></a>Alternative usage with regular switch reducer</h4><p>First we need to start by generating a <strong>tagged union type</strong> of actions (<code>TodosAction</code>). It’s very easy to do by using <code>ActionType</code> <strong>type-helper</strong>.</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; ActionType &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> todos <span class="hljs-keyword">from</span> <span class="hljs-string">'./actions'</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> TodosAction = ActionType&lt;<span class="hljs-keyword">typeof</span> todos&gt;;<br></code></pre></td></tr></table></figure><p>Now we define a regular reducer function by annotating <code>state</code> and <code>action</code> arguments with their respective types (<code>TodosAction</code> for action type).</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> (state: Todo[] = [], action: TodosAction) =&gt; &#123;<br></code></pre></td></tr></table></figure><p>Now in the switch cases we can use the <code>type</code> property of action to narrowing the union type of <code>TodosAction</code> to an action that is corresponding to that type.</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">switch</span> (action.type) &#123;<br>  <span class="hljs-keyword">case</span> getType(add):<br>    <span class="hljs-comment">// below action type is narrowed to: &#123; type: "todos/ADD"; payload: Todo; &#125;</span><br>    <span class="hljs-keyword">return</span> [...state, action.payload];<br>  ...<br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">⇧ back to top</a></p><h3 id="Async-Flows"><a href="#Async-Flows" class="headerlink" title="Async-Flows"></a>Async-Flows</h3><h4 id="With-redux-observable-epics"><a href="#With-redux-observable-epics" class="headerlink" title="With redux-observable epics"></a>With <code>redux-observable</code> epics</h4><p>To handle an async-flow of http request lets implement an <code>epic</code>. The <code>epic</code> will call a remote API using an injected <code>todosApi</code> client, which will return a Promise that we’ll need to handle by using three different actions that correspond to triggering, success and failure.</p><p>To help us simplify the creation process of necessary action-creators, we’ll use <code>createAsyncAction</code> function providing us with a nice common interface object <code>{ request: ... , success: ... , failure: ... }</code> that will nicely fit with the functional API of <code>RxJS</code>.<br>This will mitigate <strong>redux verbosity</strong> and greatly reduce the maintenance cost of type annotations for <strong>actions</strong> and <strong>action-creators</strong> that would otherwise be written explicitly.</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// actions.ts</span><br><span class="hljs-keyword">import</span> &#123; createAsyncAction &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">const</span> fetchTodosAsync = createAsyncAction(<br>  <span class="hljs-string">'FETCH_TODOS_REQUEST'</span>,<br>  <span class="hljs-string">'FETCH_TODOS_SUCCESS'</span>,<br>  <span class="hljs-string">'FETCH_TODOS_FAILURE'</span>,<br>  <span class="hljs-string">'FETCH_TODOS_CANCEL'</span><br>)&lt;<span class="hljs-built_in">string</span>, Todo[], <span class="hljs-built_in">Error</span>, <span class="hljs-built_in">string</span>&gt;();<br><br><span class="hljs-comment">// epics.ts</span><br><span class="hljs-keyword">import</span> &#123; fetchTodosAsync &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'./actions'</span>;<br><br><span class="hljs-keyword">const</span> fetchTodosFlow: Epic&lt;RootAction, RootAction, RootState, Services&gt; = <span class="hljs-function">(<span class="hljs-params">action$, store, &#123; todosApi &#125;</span>) =&gt;</span><br>  action$.pipe(<br>    filter(isActionOf(fetchTodosAsync.request)),<br>    switchMap(<span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span><br>      <span class="hljs-keyword">from</span>(todosApi.getAll(action.payload)).pipe(<br>        map(fetchTodosAsync.success),<br>        catchError(pipe(fetchTodosAsync.failure, of)),<br>        takeUntil(action$.pipe(filter(isActionOf(fetchTodosAsync.cancel)))),<br>      )<br>    );<br></code></pre></td></tr></table></figure><h4 id="With-redux-saga-sagas"><a href="#With-redux-saga-sagas" class="headerlink" title="With redux-saga sagas"></a>With <code>redux-saga</code> sagas</h4><p>With sagas it’s not possible to achieve the same degree of type-safety as with epics because of limitations coming from <code>redux-saga</code> API design.</p><p>Typescript issues:</p><ul><li><a href="https://github.com/Microsoft/TypeScript/issues/2983" target="_blank" rel="noopener">Typescript does not currently infer types resulting from a <code>yield</code> statement</a> so you have to manually assert the type  e.g. <code>const response: Todo[] = yield call(...</code></li></ul><p><em>Here is the latest recommendation although it’s not fully optimal. If you managed to cook something better, please open an issue to share your finding with us.</em></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; createAsyncAction &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">const</span> fetchTodosAsync = createAsyncAction(<br>  <span class="hljs-string">'FETCH_TODOS_REQUEST'</span>,<br>  <span class="hljs-string">'FETCH_TODOS_SUCCESS'</span>,<br>  <span class="hljs-string">'FETCH_TODOS_FAILURE'</span><br>)&lt;<span class="hljs-built_in">string</span>, Todo[], <span class="hljs-built_in">Error</span>&gt;();<br><br><span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">addTodoSaga</span>(<span class="hljs-params">action: ReturnType&lt;<span class="hljs-keyword">typeof</span> fetchTodosAsync.request&gt;</span>): <span class="hljs-title">Generator</span> </span>&#123;<br>    <span class="hljs-keyword">const</span> response: Todo[] = <span class="hljs-keyword">yield</span> call(todosApi.getAll, action.payload);<br><br>    <span class="hljs-keyword">yield</span> put(fetchTodosAsync.success(response));<br>  &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>    <span class="hljs-keyword">yield</span> put(fetchTodosAsync.failure(err));<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">⇧ back to top</a></p><hr><h2 id="API-Docs"><a href="#API-Docs" class="headerlink" title="API Docs"></a>API Docs</h2><h3 id="Action-Creators-API"><a href="#Action-Creators-API" class="headerlink" title="Action-Creators API"></a>Action-Creators API</h3><h4 id="action"><a href="#action" class="headerlink" title="action"></a><code>action</code></h4><p><em>Simple <strong>action factory function</strong> to simplify creation of type-safe actions.</em></p><blockquote><p><strong>WARNING</strong>:<br>This approach will <strong>NOT WORK</strong> with <strong>action-helpers</strong> (such as <code>getType</code> and <code>isActionOf</code>) because it is creating <strong>action objects</strong> while all the other creator functions are returning <strong>enhanced action-creators</strong>.</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ts">action(<span class="hljs-keyword">type</span>, payload?, meta?, error?)<br></code></pre></td></tr></table></figure><p>Examples:<br><a href="src/action.spec.ts">&gt; Advanced Usage Examples</a></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> increment = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> action(<span class="hljs-string">'INCREMENT'</span>);<br><span class="hljs-comment">// &#123; type: 'INCREMENT'; &#125;</span><br><br><span class="hljs-keyword">const</span> createUser = <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">number</span>, name: <span class="hljs-built_in">string</span></span>) =&gt;</span><br>  action(<span class="hljs-string">'CREATE_USER'</span>, &#123; id, name &#125;);<br><span class="hljs-comment">// &#123; type: 'CREATE_USER'; payload: &#123; id: number; name: string &#125;; &#125;</span><br><br><span class="hljs-keyword">const</span> getUsers = <span class="hljs-function">(<span class="hljs-params">params?: <span class="hljs-built_in">string</span></span>) =&gt;</span><br>  action(<span class="hljs-string">'GET_USERS'</span>, <span class="hljs-literal">undefined</span>, params);<br><span class="hljs-comment">// &#123; type: 'GET_USERS'; meta: string | undefined; &#125;</span><br></code></pre></td></tr></table></figure><blockquote><p><strong>TIP</strong>: Starting from TypeScript v3.4 you can achieve similar results using new <code>as const</code> operator.</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> increment = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (&#123; <span class="hljs-keyword">type</span>: <span class="hljs-string">'INCREMENT'</span> &#125; <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>);<br></code></pre></td></tr></table></figure><h4 id="createAction"><a href="#createAction" class="headerlink" title="createAction"></a><code>createAction</code></h4><p><em>Create an enhanced action-creator with unlimited number of arguments.</em></p><ul><li>Resulting action-creator will preserve semantic names of their arguments  <code>(id, title, amount, etc...)</code>.</li><li>Returned action object have predefined properties <code>({ type, payload, meta })</code></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ts">createAction(<span class="hljs-keyword">type</span>)<br>createAction(<span class="hljs-keyword">type</span>, <span class="hljs-function"><span class="hljs-params">actionCallback</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">namedArg1, namedArg2, ...namedArgN</span>) =&gt;</span> actionCallback(payload?, meta?)<br>&#125;)<br></code></pre></td></tr></table></figure><blockquote><p><strong>TIP</strong>: Injected <code>actionCallback</code> argument is similar to <code>action</code> API but doesn’t need the “type” parameter</p></blockquote><p>Examples:<br><a href="src/create-action.spec.ts">&gt; Advanced Usage Examples</a></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; createAction &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-comment">// - with type only</span><br><span class="hljs-keyword">const</span> increment = createAction(<span class="hljs-string">'INCREMENT'</span>);<br>dispatch(increment());<br><span class="hljs-comment">// &#123; type: 'INCREMENT' &#125;;</span><br><br><span class="hljs-comment">// - with type and payload</span><br><span class="hljs-keyword">const</span> add = createAction(<span class="hljs-string">'ADD'</span>, <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">amount: <span class="hljs-built_in">number</span></span>) =&gt;</span> action(amount);<br>&#125;);<br>dispatch(add(<span class="hljs-number">10</span>));<br><span class="hljs-comment">// &#123; type: 'ADD', payload: number &#125;</span><br><br><span class="hljs-comment">// - with type and meta</span><br><span class="hljs-keyword">const</span> getTodos = createAction(<span class="hljs-string">'GET_TODOS'</span>, <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">params: Params</span>) =&gt;</span> action(<span class="hljs-literal">undefined</span>, params);<br>&#125;);<br>dispatch(getTodos(<span class="hljs-string">'some_meta'</span>));<br><span class="hljs-comment">// &#123; type: 'GET_TODOS', meta: Params &#125;</span><br><br><span class="hljs-comment">// - and finally with type, payload and meta</span><br><span class="hljs-keyword">const</span> getTodo = createAction(<span class="hljs-string">'GET_TODO'</span>, <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span>, meta: <span class="hljs-built_in">string</span></span>) =&gt;</span> action(id, meta);<br>&#125;);<br>dispatch(getTodo(<span class="hljs-string">'some_id'</span>, <span class="hljs-string">'some_meta'</span>));<br><span class="hljs-comment">// &#123; type: 'GET_TODO', payload: string, meta: string &#125;</span><br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">⇧ back to top</a></p><h4 id="createStandardAction"><a href="#createStandardAction" class="headerlink" title="createStandardAction"></a><code>createStandardAction</code></h4><p><em>Create an enhanced action-creator compatible with <a href="https://github.com/redux-utilities/flux-standard-action" target="_blank" rel="noopener">Flux Standard Action</a> to reduce boilerplate and enforce convention.</em></p><ul><li>Resulting action-creator have predefined arguments <code>(payload, meta)</code></li><li>Returned action object have predefined properties <code>({ type, payload, meta, error })</code></li><li>But it also contains a <code>.map()</code> method that allow to map <code>(payload, meta)</code> arguments to a custom action object <code>({ customProp1, customProp2, ...customPropN })</code></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ts">createStandardAction(<span class="hljs-keyword">type</span>)()<br>createStandardAction(<span class="hljs-keyword">type</span>)&lt;TPayload, TMeta?&gt;()<br>createStandardAction(<span class="hljs-keyword">type</span>).map(<span class="hljs-function">(<span class="hljs-params">payload, meta</span>) =&gt;</span> (&#123; customProp1, customProp2, ...customPropN &#125;))<br></code></pre></td></tr></table></figure><blockquote><p><strong>TIP</strong>: Using <code>undefined</code> as generic type parameter you can make the action-creator function require NO parameters.</p></blockquote><p>Examples:<br><a href="src/create-standard-action.spec.ts">&gt; Advanced Usage Examples</a></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; createStandardAction &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-comment">// Very concise with use of generic type arguments</span><br><span class="hljs-comment">// - with type only</span><br><span class="hljs-keyword">const</span> increment = createStandardAction(<span class="hljs-string">'INCREMENT'</span>)();<br><span class="hljs-keyword">const</span> increment = createStandardAction(<span class="hljs-string">'INCREMENT'</span>)&lt;<span class="hljs-literal">undefined</span>&gt;();<br>increment(); <span class="hljs-comment">// &#123; type: 'INCREMENT' &#125; (no parameters are required)</span><br><br><br><span class="hljs-comment">// - with type and payload</span><br><span class="hljs-keyword">const</span> add = createStandardAction(<span class="hljs-string">'ADD'</span>)&lt;<span class="hljs-built_in">number</span>&gt;();<br>add(<span class="hljs-number">10</span>); <span class="hljs-comment">// &#123; type: 'ADD', payload: number &#125;</span><br><br><span class="hljs-comment">// - with type and meta</span><br><span class="hljs-keyword">const</span> getData = createStandardAction(<span class="hljs-string">'GET_DATA'</span>)&lt;<span class="hljs-literal">undefined</span>, <span class="hljs-built_in">string</span>&gt;();<br>getData(<span class="hljs-literal">undefined</span>, <span class="hljs-string">'meta'</span>); <span class="hljs-comment">// &#123; type: 'GET_DATA', meta: string &#125;</span><br><br><span class="hljs-comment">// - and finally with type, payload and meta</span><br><span class="hljs-keyword">const</span> getData = createStandardAction(<span class="hljs-string">'GET_DATA'</span>)&lt;<span class="hljs-built_in">number</span>, <span class="hljs-built_in">string</span>&gt;();<br>getData(<span class="hljs-number">1</span>, <span class="hljs-string">'meta'</span>); <span class="hljs-comment">// &#123; type: 'GET_DATA', payload: number, meta: string &#125;</span><br><br><span class="hljs-comment">// Can map payload and meta arguments to a custom action object</span><br><span class="hljs-keyword">const</span> notify = createStandardAction(<span class="hljs-string">'NOTIFY'</span>).map(<br>  <span class="hljs-function">(<span class="hljs-params">payload: <span class="hljs-built_in">string</span>, meta: Meta</span>) =&gt;</span> (&#123;<br>    <span class="hljs-keyword">from</span>: meta.username,<br>    message: <span class="hljs-string">`<span class="hljs-subst">$&#123;username&#125;</span>: <span class="hljs-subst">$&#123;payload&#125;</span>`</span>,<br>    messageType: meta.type,<br>    datetime: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(),<br>  &#125;)<br>);<br><br>dispatch(notify(<span class="hljs-string">'Hello!'</span>, &#123; username: <span class="hljs-string">'Piotr'</span>, <span class="hljs-keyword">type</span>: <span class="hljs-string">'announcement'</span> &#125;));<br><span class="hljs-comment">// &#123; type: 'NOTIFY', from: string, message: string, messageType: MessageType, datetime: Date &#125;</span><br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">⇧ back to top</a></p><h4 id="createCustomAction"><a href="#createCustomAction" class="headerlink" title="createCustomAction"></a><code>createCustomAction</code></h4><p><em>Create an enhanced action-creator with unlimited number of arguments and custom properties on action object.</em></p><ul><li>Resulting action-creator will preserve semantic names of their arguments  <code>(id, title, amount, etc...)</code>.</li><li>Returned action object have custom properties <code>({ type, customProp1, customProp2, ...customPropN })</code></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ts">createCustomAction(<span class="hljs-keyword">type</span>, <span class="hljs-function"><span class="hljs-params">type</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">namedArg1, namedArg2, ...namedArgN</span>) =&gt;</span> (&#123; <span class="hljs-keyword">type</span>, customProp1, customProp2, ...customPropN &#125;)<br>&#125;)<br></code></pre></td></tr></table></figure><p>Examples:<br><a href="src/create-action-with-type.spec.ts">&gt; Advanced Usage Examples</a></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; createCustomAction &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">const</span> add = createCustomAction(<span class="hljs-string">'CUSTOM'</span>, <span class="hljs-function"><span class="hljs-params">type</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">first: <span class="hljs-built_in">number</span>, second: <span class="hljs-built_in">number</span></span>) =&gt;</span> (&#123; <span class="hljs-keyword">type</span>, customProp1: first, customProp2: second &#125;);<br>&#125;);<br><br>dispatch(add(<span class="hljs-number">1</span>));<br><span class="hljs-comment">// &#123; type: "CUSTOM"; customProp1: number; customProp2: number; &#125;</span><br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">⇧ back to top</a></p><h4 id="createAsyncAction"><a href="#createAsyncAction" class="headerlink" title="createAsyncAction"></a><code>createAsyncAction</code></h4><p><em>Create an object containing three enhanced action-creators to simplify handling of async flows (e.g. network request - request/success/failure).</em></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ts">createAsyncAction(<br>  requestType, successType, failureType, cancelType?<br>)&lt;TRequestPayload, TSuccessPayload, TFailurePayload, TCancelPayload?&gt;()<br></code></pre></td></tr></table></figure><h5 id="AsyncActionCreator"><a href="#AsyncActionCreator" class="headerlink" title="AsyncActionCreator"></a><code>AsyncActionCreator</code></h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> AsyncActionCreator&lt;<br>  [TRequestType, TRequestPayload],<br>  [TSuccessType, TSuccessPayload],<br>  [TFailureType, TFailurePayload],<br>  [TCancelType, TCancelPayload]?<br>&gt; = &#123;<br>  request: StandardActionCreator&lt;TRequestType, TRequestPayload&gt;,<br>  success: StandardActionCreator&lt;TSuccessType, TSuccessPayload&gt;,<br>  failure: StandardActionCreator&lt;TFailureType, TFailurePayload&gt;,<br>  cancel?: StandardActionCreator&lt;TCancelType, TCancelPayload&gt;,<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p><strong>TIP</strong>: Using <code>undefined</code> as generic type parameter you can make the action-creator function require NO parameters.</p></blockquote><p>Examples:<br><a href="src/create-async-action.spec.ts">&gt; Advanced Usage Examples</a></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; createAsyncAction, AsyncActionCreator &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">const</span> fetchUsersAsync = createAsyncAction(<br>  <span class="hljs-string">'FETCH_USERS_REQUEST'</span>,<br>  <span class="hljs-string">'FETCH_USERS_SUCCESS'</span>,<br>  <span class="hljs-string">'FETCH_USERS_FAILURE'</span><br>)&lt;<span class="hljs-built_in">string</span>, User[], <span class="hljs-built_in">Error</span>&gt;();<br><br>dispatch(fetchUsersAsync.request(params));<br><br>dispatch(fetchUsersAsync.success(response));<br><br>dispatch(fetchUsersAsync.failure(err));<br><br><span class="hljs-keyword">const</span> fn = (<br>  a: AsyncActionCreator&lt;<br>    [<span class="hljs-string">'FETCH_USERS_REQUEST'</span>, <span class="hljs-built_in">string</span>],<br>    [<span class="hljs-string">'FETCH_USERS_SUCCESS'</span>, User[]],<br>    [<span class="hljs-string">'FETCH_USERS_FAILURE'</span>, <span class="hljs-built_in">Error</span>]<br>  &gt;<br>) =&gt; a;<br>fn(fetchUsersAsync);<br><br><span class="hljs-comment">// There is 4th optional argument to declare cancel action</span><br><span class="hljs-keyword">const</span> fetchUsersAsync = createAsyncAction(<br>  <span class="hljs-string">'FETCH_USERS_REQUEST'</span>,<br>  <span class="hljs-string">'FETCH_USERS_SUCCESS'</span>,<br>  <span class="hljs-string">'FETCH_USERS_FAILURE'</span><br>  <span class="hljs-string">'FETCH_USERS_CANCEL'</span><br>)&lt;<span class="hljs-built_in">string</span>, User[], <span class="hljs-built_in">Error</span>, <span class="hljs-built_in">string</span>&gt;();<br><br>dispatch(fetchUsersAsync.cancel(<span class="hljs-string">'reason'</span>));<br><br><span class="hljs-keyword">const</span> fn = (<br>  a: AsyncActionCreator&lt;<br>    [<span class="hljs-string">'FETCH_USERS_REQUEST'</span>, <span class="hljs-built_in">string</span>],<br>    [<span class="hljs-string">'FETCH_USERS_SUCCESS'</span>, User[]],<br>    [<span class="hljs-string">'FETCH_USERS_FAILURE'</span>, <span class="hljs-built_in">Error</span>],<br>    [<span class="hljs-string">'FETCH_USERS_CANCEL'</span>, <span class="hljs-built_in">string</span>]<br>  &gt;<br>) =&gt; a;<br>fn(fetchUsersAsync);<br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">⇧ back to top</a></p><hr><h3 id="Reducer-Creators-API"><a href="#Reducer-Creators-API" class="headerlink" title="Reducer-Creators API"></a>Reducer-Creators API</h3><h4 id="createReducer"><a href="#createReducer" class="headerlink" title="createReducer"></a><code>createReducer</code></h4><p><em>Create a typesafe reducer</em></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ts">createReducer&lt;TState, TRootAction&gt;(initialState, handlersMap?)<br>  .handleAction(<span class="hljs-keyword">type</span>, reducer)<br>  .handleAction([type1, type2, ...typeN], reducer)<br>  .handleAction(actionCreator, reducer)<br>  .handleAction([actionCreator1, actionCreator2, ...actionCreatorN], reducer)<br></code></pre></td></tr></table></figure><p>Examples:<br><a href="src/create-reducer.spec.ts">&gt; Advanced Usage Examples</a></p><blockquote><p><strong>TIP:</strong> You can use reducer API with a <strong>type-free</strong> syntax by <a href="#extending-internal-types-to-enable-type-free-syntax-with-createreducer">Extending internal types</a>, otherwise you’ll have to pass generic type arguments like in below examples<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// type-free syntax doesn't require generic type arguments</span><br><span class="hljs-keyword">const</span> counterReducer = createReducer(<span class="hljs-number">0</span>, &#123; <br>  ADD: <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> state + action.payload,<br>  [getType(increment)]: <span class="hljs-function">(<span class="hljs-params">state, _</span>) =&gt;</span> state + <span class="hljs-number">1</span>,<br>&#125;)<br></code></pre></td></tr></table></figure></p></blockquote><p>Using type-constants as keys in the object map:<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; createReducer, getType &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span><br><br><span class="hljs-keyword">type</span> State = <span class="hljs-built_in">number</span>;<br><span class="hljs-keyword">type</span> Action = &#123; <span class="hljs-keyword">type</span>: <span class="hljs-string">'ADD'</span>, payload: <span class="hljs-built_in">number</span> &#125; | &#123; <span class="hljs-keyword">type</span>: <span class="hljs-string">'INCREMENT'</span> &#125;;<br><br><span class="hljs-keyword">const</span> counterReducer = createReducer&lt;State, Action&gt;(<span class="hljs-number">0</span>, &#123; <br>  ADD: <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> state + action.payload,<br>  [getType(increment)]: <span class="hljs-function">(<span class="hljs-params">state, _</span>) =&gt;</span> state + <span class="hljs-number">1</span>,<br>&#125;)<br><br>counterReducer(<span class="hljs-number">0</span>, add(<span class="hljs-number">4</span>)); <span class="hljs-comment">// =&gt; 4</span><br>counterReducer(<span class="hljs-number">0</span>, increment()); <span class="hljs-comment">// =&gt; 1</span><br></code></pre></td></tr></table></figure></p><p>Using handleAction chain API:<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// using action-creators</span><br><span class="hljs-keyword">const</span> counterReducer = createReducer&lt;State, Action&gt;(<span class="hljs-number">0</span>)<br>  .handleAction(add, <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> state + action.payload)<br>  .handleAction(increment, <span class="hljs-function">(<span class="hljs-params">state, _</span>) =&gt;</span> state + <span class="hljs-number">1</span>)<br><br>  <span class="hljs-comment">// handle multiple actions by using array</span><br>  .handleAction([add, increment], <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span><br>    state + (action.type === <span class="hljs-string">'ADD'</span> ? action.payload : <span class="hljs-number">1</span>)<br>  );<br><br><span class="hljs-comment">// all the same scenarios are working when using type-constants</span><br><span class="hljs-keyword">const</span> counterReducer = createReducer&lt;State, Action&gt;(<span class="hljs-number">0</span>)<br>  .handleAction(<span class="hljs-string">'ADD'</span>, <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> state + action.payload)<br>  .handleAction(<span class="hljs-string">'INCREMENT'</span>, <span class="hljs-function">(<span class="hljs-params">state, _</span>) =&gt;</span> state + <span class="hljs-number">1</span>);<br>  <br>counterReducer(<span class="hljs-number">0</span>, add(<span class="hljs-number">4</span>)); <span class="hljs-comment">// =&gt; 4</span><br>counterReducer(<span class="hljs-number">0</span>, increment()); <span class="hljs-comment">// =&gt; 1</span><br></code></pre></td></tr></table></figure></p><p>Extend or compose various reducers together - every operation is completely typesafe:<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> newCounterReducer = createReducer&lt;State, Action&gt;(<span class="hljs-number">0</span>)<br>  .handleAction(<span class="hljs-string">'SUBTRACT'</span>, <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> state - action.payload)<br>  .handleAction(<span class="hljs-string">'DECREMENT'</span>, <span class="hljs-function">(<span class="hljs-params">state, _</span>) =&gt;</span> state - <span class="hljs-number">1</span>);<br><br><span class="hljs-keyword">const</span> bigReducer = createReducer&lt;State, Action&gt;(<span class="hljs-number">0</span>, &#123;<br>  ...counterReducer.handlers, <span class="hljs-comment">// typesafe</span><br>  ...newCounterReducer.handlers, <span class="hljs-comment">// typesafe</span><br>  SUBTRACT: decrementReducer.handlers.DECREMENT, <span class="hljs-comment">// &lt;= error, wrong type</span><br>&#125;)<br></code></pre></td></tr></table></figure></p><p><a href="#table-of-contents">⇧ back to top</a></p><hr><h3 id="Action-Helpers-API"><a href="#Action-Helpers-API" class="headerlink" title="Action-Helpers API"></a>Action-Helpers API</h3><h4 id="getType"><a href="#getType" class="headerlink" title="getType"></a><code>getType</code></h4><p><em>Get the <strong>type</strong> property value (narrowed to literal type) of given enhanced action-creator.</em></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ts">getType(actionCreator)<br></code></pre></td></tr></table></figure><p><a href="src/get-type.spec.ts">&gt; Advanced Usage Examples</a></p><p>Examples:<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; getType, createStandardAction &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-keyword">const</span> add = createStandardAction(<span class="hljs-string">'ADD'</span>)&lt;<span class="hljs-built_in">number</span>&gt;();<br><br><span class="hljs-comment">// In switch reducer</span><br><span class="hljs-keyword">switch</span> (action.type) &#123;<br>  <span class="hljs-keyword">case</span> getType(add):<br>    <span class="hljs-comment">// action type is &#123; type: "ADD"; payload: number; &#125;</span><br>    <span class="hljs-keyword">return</span> state + action.payload;<br><br>  <span class="hljs-keyword">default</span>:<br>    <span class="hljs-keyword">return</span> state;<br>&#125;<br><br><span class="hljs-comment">// or with conditional statements</span><br><span class="hljs-keyword">if</span> (action.type === getType(add)) &#123;<br>  <span class="hljs-comment">// action type is &#123; type: "ADD"; payload: number; &#125;</span><br>&#125;<br></code></pre></td></tr></table></figure></p><p><a href="#table-of-contents">⇧ back to top</a></p><h4 id="isActionOf"><a href="#isActionOf" class="headerlink" title="isActionOf"></a><code>isActionOf</code></h4><p><em>Check if action is an instance of given enhanced action-creator(s)<br>(it will narrow action type to a type of given action-creator(s))</em></p><blockquote><p><strong>WARNING</strong>: Regular action creators and <a href="#action">action</a> will not work with this helper</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// can be used as a binary function</span><br>isActionOf(actionCreator, action)<br><span class="hljs-comment">// or as a curried function</span><br>isActionOf(actionCreator)(action)<br><span class="hljs-comment">// also accepts an array</span><br>isActionOf([actionCreator1, actionCreator2, ...actionCreatorN], action)<br><span class="hljs-comment">// with its curried equivalent</span><br>isActionOf([actionCreator1, actionCreator2, ...actionCreatorN])(action)<br></code></pre></td></tr></table></figure><p>Examples:<br><a href="src/is-action-of.spec.ts">&gt; Advanced Usage Examples</a></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; addTodo, removeTodo &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'./todos-actions'</span>;<br><br><span class="hljs-comment">// Works with any filter type function (`Array.prototype.filter`, lodash, ramda, rxjs, etc.)</span><br><span class="hljs-comment">// - single action</span><br>[action1, action2, ...actionN]<br>  .filter(isActionOf(addTodo)) <span class="hljs-comment">// only actions with type `ADD` will pass</span><br>  .map(<span class="hljs-function">(<span class="hljs-params">action</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// action type is &#123; type: "todos/ADD"; payload: Todo; &#125;</span><br>    ...<br>    <br><span class="hljs-comment">// - multiple actions</span><br>[action1, action2, ...actionN]<br>  .filter(isActionOf([addTodo, removeTodo])) <span class="hljs-comment">// only actions with type `ADD` or 'REMOVE' will pass</span><br>  .do(<span class="hljs-function">(<span class="hljs-params">action</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// action type is &#123; type: "todos/ADD"; payload: Todo; &#125; | &#123; type: "todos/REMOVE"; payload: Todo; &#125;</span><br>    ...<br>      <br><span class="hljs-comment">// With conditional statements</span><br><span class="hljs-comment">// - single action</span><br><span class="hljs-keyword">if</span>(isActionOf(addTodo, action)) &#123;<br>  <span class="hljs-keyword">return</span> iAcceptOnlyTodoType(action.payload);<br>  <span class="hljs-comment">// action type is &#123; type: "todos/ADD"; payload: Todo; &#125;</span><br>&#125;<br><span class="hljs-comment">// - multiple actions</span><br><span class="hljs-keyword">if</span>(isActionOf([addTodo, removeTodo], action)) &#123;<br>  <span class="hljs-keyword">return</span> iAcceptOnlyTodoType(action.payload);<br>  <span class="hljs-comment">// action type is &#123; type: "todos/ADD"; payload: Todo; &#125; | &#123; type: "todos/REMOVE"; payload: Todo; &#125;</span><br>&#125;<br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">⇧ back to top</a></p><h4 id="isOfType"><a href="#isOfType" class="headerlink" title="isOfType"></a><code>isOfType</code></h4><p><em>Check if action type property is equal given type-constant(s)<br>(it will narrow action type to a type of given action-creator(s))</em></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// can be used as a binary function</span><br>isOfType(<span class="hljs-keyword">type</span>, action)<br><span class="hljs-comment">// or as curried function</span><br>isOfType(<span class="hljs-keyword">type</span>)(action)<br><span class="hljs-comment">// also accepts an array</span><br>isOfType([type1, type2, ...typeN], action)<br><span class="hljs-comment">// with its curried equivalent</span><br>isOfType([type1, type2, ...typeN])(action)<br></code></pre></td></tr></table></figure><p>Examples:<br><a href="src/is-of-type.spec.ts">&gt; Advanced Usage Examples</a></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; ADD, REMOVE &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'./todos-types'</span>;<br><br><span class="hljs-comment">// Works with any filter type function (`Array.prototype.filter`, lodash, ramda, rxjs, etc.)</span><br><span class="hljs-comment">// - single action</span><br>[action1, action2, ...actionN]<br>  .filter(isOfType(ADD)) <span class="hljs-comment">// only actions with type `ADD` will pass</span><br>  .map(<span class="hljs-function">(<span class="hljs-params">action</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// action type is &#123; type: "todos/ADD"; payload: Todo; &#125;</span><br>    ...<br>    <br><span class="hljs-comment">// - multiple actions</span><br>[action1, action2, ...actionN]<br>  .filter(isOfType([ADD, REMOVE])) <span class="hljs-comment">// only actions with type `ADD` or 'REMOVE' will pass</span><br>  .do(<span class="hljs-function">(<span class="hljs-params">action</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// action type is &#123; type: "todos/ADD"; payload: Todo; &#125; | &#123; type: "todos/REMOVE"; payload: Todo; &#125;</span><br>    ...<br>      <br><span class="hljs-comment">// With conditional statements</span><br><span class="hljs-comment">// - single action</span><br><span class="hljs-keyword">if</span>(isOfType(ADD, action)) &#123;<br>  <span class="hljs-keyword">return</span> iAcceptOnlyTodoType(action.payload);<br>  <span class="hljs-comment">// action type is &#123; type: "todos/ADD"; payload: Todo; &#125;</span><br>&#125;<br><span class="hljs-comment">// - multiple actions</span><br><span class="hljs-keyword">if</span>(isOfType([ADD, REMOVE], action)) &#123;<br>  <span class="hljs-keyword">return</span> iAcceptOnlyTodoType(action.payload);<br>  <span class="hljs-comment">// action type is &#123; type: "todos/ADD"; payload: Todo; &#125; | &#123; type: "todos/REMOVE"; payload: Todo; &#125;</span><br>&#125;<br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">⇧ back to top</a></p><hr><h3 id="Type-Helpers-API"><a href="#Type-Helpers-API" class="headerlink" title="Type-Helpers API"></a>Type-Helpers API</h3><p>Below helper functions are very flexible generalizations, works great with nested structures and will cover numerous different use-cases.</p><h4 id="ActionType"><a href="#ActionType" class="headerlink" title="ActionType"></a><code>ActionType</code></h4><p><em>Powerful type-helper that will infer union type from <strong>import * as …</strong> or <strong>action-creator map</strong> object.</em></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; ActionType &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-comment">// with "import * as ..."</span><br><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> todos <span class="hljs-keyword">from</span> <span class="hljs-string">'./actions'</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> TodosAction = ActionType&lt;<span class="hljs-keyword">typeof</span> todos&gt;;<br><span class="hljs-comment">// TodosAction: &#123; type: 'action1' &#125; | &#123; type: 'action2' &#125; | &#123; type: 'action3' &#125;</span><br><br><span class="hljs-comment">// with nested action-creator map case</span><br><span class="hljs-keyword">const</span> actions = &#123;<br>  action1: createAction(<span class="hljs-string">'action1'</span>),<br>  nested: &#123;<br>    action2: createAction(<span class="hljs-string">'action2'</span>),<br>    moreNested: &#123;<br>      action3: createAction(<span class="hljs-string">'action3'</span>),<br>    &#125;,<br>  &#125;,<br>&#125;;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> RootAction = ActionType&lt;<span class="hljs-keyword">typeof</span> actions&gt;;<br><span class="hljs-comment">// RootAction: &#123; type: 'action1' &#125; | &#123; type: 'action2' &#125; | &#123; type: 'action3' &#125;</span><br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">⇧ back to top</a></p><h4 id="StateType"><a href="#StateType" class="headerlink" title="StateType"></a><code>StateType</code></h4><p><em>Powerful type helper that will infer state object type from <strong>reducer function</strong> and <strong>nested/combined reducers</strong>.</em></p><blockquote><p><strong>WARNING</strong>: working with redux@4+ types</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; combineReducers &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'redux'</span>;<br><span class="hljs-keyword">import</span> &#123; StateType &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typesafe-actions'</span>;<br><br><span class="hljs-comment">// with reducer function</span><br><span class="hljs-keyword">const</span> todosReducer = <span class="hljs-function">(<span class="hljs-params">state: Todo[] = [], action: TodosAction</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">switch</span> (action.type) &#123;<br>    <span class="hljs-keyword">case</span> getType(todos.add):<br>      <span class="hljs-keyword">return</span> [...state, action.payload];<br>    ...<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> TodosState = StateType&lt;<span class="hljs-keyword">typeof</span> todosReducer&gt;;<br><br><span class="hljs-comment">// with nested/combined reducers</span><br><span class="hljs-keyword">const</span> rootReducer = combineReducers(&#123;<br>  router: routerReducer,<br>  counters: countersReducer,<br>&#125;);<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> RootState = StateType&lt;<span class="hljs-keyword">typeof</span> rootReducer&gt;;<br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">⇧ back to top</a></p><hr><h2 id="Migration-Guides"><a href="#Migration-Guides" class="headerlink" title="Migration Guides"></a>Migration Guides</h2><h3 id="v3-x-x-to-v4-x-x"><a href="#v3-x-x-to-v4-x-x" class="headerlink" title="v3.x.x to v4.x.x"></a><code>v3.x.x</code> to <code>v4.x.x</code></h3><p>From <code>v4.x.x</code> all action creators will use <code>undefined</code> instead of <code>void</code> as a generic type parameter to make the action-creator function require NO parameters.<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> increment = createStandardAction(<span class="hljs-string">'INCREMENT'</span>)&lt;<span class="hljs-literal">undefined</span>&gt;();<br>increment(); <span class="hljs-comment">// &lt;= no parameters required</span><br><br><span class="hljs-keyword">const</span> fetchUsersAsync = createAsyncAction(<br>  <span class="hljs-string">'FETCH_USERS_REQUEST'</span>,<br>  <span class="hljs-string">'FETCH_USERS_SUCCESS'</span>,<br>  <span class="hljs-string">'FETCH_USERS_FAILURE'</span><br>)&lt;<span class="hljs-literal">undefined</span>, User[], <span class="hljs-built_in">Error</span>&gt;();<br>fetchUsersAsync.request(); <span class="hljs-comment">// &lt;= no parameters required</span><br></code></pre></td></tr></table></figure></p><h3 id="v2-x-x-to-v3-x-x"><a href="#v2-x-x-to-v3-x-x" class="headerlink" title="v2.x.x to v3.x.x"></a><code>v2.x.x</code> to <code>v3.x.x</code></h3><p><code>v3.x.x</code> API is backward compatible with <code>v2.x.x</code>. You’ll only need to update typescript dependency to <code>&gt; v3.1</code>.</p><h3 id="v1-x-x-to-v2-x-x"><a href="#v1-x-x-to-v2-x-x" class="headerlink" title="v1.x.x to v2.x.x"></a><code>v1.x.x</code> to <code>v2.x.x</code></h3><p>In v2 we provide a <code>createActionDeprecated</code> function compatible with v1 API to help with incremental migration.</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// in v1 we created action-creator like this:</span><br><span class="hljs-keyword">const</span> getTodo = createAction(<span class="hljs-string">'GET_TODO'</span>,<br>  <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span>, meta: <span class="hljs-built_in">string</span></span>) =&gt;</span> (&#123;<br>    <span class="hljs-keyword">type</span>: <span class="hljs-string">'GET_TODO'</span>,<br>    payload: id,<br>    meta: meta,<br>  &#125;)<br>);<br><br>getTodo(<span class="hljs-string">'some_id'</span>, <span class="hljs-string">'some_meta'</span>); <span class="hljs-comment">// &#123; type: 'GET_TODO', payload: 'some_id', meta: 'some_meta' &#125;</span><br><br><span class="hljs-comment">// in v2 API we offer few different styles - please choose your preference</span><br><span class="hljs-keyword">const</span> getTodoNoHelpers = <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span>, meta: <span class="hljs-built_in">string</span></span>) =&gt;</span> action(<span class="hljs-string">'GET_TODO'</span>, id, meta);<br><br><span class="hljs-keyword">const</span> getTodoWithHelpers = createAction(<span class="hljs-string">'GET_TODO'</span>, <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span>, meta: <span class="hljs-built_in">string</span></span>) =&gt;</span> action(id, meta);<br>&#125;);<br><br><span class="hljs-keyword">const</span> getTodoFSA = createStandardAction(<span class="hljs-string">'GET_TODO'</span>)&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;();<br><br><span class="hljs-keyword">const</span> getTodoCustom = createStandardAction(<span class="hljs-string">'GET_TODO'</span>).map(<br>  <span class="hljs-function">(<span class="hljs-params">&#123; id, meta &#125;: &#123; id: <span class="hljs-built_in">string</span>; meta: <span class="hljs-built_in">string</span>; &#125;</span>) =&gt;</span> (&#123;<br>    payload: id,<br>    meta,<br>  &#125;)<br>);<br></code></pre></td></tr></table></figure><h3 id="Migrating-from-redux-actions-to-typesafe-actions"><a href="#Migrating-from-redux-actions-to-typesafe-actions" class="headerlink" title="Migrating from redux-actions to typesafe-actions"></a>Migrating from <code>redux-actions</code> to <code>typesafe-actions</code></h3><ul><li>createAction(s)</li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ts">createAction(<span class="hljs-keyword">type</span>, payloadCreator, metaCreator) =&gt; createStandardAction(<span class="hljs-keyword">type</span>)() || createStandardAction(<span class="hljs-keyword">type</span>).map(payloadMetaCreator)<br><br>createActions() =&gt; <span class="hljs-comment">// COMING SOON!</span><br></code></pre></td></tr></table></figure><ul><li>handleAction(s)</li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ts">handleAction(<span class="hljs-keyword">type</span>, reducer, initialState) =&gt; createReducer(initialState).handleAction(<span class="hljs-keyword">type</span>, reducer)<br><br>handleActions(reducerMap, initialState) =&gt; createReducer(initialState, reducerMap)<br></code></pre></td></tr></table></figure><blockquote><p>TIP: If migrating from JS -&gt; TS, you can swap out action-creators from <code>redux-actions</code> with action-creators from <code>typesafe-actions</code> in your <code>handleActions</code> handlers. This works because the action-creators from <code>typesafe-actions</code> provide the same <code>toString</code> method implementation used by <code>redux-actions</code> to match actions to the correct reducer.</p></blockquote><ul><li>combineActions</li></ul><p>Not needed because each function in the API accept single value or array of values for action types or action creators.</p><p><a href="#table-of-contents">⇧ back to top</a></p><hr><h2 id="Recipes"><a href="#Recipes" class="headerlink" title="Recipes"></a>Recipes</h2><h3 id="Restrict-Meta-type-in-action-creator"><a href="#Restrict-Meta-type-in-action-creator" class="headerlink" title="Restrict Meta type in action creator"></a>Restrict Meta type in <code>action</code> creator</h3><p>Using this recipe you can create an action creator with restricted Meta type with exact object shape.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs tsx">export type MetaType = &#123;<br>  analytics?: &#123;<br>    eventName: string;<br>  &#125;;<br>&#125;;<br><br>export const actionWithRestrictedMeta = &lt;T extends string, P&gt;(<br>  type: T,<br>  payload: P,<br>  meta: MetaType<br>) =&gt; action(type, payload, meta);<br><br>export const validAction = (payload: string) =&gt;<br>  actionWithRestrictedMeta(&apos;type&apos;, payload, &#123; analytics: &#123; eventName: &apos;success&apos; &#125; &#125;); // OK!<br><br>export const invalidAction = (payload: string) =&gt;<br>  actionWithRestrictedMeta(&apos;type&apos;, payload, &#123; analytics: &#123; excessProp: &apos;no way!&apos; &#125; &#125;); // Error<br>// Object literal may only specify known properties, and &apos;excessProp&apos; does not exist in type &apos;&#123; eventName: string; &#125;<br></code></pre></td></tr></table></figure><p><a href="#table-of-contents">⇧ back to top</a></p><hr><h2 id="Compare-to-others"><a href="#Compare-to-others" class="headerlink" title="Compare to others"></a>Compare to others</h2><p>Here you can find out a detailed comparison of <code>typesafe-actions</code> to other solutions.</p><h3 id="redux-actions"><a href="#redux-actions" class="headerlink" title="redux-actions"></a><code>redux-actions</code></h3><p>Lets compare the 3 most common variants of action-creators (with type only, with payload and with payload + meta)</p><p>Note: tested with “@types/redux-actions”: “2.2.3”</p><p><strong>- with type only (no payload)</strong></p><h5 id="redux-actions-1"><a href="#redux-actions-1" class="headerlink" title="redux-actions"></a>redux-actions</h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> notify1 = createAction(<span class="hljs-string">'NOTIFY'</span>);<br><span class="hljs-comment">// resulting type:</span><br><span class="hljs-comment">// () =&gt; &#123;</span><br><span class="hljs-comment">//   type: string;</span><br><span class="hljs-comment">//   payload: void | undefined;</span><br><span class="hljs-comment">//   error: boolean | undefined;</span><br><span class="hljs-comment">// &#125;</span><br></code></pre></td></tr></table></figure><blockquote><p>with <code>redux-actions</code> you can notice the redundant nullable <code>payload</code> property and literal type of <code>type</code> property is lost (discrimination of union type would not be possible)</p></blockquote><h5 id="typesafe-actions"><a href="#typesafe-actions" class="headerlink" title="typesafe-actions"></a>typesafe-actions</h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> notify1 = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> action(<span class="hljs-string">'NOTIFY'</span>);<br><span class="hljs-comment">// resulting type:</span><br><span class="hljs-comment">// () =&gt; &#123;</span><br><span class="hljs-comment">//   type: "NOTIFY";</span><br><span class="hljs-comment">// &#125;</span><br></code></pre></td></tr></table></figure><blockquote><p>with <code>typesafe-actions</code> there is no excess nullable types and no excess properties and the action “type” property is containing a literal type</p></blockquote><p><strong>- with payload</strong></p><h5 id="redux-actions-2"><a href="#redux-actions-2" class="headerlink" title="redux-actions"></a>redux-actions</h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> notify2 = createAction(<span class="hljs-string">'NOTIFY'</span>,<br>  <span class="hljs-function">(<span class="hljs-params">username: <span class="hljs-built_in">string</span>, message?: <span class="hljs-built_in">string</span></span>) =&gt;</span> (&#123;<br>    message: <span class="hljs-string">`<span class="hljs-subst">$&#123;username&#125;</span>: <span class="hljs-subst">$&#123;message || 'Empty!'&#125;</span>`</span>,<br>  &#125;)<br>);<br><span class="hljs-comment">// resulting type:</span><br><span class="hljs-comment">// (t1: string) =&gt; &#123;</span><br><span class="hljs-comment">//   type: string;</span><br><span class="hljs-comment">//   payload: &#123; message: string; &#125; | undefined;</span><br><span class="hljs-comment">//   error: boolean | undefined;</span><br><span class="hljs-comment">// &#125;</span><br></code></pre></td></tr></table></figure><blockquote><p>first the optional <code>message</code> parameter is lost, <code>username</code> semantic argument name is changed to some generic <code>t1</code>, <code>type</code> property is widened once again and <code>payload</code> is nullable because of broken inference</p></blockquote><h5 id="typesafe-actions-1"><a href="#typesafe-actions-1" class="headerlink" title="typesafe-actions"></a>typesafe-actions</h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> notify2 = <span class="hljs-function">(<span class="hljs-params">username: <span class="hljs-built_in">string</span>, message?: <span class="hljs-built_in">string</span></span>) =&gt;</span> action(<br>  <span class="hljs-string">'NOTIFY'</span>,<br>  &#123; message: <span class="hljs-string">`<span class="hljs-subst">$&#123;username&#125;</span>: <span class="hljs-subst">$&#123;message || 'Empty!'&#125;</span>`</span> &#125;,<br>);<br><span class="hljs-comment">// resulting type:</span><br><span class="hljs-comment">// (username: string, message?: string | undefined) =&gt; &#123;</span><br><span class="hljs-comment">//   type: "NOTIFY";</span><br><span class="hljs-comment">//   payload: &#123; message: string; &#125;;</span><br><span class="hljs-comment">// &#125;</span><br></code></pre></td></tr></table></figure><blockquote><p><code>typesafe-actions</code> infer very precise resulting type, notice working optional parameters and semantic argument names are preserved which is really important for great intellisense experience</p></blockquote><p><strong>- with payload and meta</strong></p><h5 id="redux-actions-3"><a href="#redux-actions-3" class="headerlink" title="redux-actions"></a>redux-actions</h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> notify3 = createAction(<span class="hljs-string">'NOTIFY'</span>,<br>  <span class="hljs-function">(<span class="hljs-params">username: <span class="hljs-built_in">string</span>, message?: <span class="hljs-built_in">string</span></span>) =&gt;</span> (<br>    &#123; message: <span class="hljs-string">`<span class="hljs-subst">$&#123;username&#125;</span>: <span class="hljs-subst">$&#123;message || 'Empty!'&#125;</span>`</span> &#125;<br>  ),<br>  <span class="hljs-function">(<span class="hljs-params">username: <span class="hljs-built_in">string</span>, message?: <span class="hljs-built_in">string</span></span>) =&gt;</span> (<br>    &#123; username, message &#125;<br>  )<br>);<br><span class="hljs-comment">// resulting type:</span><br><span class="hljs-comment">// (...args: any[]) =&gt; &#123;</span><br><span class="hljs-comment">//   type: string;</span><br><span class="hljs-comment">//   payload: &#123; message: string; &#125; | undefined;</span><br><span class="hljs-comment">//   meta: &#123; username: string; message: string | undefined; &#125;;</span><br><span class="hljs-comment">//   error: boolean | undefined;</span><br><span class="hljs-comment">// &#125;</span><br></code></pre></td></tr></table></figure><blockquote><p>this time we got a completely broken arguments arity with no type-safety because of <code>any</code> type with all the earlier issues</p></blockquote><h5 id="typesafe-actions-2"><a href="#typesafe-actions-2" class="headerlink" title="typesafe-actions"></a>typesafe-actions</h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">/**<br> * typesafe-actions<br> */</span><br><span class="hljs-keyword">const</span> notify3 = <span class="hljs-function">(<span class="hljs-params">username: <span class="hljs-built_in">string</span>, message?: <span class="hljs-built_in">string</span></span>) =&gt;</span> action(<br>  <span class="hljs-string">'NOTIFY'</span>,<br>  &#123; message: <span class="hljs-string">`<span class="hljs-subst">$&#123;username&#125;</span>: <span class="hljs-subst">$&#123;message || 'Empty!'&#125;</span>`</span> &#125;,<br>  &#123; username, message &#125;,<br>);<br><span class="hljs-comment">// resulting type:</span><br><span class="hljs-comment">// (username: string, message?: string | undefined) =&gt; &#123;</span><br><span class="hljs-comment">//   type: "NOTIFY";</span><br><span class="hljs-comment">//   payload: &#123; message: string; &#125;;</span><br><span class="hljs-comment">//   meta: &#123; username: string; message: string | undefined; &#125;;</span><br><span class="hljs-comment">// &#125;</span><br></code></pre></td></tr></table></figure><blockquote><p><code>typesafe-actions</code> never fail to <code>any</code> type, even with this advanced scenario all types are correct and provide complete type-safety and excellent developer experience </p></blockquote><p><a href="#table-of-contents">⇧ back to top</a></p><hr><h2 id="MIT-License"><a href="#MIT-License" class="headerlink" title="MIT License"></a>MIT License</h2><p>Copyright (c) 2017 Piotr Witek <a href="mailto:&#112;&#x69;&#x6f;&#116;&#114;&#x65;&#x6b;&#46;&#119;&#105;&#116;&#x65;&#x6b;&#64;&#x67;&#x6d;&#x61;&#x69;&#108;&#x2e;&#x63;&#111;&#x6d;" target="_blank" rel="noopener">&#112;&#x69;&#x6f;&#116;&#114;&#x65;&#x6b;&#46;&#119;&#105;&#116;&#x65;&#x6b;&#64;&#x67;&#x6d;&#x61;&#x69;&#108;&#x2e;&#x63;&#111;&#x6d;</a> (<a href="http://piotrwitek.github.io" target="_blank" rel="noopener">http://piotrwitek.github.io</a>)</p>]]></content>
      
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> redux </tag>
            
            <tag> typescript </tag>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>构建electron、typescript、react、antd应用</title>
      <link href="/2019/06/14/cjyqrrd9x0024k8u97m8507cg/"/>
      <url>/2019/06/14/cjyqrrd9x0024k8u97m8507cg/</url>
      
        <content type="html"><![CDATA[<blockquote><p>这个研究了很旧，还没研究透，先记录，以免忘记</p></blockquote><a id="more"></a><h2 id="1-初始化react项目"><a href="#1-初始化react项目" class="headerlink" title="1. 初始化react项目"></a>1. 初始化react项目</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">create-react-app demo --typescript<br></code></pre></td></tr></table></figure><h2 id="2-添加相关依赖-表如下"><a href="#2-添加相关依赖-表如下" class="headerlink" title="2. 添加相关依赖, 表如下"></a>2. 添加相关依赖, 表如下</h2><table><thead><tr><th>包名</th><th>介绍</th><th>安装方式</th></tr></thead><tbody><tr><td><a href="https://electronjs.org/" target="_blank" rel="noopener">electron</a></td><td>关键包，构建electron应用必须</td><td>-D</td></tr><tr><td><a href="https://github.com/mackyle/sqlite" target="_blank" rel="noopener">sqlite3</a></td><td>数据库支持，需要存储数据的话，推荐这个</td><td>-P</td></tr><tr><td><a href="https://ant.design/docs/react/introduce-cn" target="_blank" rel="noopener">antd</a></td><td>蚂蚁金服提供的React框架</td><td>-P</td></tr><tr><td><a href="https://github.com/ReactTraining/react-router" target="_blank" rel="noopener">react-router-dom</a></td><td>提供路由支持</td><td>-P</td></tr><tr><td><a href="https://github.com/typeorm/typeorm" target="_blank" rel="noopener">typeorm</a></td><td>适用于Typescript的ORM支持</td><td>-P</td></tr><tr><td><a href="https://github.com/tealeg/xlsx" target="_blank" rel="noopener">xlsx</a></td><td>读取excel文件，也可以创建excel文件</td><td>-P</td></tr><tr><td><a href="https://github.com/sail-sail/ejsExcel" target="_blank" rel="noopener">ejsexcel</a></td><td>通过模板的方式生成excel文件</td><td>-P</td></tr><tr><td><a href="https://github.com/sindresorhus/electron-is-dev" target="_blank" rel="noopener">electron-is-dev</a></td><td>用于在逻辑中判断当前是否开发模式，因为打包后一些路径会变，<br>这个可以判断当前是否打包以便选择路径</td><td>-P</td></tr><tr><td><a href="https://github.com/megahertz/electron-log" target="_blank" rel="noopener">electron-log</a></td><td>日志支持</td><td>-P</td></tr><tr><td><a href="https://github.com/ashtuchkin/iconv-lite" target="_blank" rel="noopener">iconv-lite</a></td><td>添加更多编码支持，window蛋疼的不使用utf-8，<br>node又不支持GBK，所以需要这个</td><td>-P</td></tr><tr><td><a href="https://github.com/lodash/lodash" target="_blank" rel="noopener">lodash</a></td><td>著名的javascript工具库</td><td>-P</td></tr><tr><td><a href="https://github.com/moment/moment" target="_blank" rel="noopener">moment</a></td><td>时间处理库</td><td>-P</td></tr><tr><td><a href="https://github.com/timarney/react-app-rewired" target="_blank" rel="noopener">react-app-rewired</a></td><td>因为<code>create-react-app</code>的配置文件都是不对外透明的，<br>这个可以让<code>create-react-app</code> 加载的时候，额外对现有配置进行修改</td><td>-D</td></tr><tr><td><a href="https://github.com/arackaf/customize-cra" target="_blank" rel="noopener">customize-cra</a></td><td>配合<code>react-app-rewired</code> 来使用，快速写一下配置</td><td>-D</td></tr><tr><td><a href="https://github.com/electron/electron-rebuild" target="_blank" rel="noopener">electron-rebuild</a></td><td>一些需要需要根据系统编译的库，比如 <code>sqlite3</code> 如果直接安装会出现不兼容问题，<br>然后就会死活找不到这个库，通过这个可以根据现有的版本进行重新编译</td><td>-D</td></tr><tr><td><a href="https://github.com/electron-userland/electron-builder" target="_blank" rel="noopener">electron-builder</a></td><td>用于打包项目，生成安装包</td></tr></tbody></table><p>以上就是我这个项目用到的包，感谢 GitHub 这个开源平台，感觉包作者的大大们，谢谢！！！ :smile: </p><h2 id="3-配置项目需要的基础代码"><a href="#3-配置项目需要的基础代码" class="headerlink" title="3. 配置项目需要的基础代码"></a>3. 配置项目需要的基础代码</h2><ol><li>添加 <code>electron</code> 的入口文件 <code>/public/main.js</code> </li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// Modules to control application life and create native browser window</span><br><span class="hljs-keyword">const</span> &#123; app, BrowserWindow, ipcMain &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">'electron'</span>);<br><span class="hljs-keyword">const</span> isDev = <span class="hljs-built_in">require</span>(<span class="hljs-string">'electron-is-dev'</span>)<br><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>)<br><span class="hljs-keyword">const</span> log = <span class="hljs-built_in">require</span>(<span class="hljs-string">'electron-log'</span>);<br><span class="hljs-comment">// Keep a global reference of the window object, if you don't, the window will</span><br><span class="hljs-comment">// be closed automatically when the JavaScript object is garbage collected.</span><br><span class="hljs-keyword">let</span> mainWindow;<br><br><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createWindow</span>(<span class="hljs-params"></span>) </span>&#123;<br><br>    <span class="hljs-comment">// Create the browser window.</span><br>    mainWindow = <span class="hljs-keyword">new</span> BrowserWindow(&#123;<br>        <span class="hljs-attr">width</span>: <span class="hljs-number">1700</span>,<br>        <span class="hljs-attr">height</span>: <span class="hljs-number">1000</span>,<br>        <span class="hljs-attr">minHeight</span>: <span class="hljs-number">1000</span>,<br>        <span class="hljs-attr">minWidth</span>: <span class="hljs-number">1700</span>,<br>        <span class="hljs-attr">webPreferences</span>: &#123;<br>            <span class="hljs-attr">nodeIntegration</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-attr">webSecurity</span>: <span class="hljs-literal">false</span>,<br>        &#125;,<br>        <span class="hljs-attr">autoHideMenuBar</span>: <span class="hljs-literal">true</span>,<br>    &#125;)<br><br>    <span class="hljs-comment">// 这里就是初始化的时候加载的页面，由于打包之后使用的是静态文件，开发时候使用的是服务器，所有这里要分开处理，electron-is-dev 库的重要性</span><br>    <span class="hljs-keyword">const</span> htmlUrl = <span class="hljs-string">`file://<span class="hljs-subst">$&#123;path.join(__dirname, <span class="hljs-string">'../build/index.html#login'</span>)&#125;</span>`</span>;<br>    <span class="hljs-keyword">const</span> url = isDev ? <span class="hljs-string">"http://127.0.0.1:3000#/login"</span> : htmlUrl;<br>    log.info(url);<br>    mainWindow.loadURL(url);<br>    <span class="hljs-comment">// 因为开发的时候 electron 虽然使用chrome内核，但是不没有任何chrmoe插件。开发React的时候最好有 React dev tools 插件，所以可以通过以下的方式来加载额外的插件，路径是插件安装在chrmoe的路径，有点难找，可以配合 Everything 来查找</span><br>    <span class="hljs-keyword">if</span> (isDev) &#123;<br>        BrowserWindow.addDevToolsExtension(<span class="hljs-string">'C:\\Users\\kirno\\AppData\\Local\\Google\\Chrome\\User Data\\Default\\Extensions\\fmkadmapgofadopljbjfkapdkoienihi\\3.6.0_0'</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// Open the DevTools.</span><br>    <span class="hljs-comment">// mainWindow.webContents.openDevTools()</span><br><br>    <span class="hljs-comment">// Emitted when the window is closed.</span><br>    mainWindow.on(<span class="hljs-string">'closed'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-comment">// Dereference the window object, usually you would store windows</span><br>        <span class="hljs-comment">// in an array if your app supports multi windows, this is the time</span><br>        <span class="hljs-comment">// when you should delete the corresponding element.</span><br>        mainWindow = <span class="hljs-literal">null</span><br>    &#125;)<br><span class="hljs-comment">// 这里线程间通信用的，electron 主要分为 主线程（浏览器）和渲染线程 (网页) 的形式运行，有些事情在网页里是比较难实现，就可以通过这种方式让浏览器帮你做。下面是实现获取系统打印机列表的功能</span><br>    ipcMain.on(<span class="hljs-string">'obtainPrinterList'</span>, (event) =&gt; &#123;<br>        <span class="hljs-keyword">const</span> printers = mainWindow.webContents.getPrinters();<br>        mainWindow.webContents.send(<span class="hljs-string">'getPrinterList'</span>, printers);<br>    &#125;);<br>&#125;<br><br><span class="hljs-comment">// This method will be called when Electron has finished</span><br><span class="hljs-comment">// initialization and is ready to create browser windows.</span><br><span class="hljs-comment">// Some APIs can only be used after this event occurs.</span><br>app.on(<span class="hljs-string">'ready'</span>, createWindow)<br><br><span class="hljs-comment">// Quit when all windows are closed.</span><br>app.on(<span class="hljs-string">'window-all-closed'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-comment">// On macOS it is common for applications and their menu bar</span><br>    <span class="hljs-comment">// to stay active until the user quits explicitly with Cmd + Q</span><br>    <span class="hljs-keyword">if</span> (process.platform !== <span class="hljs-string">'darwin'</span>) app.quit()<br>&#125;)<br><br>app.on(<span class="hljs-string">'activate'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-comment">// On macOS it's common to re-create a window in the app when the</span><br>    <span class="hljs-comment">// dock icon is clicked and there are no other windows open.</span><br>    <span class="hljs-keyword">if</span> (mainWindow === <span class="hljs-literal">null</span>) createWindow()<br>&#125;)<br><br><span class="hljs-comment">// In this file you can include the rest of your app's specific main process</span><br><span class="hljs-comment">// code. You can also put them in separate files and require them here.</span><br></code></pre></td></tr></table></figure><ol start="2"><li>在<code>package.json</code>文件中添加脚本，辅助开发，以下是节选内容</li></ol><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>"scripts": &#123;<br>        "ele": "electron .",<br>        "pub": "build --publish always",<br>        /* 重新编译 */<br>        "rebuild": "electron-rebuild",<br>        /* 开发运行 */<br>        "start": "react-app-rewired start",<br>        "build": "react-app-rewired build",<br>        "test": "react-app-rewired test",<br>        "eject": "react-scripts eject",<br>        "postinstall": "electron-builder install-app-deps",        <br>        "buil": "electron-builder install-app-deps",<br>        "preelectron-pack": "yarn build",<br>        /* 打包 */<br>        "electron-dist": "build -w",<br>        /* 打包，但不生成安装包文件 */<br>        "electron-pack": "electron-builder --dir",<br>        "release": "build"<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>接下来就可以进行开发了。以下记录几个问题</p><h2 id="typeorm-的问题"><a href="#typeorm-的问题" class="headerlink" title="typeorm 的问题"></a><code>typeorm</code> 的问题</h2><ol><li><p>无法找到 sqlite3 的包，原因可能有两个，一个是sqlite3直接安装后，和electron的版本不符合。可以通过 <code>electron-build</code> 库解决，重新编译即可；二是因为导入的方式不对，如果使用 </p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123;xxxx&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'typeorm'</span><br></code></pre></td></tr></table></figure><p>的话，由于设计到c这种第三方底层库，然而 <code>electron</code> 的渲染线程是没有办法访问这种底层代码的，所以导致无法<code>typrorm</code> 底层无法调用成功，所以这里要借助 <code>electron</code> 的函数 <code>require</code> 方法来引入，实际上就是让 electron 来帮我们导包。但是如果使用 <code>require</code> 的方法来导包，就会失去 <code>typescript</code> 的类型优势，以下是解决方法：</p><ol><li><p>新建一个 <code>libary.js</code> 文件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> &#123; getConnection, getRepository &#125; = <span class="hljs-built_in">window</span>.require(<span class="hljs-string">'typeorm'</span>);<br><span class="hljs-built_in">module</span>.exports = &#123; getConnection, getRepository &#125;<br></code></pre></td></tr></table></figure></li><li><p>新建 <code>libary.d.ts</code> 文件</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">declare</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRepository</span>&lt;<span class="hljs-title">Entity</span>&gt;(<span class="hljs-params">entityClass: ObjectType&lt;Entity&gt; | EntitySchema&lt;Entity&gt; | <span class="hljs-built_in">string</span>, connectionName?: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Repository</span>&lt;<span class="hljs-title">Entity</span>&gt;</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">declare</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getConnection</span>(<span class="hljs-params">connectionName?: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Connection</span></span>;<br></code></pre></td></tr></table></figure></li><li><p>再要使用的地方引入</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; getRepository, getConnection &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'../libary'</span>;<br></code></pre></td></tr></table></figure></li></ol><p>即可，这里制作了两个常用方法的实例，其他方法也是这样引如。这样就不会丢失 类型。这个方法同样适用于引入 electron 对象。</p></li><li><p>打包问题，由于<code>webpack</code>会把所有引入的文件都进行打包，然而<code>typeorm</code>因为 要兼容多种数据库，所以底层会引入多中数据库的包，但是因为我们只用一种数据，其他的没有，所以打包的时候会报错。解决办法就是让 <code>webpack</code>不要打包那些多余没用到的库，在实际要用的时候再引入。</p><ol><li><p>由于 <code>create-react-app</code>的配置文件是赢藏的，所以通过 <a href="https://github.com/timarney/react-app-rewired" target="_blank" rel="noopener">react-app-rewired</a> 和 <a href="https://github.com/arackaf/customize-cra" target="_blank" rel="noopener">customize-cra</a> 配合修改，新建 <code>/config-overrides.js</code> 文件，以下还提到了两种打包目标模式，具体可以去<code>webpack</code>官网查看</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> &#123; addLessLoader, override, addWebpackExternals, fixBabelImports &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">'customize-cra'</span>);<br><span class="hljs-built_in">module</span>.exports = &#123;<br>    <span class="hljs-attr">webpack</span>: override(<br>        <span class="hljs-comment">// 添加less支持</span><br>        addLessLoader(&#123;<br>            <span class="hljs-attr">javascriptEnabled</span>: <span class="hljs-literal">true</span>,<br>        &#125;),<br>        <span class="hljs-comment">// 重点： 取消不必要的库的打包</span><br>        addWebpackExternals(&#123;<br>            <span class="hljs-string">'pg'</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">'pg-hstore'</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">'mysql2'</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">'react-native-sqlite-storage'</span>: <span class="hljs-literal">true</span>,<br>        &#125;),<br>        <span class="hljs-comment">// 客户端使用 electron-renderer方式渲染</span><br>        (config) =&gt; &#123;<br>            config.target = <span class="hljs-string">"electron-renderer"</span>;<br>            <span class="hljs-keyword">return</span> config;<br>        &#125;,<br>        (config) =&gt; &#123;<br>            config.optimization.minimize = <span class="hljs-literal">false</span>;<br>            <span class="hljs-keyword">return</span> config;<br>        &#125;,<br>    ),<br>    <span class="hljs-comment">// 服务端使用 electron-main方式渲染</span><br>    devServer: <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> &#123;<br>        config.target = <span class="hljs-string">"electron-main"</span>;<br>        <span class="hljs-keyword">return</span> config;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol></li></ol><h2 id="路径问题"><a href="#路径问题" class="headerlink" title="路径问题"></a>路径问题</h2><p>由于打包版本和开发版本存在路径差异，所以需要引入 <code>electron-is-dev</code>包来判断当前的环境。</p><p>数据存储路径建议放大 <code>electron.app.getAppPath()</code></p>]]></content>
      
      
      
        <tags>
            
            <tag> typescript </tag>
            
            <tag> electron </tag>
            
            <tag> react </tag>
            
            <tag> antd </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2019/01/27/cjyqrrcxf000lk8u9r5tgct1z/"/>
      <url>/2019/01/27/cjyqrrcxf000lk8u9r5tgct1z/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">"My New Post"</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>2018-11-04日记</title>
      <link href="/2018/11/05/cjyqrrcxa000hk8u9g0rrll8a/"/>
      <url>/2018/11/05/cjyqrrcxa000hk8u9g0rrll8a/</url>
      
        <content type="html"><![CDATA[<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><div id="hbe-security">  <div class="hbe-input-container">  <input type="password" class="hbe-form-control" id="pass" placeholder="Welcome to my blog, ener password to read." />    <label for="pass">Welcome to my blog, ener password to read.</label>    <div class="bottom-line"></div>  </div></div><div id="decryptionError" style="display: none;">Incorrect Password!</div><div id="noContentError" style="display: none;">No content to display!</div><div id="encrypt-blog" style="display:none">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</div><script src="/lib/crypto-js.js"></script><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
        <tags>
            
            <tag> 日记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018-11-03日记</title>
      <link href="/2018/11/05/cjyqrrcx6000fk8u9ii6rujbm/"/>
      <url>/2018/11/05/cjyqrrcx6000fk8u9ii6rujbm/</url>
      
        <content type="html"><![CDATA[<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><div id="hbe-security">  <div class="hbe-input-container">  <input type="password" class="hbe-form-control" id="pass" placeholder="Welcome to my blog, ener password to read." />    <label for="pass">Welcome to my blog, ener password to read.</label>    <div class="bottom-line"></div>  </div></div><div id="decryptionError" style="display: none;">Incorrect Password!</div><div id="noContentError" style="display: none;">No content to display!</div><div id="encrypt-blog" style="display:none">U2FsdGVkX19CcQ1xX2oayG7r9a81kaUPQ1MiwxB1iuOsP3BxifbzIBVYhlwWZvAqfMuD4Skq8DiAb7rjrI1howLrhWHHmM1oRHBud+H4i7KEK1d8RfYEVZA9X+cR9J6FJeeEjprUPxdcD65GH1v1N2lBPRFC+gIMFuceeZj/pLWCMb+PSjqwFhSiHNM8DQBZPTJlzQzcoi7AQcZJxx+LuIYll0gmOzJYxEz7VPIJ2RwPvmJ3II26M1fjMEGmQ5dpw3d+AaBAO0pHMZf9RbREsRTOEfs4aUm3eju1QCVzl2D8IRcHxz13aQNsGYmbLPfR0oOK+i37BSPALBXn0xLNc/FDfQ2ObPqNp/EVJX4DsFCWq4kvXi8IGC4We2xIYZcykBRuhGO4Un5btFFdaio+hO53LxG6BrkVF9JZZRMTVjPeKIk3iiJmlXm8k3zoqyVJ1pOtp+EkmwR6zb06HrCtf+5yTzC2XnhbPkqCnlw1JCrYnghpVlYHls22ugAsHNLrsfA9+nFZolf0CJSHUOxPa+KQoCGQ09gqDi2+r/kXcl2900teGwU7sYlOh0pm7ZuEZJXGlAl/EGbugBtuH4FVTYwje5nhwUVkjgqBViVPIfDmeiEP/W3oSBsa5SC0lHbyVf6Fcd5/v+BoflCB2k/NTaEBYNdJdR4wP3+FvusmH/l0GtgVSxWM9SQ/+rww0qeLe12szC6uAJtbyhGTVpjAx0Zqoz+sr7kgA+mo8mNr7eG/R2R/BOHApPSM8Wi0mubH2y0zCqEP3zktuH6XUOt09Nhm6SK8wUCqsUnYwzPDzAL79x375PkbUCsXPZe4GKAhm8r5aykxBWXui8RhntsAzH5gM0EVMoi5LGH8E4CFMqWIP6uUAMQr2KATYkDWWJmI/x9iWMKEmhYa73rPYQwgVrc175NC5eXP7ojj55u11TPRY1jmVI1sODArL69RlWBQny23HTx3FM2C7YWvoyyF33juOER12yMLB8OQmXRF2kKaICKptAoCfoxHRn0joh22x/9pw/Qg+Ba9FHyNUs+BYTnXolEFqH9svx2R7dGgFkBdsoQOE9X3b+9wWRVDkLjvRnUJKnyjGvISSDohwBYp59di0j7k1SU8P477ZRpvFd3WnOPQRYbJ3cAOyRpPaRhrqaoEe4nNm3DdvWnvpNLFesqdTrwITMvQqhXWz0UgJOjCJq5E3LkmFA9RLPU5DaC1J+Dfvf02ASlzj8mfdTXdUSCoZeP/+HYAqqb9osvHKG7uKjGOLdtyaPWRCYcTaDrz20wi3r2QyFbr2euSlD0X74qIRwT5BO9OUwNfNaNfY5xOxtfW6NQAuykyyT6/v9LC80emDGQT6Rn7BukT/txpl8Byik43Nzt5UYkul4R98unZPhShXjPon+6bC0Mp43iw57uqez1hgNkxBsJI1NmIgCQx6H9RchbFmifwv4+LMmAIzGtTEVay8AKveQ1uYWRLsCM8vET8mG+p+h0rY193OAAf6G1/6UHVjP9v9waGSQwBZ7GjDh4aLPKjdZSMlROnfGtiiczH4RYH4MgMKyIq9Xe8W5wybEqglpG6VLKOhOqbCdk95S7PxCZ+yD+tZjzLP6b5iwL+dBEWPrSserCxT2gxgThFanntQmDtjulWElDAZv6M+KqopUtJmHOgqvDXZMU0amVgGuk1p3SfwVFLTqE59WruSBBTQizbR8hh34xUrX6TlrBrrGOcvd/Mbu/Calbn9z/N/55BvtASxo/FBUPe1mcOz759MsuPc9g4MCEnDzSq3lvBQqMPBMfoBtQtoRPvw9jAekQuRs8OcOuF96ySXriPBlvohubbqjNS+G7FQ8YeWI8oE1dMHjjHm+CJFamIUszF6fzlRkAUP+bRHHeyoWX/RnGbrz/sR4ROls1vN9lRVpW6cC3Vj5y0l1dv1qkoLQC3R3V4ybTh+9+8YvtWBMoBFnYuA1xG+j1BzYpkiclmeXa6dAaz+eAwKcaDbAUwAPtsFW9Sa389qfgiFJuiLhw7aofWLuMI8Nb/4FCEQw9/qjegrv5jBXYs8+13YtD9tUK3kRSrB6RWArJ/KiuKSB9DgrOw3RLTXT2dp18xFFobomz747o+/qaobAtLw8gB2pxGOfvszxlTxg4KHBNk2hkNV462XwW3cjhf3ETeFB2o4dsuVAy3n+FeMqjE8HPXmH+kiH78F7ceTbDtWvh+CQsjLvxg52/zSCO3Vlc70ZzQjBrUDmnGjTKpojp05/YVW5qUYEl2z4ViabN6XSl9gQhMlii/XksUFGNNks0+wVtJ3DRcKRtRh5BSxUjRUatlTNGwC8nh/35wauoONTMDt9ze0m/pzl86r55BC/5f8QeIwVNHYjMwRU44I8gAR3QYFoA2E0Xivqd9JY+GnL7qiuLItvrvcwczIFs1138Z+0LBALqBeahWRxGZgrNA/wOsf2jnA7ZbZqcrQeQga7cp9CuBVwJe2HzT1TjyO9BnggvDzQur3fb+svr9Zucc/+B1MD4xCJr/ryPkSXMXGM6ZTRQ4D0Gcrmc5WzhHedfdhdF4mcuVZHC7jR4S1jVCSQN1pu75o7mZYdLmz9wSaMM7ZesbDY6cd4KHO6Bsn8KF3yxmw2vGdgdSO7Ebv5zkUMi7Kx7V70ZMjZLdjynXZSosMWDprPVK5rDtuvYogIwSL8HF/6lsNnoMMFOsjf+Dl2HDU4j/KYd33HAIY2Uz12tDbSjXOFjGu9qaKMIeWTDInu96e8BSKgkBwpktJQIwZeuOwyJwIzBJFnWjoV1/3ohQfSnKg3tJdv9ORHgxUojw24ijy3e9/lrvjJZ5uvg8rLqJbiOS67uzJ53Rv2L+qXs/N80PXs2HlgAdEZmlYnSU/trTci58oXvwlxoo+I++qcA/xw40gqgYFueu/ADXSfu7TXPrgU/cF5pGvhbHrtkuzocNAn7TEUeL9gKPF4DwROCp1/zT5b+MHnsiT1JAjrqNuznd+UCAuNHnOLv1WUMQ/l96k+CXhlIp+VJDzib5qe5NmblNnQ5+bh7XlIqvEKQ2YPvwupTW2uP82IlBPAec5GtSd32hfsx5pqGAXpTTLZo2F8JMrrCe7/PJgn1VZJrKJNqqtI/PSj0PpzbImITQSw02Al2o9QnyBgBV4MLGS/6ouRc/En5pOK7AXsRvS1mLwYXzV737eT/LH3nXp8oldt18viqUq07eZ0LXpOYsIX1zAoaPR2nj36BWKOVAzeiTpFVjjrvmeuLv6PNLRdVKT9xGYLR6jRkcU9Mtt7gRZHLnZ949AZ641f+BtC2BeKv9X3J2CuiB7hZbgE3Nio/aGyQLS21nWJD6FvAkb99oav+TYa8ZcEmfalPu4biJ5/wKdaD256y5yl982JDozkkJtEXbu0eEuJDh0b22wfzSd8a3prrJZqhPnJPmMg0VORwKB1uycfKHMtAwu2H9cOMSsVuo9NBUO9NlGarU1ck1CGPuPkL/GOIzAXu9rFfeyQl2SXnJ8v7saNRwKKSETxR5FEYnVKeZkyD4yTz3IPjxkJNSuh7ypZIjJK/0GVpGC7S5iAwqy2Fzv4YKbzZOXCrRZCUM7aTTPkO3YCuat1DIOhhxD0RkGjuuhgGYYfadTOYYeWi9WeP3Ae+zoBocjkm8dWGQeEzDxY0/8+KZMFbp/mOMoYZC3+TE1leIqiDFTUutzDj0T5eUDNrLLlTL80AM+JcXRInK7XxQcgMgzHBJ</div><script src="/lib/crypto-js.js"></script><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
        <tags>
            
            <tag> 日记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018-11-02日记</title>
      <link href="/2018/11/02/cjyqrrcx1000bk8u9v6dqg7vc/"/>
      <url>/2018/11/02/cjyqrrcx1000bk8u9v6dqg7vc/</url>
      
        <content type="html"><![CDATA[<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><div id="hbe-security">  <div class="hbe-input-container">  <input type="password" class="hbe-form-control" id="pass" placeholder="Welcome to my blog, ener password to read." />    <label for="pass">Welcome to my blog, ener password to read.</label>    <div class="bottom-line"></div>  </div></div><div id="decryptionError" style="display: none;">Incorrect Password!</div><div id="noContentError" style="display: none;">No content to display!</div><div id="encrypt-blog" style="display:none">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</div><script src="/lib/crypto-js.js"></script><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
        <tags>
            
            <tag> 日记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018-11-01日记</title>
      <link href="/2018/11/01/cjyqrrcwk0004k8u9p5fj1971/"/>
      <url>/2018/11/01/cjyqrrcwk0004k8u9p5fj1971/</url>
      
        <content type="html"><![CDATA[<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><div id="hbe-security">  <div class="hbe-input-container">  <input type="password" class="hbe-form-control" id="pass" placeholder="Welcome to my blog, ener password to read." />    <label for="pass">Welcome to my blog, ener password to read.</label>    <div class="bottom-line"></div>  </div></div><div id="decryptionError" style="display: none;">Incorrect Password!</div><div id="noContentError" style="display: none;">No content to display!</div><div id="encrypt-blog" style="display:none">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</div><script src="/lib/crypto-js.js"></script><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
        <tags>
            
            <tag> 日记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018-10-31日记</title>
      <link href="/2018/11/01/cjyqrrcwh0003k8u9gkqqkrwq/"/>
      <url>/2018/11/01/cjyqrrcwh0003k8u9gkqqkrwq/</url>
      
        <content type="html"><![CDATA[<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><div id="hbe-security">  <div class="hbe-input-container">  <input type="password" class="hbe-form-control" id="pass" placeholder="Welcome to my blog, ener password to read." />    <label for="pass">Welcome to my blog, ener password to read.</label>    <div class="bottom-line"></div>  </div></div><div id="decryptionError" style="display: none;">Incorrect Password!</div><div id="noContentError" style="display: none;">No content to display!</div><div id="encrypt-blog" style="display:none">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</div><script src="/lib/crypto-js.js"></script><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
        <tags>
            
            <tag> 日记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018-10-29日记</title>
      <link href="/2018/10/30/cjyqrrcw50000k8u9j4qqgkx3/"/>
      <url>/2018/10/30/cjyqrrcw50000k8u9j4qqgkx3/</url>
      
        <content type="html"><![CDATA[<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><div id="hbe-security">  <div class="hbe-input-container">  <input type="password" class="hbe-form-control" id="pass" placeholder="Welcome to my blog, ener password to read." />    <label for="pass">Welcome to my blog, ener password to read.</label>    <div class="bottom-line"></div>  </div></div><div id="decryptionError" style="display: none;">Incorrect Password!</div><div id="noContentError" style="display: none;">No content to display!</div><div id="encrypt-blog" style="display:none">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</div><script src="/lib/crypto-js.js"></script><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
        <tags>
            
            <tag> 日记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018-10-30日记</title>
      <link href="/2018/10/30/cjyqrrcwc0001k8u92nuvud9e/"/>
      <url>/2018/10/30/cjyqrrcwc0001k8u92nuvud9e/</url>
      
        <content type="html"><![CDATA[<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><div id="hbe-security">  <div class="hbe-input-container">  <input type="password" class="hbe-form-control" id="pass" placeholder="Welcome to my blog, ener password to read." />    <label for="pass">Welcome to my blog, ener password to read.</label>    <div class="bottom-line"></div>  </div></div><div id="decryptionError" style="display: none;">Incorrect Password!</div><div id="noContentError" style="display: none;">No content to display!</div><div id="encrypt-blog" style="display:none">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</div><script src="/lib/crypto-js.js"></script><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
        <tags>
            
            <tag> 日记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dnsCheck</title>
      <link href="/2018/07/10/cjyqrrcxk000ok8u91br4p40x/"/>
      <url>/2018/07/10/cjyqrrcxk000ok8u91br4p40x/</url>
      
        <content type="html"><![CDATA[<p>使用dig命令进行检测。<br>运行 dig 主机记录命令进行检测或者运行 dig 主机记录 @8.8.8.8命令指定使用谷歌DNS进行验证。例如， dig txt b.aliyuntest.com @8.8.8.8。<br><img src="http://oepv0v7je.bkt.clouddn.com/18-7-10/92556404.jpg" alt><br>如果返回结果中存在类似图示中的TXT记录，且记录值与订单进度页面中的记录值一致，表示您的DNS配置正确且已生效；如果记录值不同，请按照订单进度页面中的记录值在DNS域名解析服务商处更新该验证记录。<br>如果返回结果中不存在TXT记录，可能是DNS配置有误或者配置未生效。如配置错误，请按照订单进度页面中的配置要求在DNS域名解析服务商处重新配置；如果配置长时间未生效，请联系域名托管商。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>linux常用命令</title>
      <link href="/2018/07/02/cjyqrrcxm000pk8u9vg0ak515/"/>
      <url>/2018/07/02/cjyqrrcxm000pk8u9vg0ak515/</url>
      
        <content type="html"><![CDATA[<ol><li>查看apt-get下载的软件的位置</li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>gitlab安装教程</title>
      <link href="/2018/06/28/cjyqrrd3p001wk8u9ra86j6jh/"/>
      <url>/2018/06/28/cjyqrrd3p001wk8u9ra86j6jh/</url>
      
        <content type="html"><![CDATA[<blockquote><p>这是一片关于GitLab的安装教程以及踩过的坑</p></blockquote><p>浪费了一个下午的时间，终于把Gitlab搭建完成，搭建环境如下：</p><ul><li><p>系统（虚拟机）</p><p>  Distributor ID:    Ubuntu</p><p>  Description:    Ubuntu 18.04 LTS</p><p>  Release:    18.04</p><p>  Codename:    bionic</p></li><li><p>gitlab V11.0.1</p></li></ul><a id="more"></a><h2 id="安装Gitlab"><a href="#安装Gitlab" class="headerlink" title="安装Gitlab"></a>安装Gitlab</h2><p>这里有一个问题，gitlab官方源太慢了，一个gitlab安装包要<code>500M+</code>如果直接下载，很容易挂掉，或者等很久，所以这里要替换源。不过似乎在阿里云上搭载的话，会很快，不用更换。</p><p>这里推荐 <a href="https://mirrors.tuna.tsinghua.edu.cn/" target="_blank" rel="noopener">清华大学开源软件镜像站</a> 里面有不少的镜像源，其中就包括了gitlab的。</p><p>具体地址是</p><pre><code>deb http://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/ubuntu bionic main</code></pre><blockquote><p>注意其中 <code>bionic</code> 是系统代号，比如我的ubuntu 18 代号就是 <code>bionic</code> 其他的系统可以使用 <code>lsb_relase</code> 命令自行查询。</p></blockquote><p><strong>使用方法</strong> <a href="https://mirrors.tuna.tsinghua.edu.cn/help/gitlab-ce/" target="_blank" rel="noopener">参考</a></p><ol><li><p>信任 GitLab 的 GPG 公钥:</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">curl https://packages.gitlab.com/gpg.key 2&gt; /dev/null | sudo apt-key add - &amp;&gt;/dev/null<br></code></pre></td></tr></table></figure></li><li><p>设置源</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd /etc/apt/sources.list.d<br>vim gitlab-ce.list<br></code></pre></td></tr></table></figure></li><li><p>编辑gitlab-ce.list 输入以下内容</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">deb https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/ubuntu/ bionic main<br></code></pre></td></tr></table></figure></li><li><p>更新并安装</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt-get update<br>sudo apt-get install gitlab-ce<br></code></pre></td></tr></table></figure></li><li><p>配置gitlab</p><p> 由于gitlab要用到域名，所以需要准备好域名。由于我是用虚拟机搭建，所以公共域名用不了，所以我就自己搭建了一个域名服务。可以参考可选步骤，搭建私有DNS服务器。</p><p> 配置文件是 <code>/etc/gitlab/gitlab.rb</code> 文件，因为文件内容过多，就简单的把会用到的配置列出来</p><ol><li><p>域名，这个设计到了gitlab系统自动生成的链接，所以必须修改为<strong>自己的域名</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs undefined"># external_url &apos;http://gitlab.explme.com&apos;<br>external_url &apos;http://kirno.com&apos;<br></code></pre></td></tr></table></figure></li><li><p>配置时区，由于默认是UTC，导致使用的时候时间不正确，所以需要修改为本地的时区</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs undefined"># gitlab_rails[&apos;time_zone&apos;] = &apos;UTC&apos;<br>gitlab_rails[&apos;time_zone&apos;] = &apos;Asia/Shanghai&apos;<br></code></pre></td></tr></table></figure></li><li><p>邮件，由于gitlab会通过邮箱找回密码或者认证，所以需要配置。原本是使用系统自己的邮件系统，但是我不会配置，所以就是用了QQ邮箱作为发送方</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs undefined">gitlab_rails[&apos;smtp_enable&apos;] = true<br>gitlab_rails[&apos;smtp_address&apos;] = &quot;smtp.qq.com&quot;<br>gitlab_rails[&apos;smtp_port&apos;] = 465<br># 发送方的邮箱完整地址 xx@qq.com<br>gitlab_rails[&apos;smtp_user_name&apos;] = &quot;XXX&quot;<br># 这里是发送方的QQ邮箱地址，也就是和上面的一样<br>gitlab_rails[&apos;gitlab_email_from&apos;] = &apos;XXX&apos;<br># 密码，注意这里要使用QQ邮箱的 授权码 不是密码，可以在设置，账户处找到<br>gitlab_rails[&apos;smtp_password&apos;] = &quot;xxx&quot;    <br>gitlab_rails[&apos;smtp_domain&apos;] = &quot;smtp.qq.com&quot;<br>gitlab_rails[&apos;smtp_authentication&apos;] = &quot;login&quot;<br>gitlab_rails[&apos;smtp_enable_starttls_auto&apos;] = true<br>gitlab_rails[&apos;smtp_tls&apos;] = true<br></code></pre></td></tr></table></figure></li></ol></li></ol><p>配置完成后初始化 gitlab 时间比较久</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gitlab-ctl reconfigure<br></code></pre></td></tr></table></figure><p>可以通过以下命令测试邮件</p><pre><code><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 进入控制台</span><br>gitlab-rails console<br><span class="hljs-comment"># 发送邮件</span><br>Notify.test_email(<span class="hljs-string">"收件人邮箱"</span>, <span class="hljs-string">"标题"</span>, <span class="hljs-string">"内容"</span>).deliver_now<br></code></pre></td></tr></table></figure></code></pre><p>然后就可以在浏览器通过域名访问了</p><h2 id="汉化教程"><a href="#汉化教程" class="headerlink" title="汉化教程"></a>汉化教程</h2><p>默认的gitlab是英文，可以选择进行汉化，不过其实汉化并不完整。</p><ol><li><p><a href="https://gitlab.com/xhang/gitlab/tags" target="_blank" rel="noopener">下载汉化文件</a> 文件比较大在 48m+ 左右，而且下载比较慢，所以建议下载完拉上服务器。</p><blockquote><p>一定要注意版本，已安装的gitlab版本可以通过 <code>cat /opt/gitlab/embedded/service/gitlab-rails/VERSION</code> 命令查看</p></blockquote></li><li><p>下载完之后解压，通过 <code>cat gitlab/VERSION</code> 查看是版本是否匹配，如果版本不匹配可能会导致gitlab崩溃，所以小心</p></li><li><p>停止gitlab</p></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs undefined">gitlab-ctl stop<br></code></pre></td></tr></table></figure><ol start="3"><li>覆盖 </li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">cp -rf gitlab/* /opt/gitlab/embedded/service/gitlab-rails/<br></code></pre></td></tr></table></figure><ol start="4"><li>重新配置gitlab并启动它</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">gitlab-ctl reconfigure<br>gitlab-ctl restart<br></code></pre></td></tr></table></figure><h2 id="使用现有的Nginx作为服务器"><a href="#使用现有的Nginx作为服务器" class="headerlink" title="使用现有的Nginx作为服务器"></a>使用现有的Nginx作为服务器</h2><p>这个地方巨坑，真的是巨坑，被卡在这里太久了😭。<br>首先通过apt-get或者从官网下载的nginx，如果没有注意的话都不行，因为他们默认都不支持 <code>Passenger</code> 这是个巨坑啊，多少次因为这个摔鼠标了🖱️。虽然网上有教程通过 passenger-install-nginx-modules 的方式来重新安装nginx，但是这个的编译过程贼慢，我的双核4g云服务器完全卡死在这了，所以不推荐。还有的办法就是通过利用 <code>nginx 1.9</code> 以上的版本的动态模块加载功能来实现。</p><ol><li>安装 <code>ruby</code> 没办法，passenger依赖 <code>ruby</code></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt install ruby<br></code></pre></td></tr></table></figure><ol start="2"><li>安装 <code>passenger</code> 安装这个东西最好换源，否则巨慢</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">换源</span><br>gem sources --add https://gems.ruby-china.com/ --remove https://rubygems.org/<br><span class="hljs-meta">$</span><span class="bash"> gem sources -l</span><br>https://gems.ruby-china.com<br><span class="hljs-meta">#</span><span class="bash"> 确保只有 gems.ruby-china.com</span><br><span class="hljs-meta"><br>#</span><span class="bash">安装</span><br>gem install passenger<br></code></pre></td></tr></table></figure><ol start="3"><li>下载nginx源码，编译模块，<a href="https://www.phusionpassenger.com/library/install/nginx/install_as_nginx_module.html" target="_blank" rel="noopener">参考</a></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd /path-to-nginx-source-dir<br>./configure --prefix=/opt/nginx \<br>  --add-dynamic-module=$(passenger-config --nginx-addon-dir) \<br>  --add-module=/path-to-some-other-nginx-module<br>make<br>sudo make install<br></code></pre></td></tr></table></figure><ol start="4"><li>配置现有的nginx的配置文件 <code>nginx.conf</code>, 添加</li></ol><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs nginx">#user  nobody;<br>worker_processes  1;<br><br>#============重点================================<br>load_module modules/ngx_http_passenger_module.so;<br>#===============================================<br><br>events &#123;<br>    worker_connections  1024;<br>&#125;<br><br><br>http &#123;<br>    include       mime.types;<br>    default_type  application/octet-stream;<br><br>    #============重点===如果忘记passenger的目录了，可以通过 passenger-config --root 指令来获取=============================<br>    passenger_root /var/lib/gems/2.3.0/gems/passenger-5.3.3;<br>    #===============================================<br><br>    sendfile        on;<br><br>    keepalive_timeout  65;<br>    ...<br></code></pre></td></tr></table></figure><ol start="5"><li>重中之重，这里最坑，配置了好了<code>nginx</code>之后报了一个奇葩🤮的错误</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs undefined">2018/07/10 10:44:19 [crit] 28138#0: *3739 connect() to unix:/tmp/passenger.uPSo3Mj/agents.s/core failed (2: No such file or directory) while connecting to upstream, client: 119.127.17.115, server: xxx, request: &quot;GET / HTTP/1.1&quot;, upstream: &quot;passenger:unix:/tmp/passenger.uPSo3Mj/agents.s/core:&quot;, host: &quot;xxx&quot;<br></code></pre></td></tr></table></figure><p>这个地方浪费了我一个下午加半个早上🌞，多次想放弃，网上还找不到资料。其实解决也很简单，就是重启nginx，不能简单的<code>nginx -s reload</code> 或者 <code>nginx -s reopen</code> 的重启，没有效果的，必须要先 <code>kill</code> 了nginx的进程然后再重新运行 <code>nginx</code> 才行😭。为了解决这个问题，我重装了gitlab，各种百度，谷歌，差点就去看gitlab源码了😭。手抖重启ngxin后成功看到<code>/tmp</code>下创建<code>passenger.xxx</code>文件，太开心了。然后刷新页面果然成功</p><ol start="6"><li>一定要记住配置 <code>passenger_root /var/lib/gems/2.3.0/gems/passenger-5.3.3;</code> 否则也会出现403错误</li></ol><p><img src="http://oepv0v7je.bkt.clouddn.com/18-7-10/20173328.jpg" alt="成功图"></p><h2 id="可选-搭建私有DNS服务器"><a href="#可选-搭建私有DNS服务器" class="headerlink" title="(可选)搭建私有DNS服务器"></a>(可选)搭建私有DNS服务器</h2><p>网上基本都是 <code>bind9</code> 的教程，所以我也就使用它来搭建。</p><p>首先安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt-get install bind9<br></code></pre></td></tr></table></figure><p>安装了之后，有几个路径需要了解</p><ul><li>/etc/bind 用于存放主要的配置文件</li><li>/var/cache/bind 用于存放域名相关的配置文件</li></ul><p>比如我要创建一个 <code>kirno.com</code> 的域名</p><p>首先编辑 <code>/etc/bind/named.conf.local</code> 文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs undefined">// 这里的 kirno.com 就是想要创建的域名<br>zone &quot;kirno.com&quot; &#123;    <br>    type master;<br><br>    // 这个对应着 /var/cache/bind 里面的解析配置文件的名字<br>    file &quot;db.kirno.com&quot;;<br>&#125;;<br></code></pre></td></tr></table></figure><p>然后把 <code>/etc/bind</code> 目录下的解析配置模板 <code>db.local</code> 复制到 <code>/var/cache/bind</code> 里面</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">cp /etc/<span class="hljs-built_in">bind</span>/db.local.com /var/cache/<span class="hljs-built_in">bind</span>/db.kirno.com<br></code></pre></td></tr></table></figure><p>编辑 <code>/var/cache/bind/db.kirno.com</code> 把其中的</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs undefined">@INA127.0.0.1<br></code></pre></td></tr></table></figure><p>改为</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs undefined">@INA192.168.2.100<br></code></pre></td></tr></table></figure><blockquote><p>其中 <code>192.168.2.100</code> 是你想解析的域名对应着的ip</p></blockquote><p>最后编辑 <code>/etc/bind/named.conf.options</code> 文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs undefined">options &#123;<br>directory &quot;/var/cache/bind&quot;;<br><br>// If there is a firewall between you and nameservers you want<br>// to talk to, you may need to fix the firewall to allow multiple<br>// ports to talk.  See http://www.kb.cert.org/vuls/id/800113<br><br>// If your ISP provided one or more IP addresses for stable <br>// nameservers, you probably want to use them as forwarders.  <br>// Uncomment the following block, and insert the addresses replacing <br>// the all-0&apos;s placeholder.<br><br>forwarders &#123;<br> 223.5.5.5;<br>&#125;;<br><br>//========================================================================<br>// If BIND logs error messages about the root key being expired,<br>// you will need to update your keys.  See https://www.isc.org/bind-keys<br>//========================================================================<br>dnssec-validation auto;<br><br>auth-nxdomain no;    # conform to RFC1035<br>listen-on-v6 &#123; any; &#125;;<br>&#125;;<br></code></pre></td></tr></table></figure><blockquote><p>其中 <code>223.5.5.5</code> 是阿里云的DNS，这里的意思其实是如果本地找不到相应的域名，就会交给第三方DNS服务器处理,所以改成任意的可使用的第三方域名服务器即可。</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> gitlab </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bt搜索脚本</title>
      <link href="/2018/06/19/cjyqrrcxs000sk8u9qgqw061a/"/>
      <url>/2018/06/19/cjyqrrcxs000sk8u9qgqw061a/</url>
      
        <content type="html"><![CDATA[<h2 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h2><pre><code class="javascript">javascript:pachong();<span class="function"><span class="keyword">function</span> <span class="title">pachong</span>(<span class="params"></span>) </span>{<span class="keyword">var</span> currentUrl = location.href;<span class="keyword">if</span> (currentUrl.indexOf(<span class="string">"http://sdkcloud.pro/"</span>) == <span class="number">-1</span>) {<span class="keyword">var</span> query = prompt(<span class="string">"请输入想要搜索的资源关键字"</span>);<span class="keyword">if</span>(query.trim()){<span class="keyword">var</span> sdkUrl = <span class="string">"http://sdkcloud.pro/xfs.php?s="</span>+query;location.href = sdkUrl;}} <span class="keyword">else</span> {addBtn();}}<span class="function"><span class="keyword">function</span> <span class="title">addBtn</span>(<span class="params"></span>)</span>{<span class="keyword">var</span> list = <span class="built_in">document</span>.querySelectorAll(<span class="string">".T1 a"</span>);list.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>{<span class="keyword">var</span> l = item.href;<span class="keyword">var</span> mag = l.substring(<span class="number">20</span>, l.length);<span class="keyword">var</span> url =  <span class="string">"https://apiv.ga/magnet/"</span>+mag;<span class="keyword">var</span> btn = <span class="string">"&lt;a style='margin-left:5px;text-decoration:none;border:1px solid #efefef;border-radius:4px;font-size:15px;padding:5px' href='"</span>+url+<span class="string">"' target='view_window'&gt;%E6%92%AD%E6%94%BE&lt;/a&gt;"</span>;item.innerHTML = item.innerHTML + btn;});}</code></pre><a id="more"></a><p>准备，</p><p>创建收藏夹，然后名字随便填写，网址填入上述脚本即可</p><p>chrome:</p><ol><li>打开书签管理器 <code>alt+ctr+B</code></li><li>添加网址</li><li>按照下图填写<br><img src="http://i4.buimg.com/567571/cbc2cc2efe423ace.png" alt></li></ol><p>其它浏览器类似，反正就是加入到收藏夹就可以了</p><p>使用方法</p><p>在任意网页点击，输入想要观看的资源，也可以是帮助协和社会更加和谐的资源</p><p><img src="http://i2.buimg.com/567571/056c5bde613f7c07.png" alt></p><p>然后会跳转到资源页面，在资源页面再点击一次</p><p><img src="http://i2.buimg.com/567571/a4b0f5a147a6c273.png" alt></p><p>点击播放即可</p><p><img src="http://i2.buimg.com/567571/4e3701e0b54b1d0e.png" alt></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>通过源码来编译nginx</title>
      <link href="/2018/06/19/cjyqrrcy40011k8u9kyj2ai02/"/>
      <url>/2018/06/19/cjyqrrcy40011k8u9kyj2ai02/</url>
      
        <content type="html"><![CDATA[<p>使用配置参数进行编译。它定义了系统的各个方面,包含了nginx所允许的链接方法。配置后会生成一个 <code>Makefile</code> 文件. 以下是配置支持的参数:</p><p><code>--prefix=path</code> — 定义一个用于保存服务器的目录 This same directory will also be used for all relative paths set by configure (except for paths to libraries sources) and in the nginx.conf configuration file. It is set to the /usr/local/nginx directory by default.</p><p>–sbin-path=path — sets the name of an nginx executable file. This name is used only during installation. By default the file is named prefix/sbin/nginx.</p><p>–conf-path=path — sets the name of an nginx.conf configuration file. If needs be, nginx can always be started with a different configuration file, by specifying it in the command-line parameter -c file. By default the file is named prefix/conf/nginx.conf.<br><a id="more"></a><br>–pid-path=path — sets the name of an nginx.pid file that will store the process ID of the main process. After installation, the file name can always be changed in the nginx.conf configuration file using the pid directive. By default the file is named prefix/logs/nginx.pid.</p><p>–error-log-path=path — sets the name of the primary error, warnings, and diagnostic file. After installation, the file name can always be changed in the nginx.conf configuration file using the error_log directive. By default the file is named prefix/logs/error.log.</p><p>–http-log-path=path — sets the name of the primary request log file of the HTTP server. After installation, the file name can always be changed in the nginx.conf configuration file using the access_log directive. By default the file is named prefix/logs/access.log.</p><p>–build=name — sets an optional nginx build name.</p><p>–user=name — sets the name of an unprivileged user whose credentials will be used by worker processes. After installation, the name can always be changed in the nginx.conf configuration file using the user directive. The default user name is nobody.</p><p>–group=name — sets the name of a group whose credentials will be used by worker processes. After installation, the name can always be changed in the nginx.conf configuration file using the user directive. By default, a group name is set to the name of an unprivileged user.</p><p>–with-select_module<br>–without-select_module — enables or disables building a module that allows the server to work with the select() method. This module is built automatically if the platform does not appear to support more appropriate methods such as kqueue, epoll, or /dev/poll.</p><p>–with-poll_module<br>–without-poll_module — enables or disables building a module that allows the server to work with the poll() method. This module is built automatically if the platform does not appear to support more appropriate methods such as kqueue, epoll, or /dev/poll.</p><p>–without-http_gzip_module — disables building a module that compresses responses of an HTTP server. The zlib library is required to build and run this module.</p><p>–without-http_rewrite_module — disables building a module that allows an HTTP server to redirect requests and change URI of requests. The PCRE library is required to build and run this module.</p><p>–without-http_proxy_module — disables building an HTTP server proxying module.</p><p>–with-http_ssl_module — enables building a module that adds the HTTPS protocol support to an HTTP server. This module is not built by default. The OpenSSL library is required to build and run this module.</p><p>–with-pcre=path — sets the path to the sources of the PCRE library. The library distribution (version 4.4 — 8.40) needs to be downloaded from the PCRE site and extracted. The rest is done by nginx’s ./configure and make. The library is required for regular expressions support in the location directive and for the ngx_http_rewrite_module module.</p><p>–with-pcre-jit — builds the PCRE library with “just-in-time compilation” support (1.1.12, the pcre_jit directive).</p><p>–with-zlib=path — sets the path to the sources of the zlib library. The library distribution (version 1.1.3 — 1.2.11) needs to be downloaded from the zlib site and extracted. The rest is done by nginx’s ./configure and make. The library is required for the ngx_http_gzip_module module.</p><p>–with-cc-opt=parameters — sets additional parameters that will be added to the CFLAGS variable. When using the system PCRE library under FreeBSD, –with-cc-opt=”-I /usr/local/include” should be specified. If the number of files supported by select() needs to be increased it can also be specified here such as this: –with-cc-opt=”-D FD_SETSIZE=2048”.</p><p>–with-ld-opt=parameters — sets additional parameters that will be used during linking. When using the system PCRE library under FreeBSD, –with-ld-opt=”-L /usr/local/lib” should be specified.</p><p>Example of parameters usage (all of this needs to be typed in one line):</p><p>./configure<br>    –sbin-path=/usr/local/nginx/nginx<br>    –conf-path=/usr/local/nginx/nginx.conf<br>    –pid-path=/usr/local/nginx/nginx.pid<br>    –with-http_ssl_module<br>    –with-pcre=../pcre-8.40<br>    –with-zlib=../zlib-1.2.11<br>After configuration, nginx is compiled and installed using make.</p><p>./configure \<br>–prefix=/etc/nginx \<br>–add-dynamic-module=$(passenger-config –nginx-addon-dir) \<br>–with-openssl=/home/kirno/download/openssl-1.0.2o \<br>–with-pcre=/home/kirno/download/pcre-8.42 \<br>–with-zlib=/home/kirno/download/zlib-1.2.11 \<br>–with-http_ssl_module \<br>–with-threads \<br>–with-debug \<br>–with-http_v2_module</p>]]></content>
      
      
      
        <tags>
            
            <tag> nginx </tag>
            
            <tag> 编译 </tag>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PL2303HX 的驱动安装</title>
      <link href="/2018/06/19/cjyqrrcx4000dk8u9vcaxfhgt/"/>
      <url>/2018/06/19/cjyqrrcx4000dk8u9vcaxfhgt/</url>
      
        <content type="html"><![CDATA[<blockquote><p>由于官方不再支持PL2303HX,所以就没有了win10上可用的官方驱动.有一个应该是民间高手的人补充了这个空白</p></blockquote><p><a href="http://www.ifamilysoftware.com/news37.html" target="_blank" rel="noopener">官网下载</a></p><p><a href="https://pan.baidu.com/s/1N33jAnw1XGreeLBNxHSpSA" target="_blank" rel="noopener">百度备份下载</a> 密码: t65v</p><p>下载完之后安装就可以了</p>]]></content>
      
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>node 远程调试</title>
      <link href="/2018/06/19/cjyqrrcy0000xk8u9jskk6vpa/"/>
      <url>/2018/06/19/cjyqrrcy0000xk8u9jskk6vpa/</url>
      
        <content type="html"><![CDATA[<ol><li><p>进入项目根目录，假如启动个文件在 <code>./bin/www</code> 这里。</p></li><li><p>命令</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">node --inspect=0.0.0.0:3001 bin/www<br></code></pre></td></tr></table></figure><p> 其中 <code>0.0.0.0</code> 表示监听的Ip地址，全0 表示任意地方可以访问。3001 是访问端口 bin/www 就是程序的启动文件</p><a id="more"></a></li><li><p>打开 Chrome 输入地址 <code>chrome://inspect</code> </p><p> <img src="http://oepv0v7je.bkt.clouddn.com/18-3-9/66188112.jpg" alt></p><p> 选择 <code>Configure</code> 在弹出来的窗口输入 远程服务器的 IP 和 端口 然后 点击 <code>Done</code> 就可以了</p></li><li><p>等待以下出现</p><p> <img src="http://oepv0v7je.bkt.clouddn.com/18-3-9/2925952.jpg" alt></p><p> 点击 <code>inspect</code> 即可开始调试</p></li><li><p>进入 <code>source</code> 界面就可以断点了</p><p> <img src="http://oepv0v7je.bkt.clouddn.com/18-3-9/2879619.jpg" alt></p></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitHub库整理</title>
      <link href="/2018/06/19/cjyqrrcxc000jk8u97vk4582p/"/>
      <url>/2018/06/19/cjyqrrcxc000jk8u97vk4582p/</url>
      
        <content type="html"><![CDATA[<p><strong>javascript</strong></p><ol><li><p><a href="https://github.com/axios/axios" target="_blank" rel="noopener">axios</a> ⭐38,326</p><p>  javascript的 http client 库</p></li><li><p><a href="https://github.com/react-community/create-react-native-app" target="_blank" rel="noopener">create-react-native-app</a> ⭐8,843</p><p> 简介：辅助创建 react-native 程序</p><p> <a href="https://github.com/react-community/create-react-native-app/blob/master/react-native-scripts/template/README.md" target="_blank" rel="noopener">开发文档</a></p><a id="more"></a></li><li><p><a href="https://github.com/facebook/create-react-app" target="_blank" rel="noopener">create-react-app</a> ⭐45,526</p><p> 简介: 辅助创建 react-app 程序</p><p> <a href="https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md#advanced-configuration" target="_blank" rel="noopener">开发文档</a></p></li><li><p><a href="https://github.com/nhnent/tui.editor" target="_blank" rel="noopener">tui.editor</a> ⭐5,989</p><p> 简介: markdown编译器</p><p> <a href="http://ui.toast.com/tui-editor/" target="_blank" rel="noopener">开发文档</a></p></li></ol><p><strong>android</strong></p><ol><li><p><a href="https://github.com/square/picasso" target="_blank" rel="noopener">picasso</a> ⭐15,153</p><p> 简介: 基于android的图片加载库</p><p> <a href="http://square.github.io/picasso/" target="_blank" rel="noopener">开发文档</a></p></li></ol><p><strong>python</strong></p><ol><li><p><a href="https://github.com/Prinsphield/Wechat_AutoJump" target="_blank" rel="noopener">Wechat_AutoJump</a> ⭐1,261</p><p> 简介: 跳一跳的python版本开挂程序，利用了图片识别和人工ai，值得学习</p><p> <a href="http://square.github.io/picasso/" target="_blank" rel="noopener">开发文档</a></p></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> gitHub </tag>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>协议</title>
      <link href="/2018/06/19/cjyqrrcy20010k8u9j1i6zj5e/"/>
      <url>/2018/06/19/cjyqrrcy20010k8u9j1i6zj5e/</url>
      
        <content type="html"><![CDATA[<h1 id="2018年5月5日"><a href="#2018年5月5日" class="headerlink" title="2018年5月5日"></a>2018年5月5日</h1><h3 id="机台发送给客户端"><a href="#机台发送给客户端" class="headerlink" title="机台发送给客户端"></a>机台发送给客户端</h3><table><thead><tr><th>字段</th><th style="text-align:center">类型</th><th style="text-align:right">说明</th></tr></thead><tbody><tr><td>clientId</td><td style="text-align:center">string</td><td style="text-align:right">唯一识别码</td></tr><tr><td>col 2 is</td><td style="text-align:center">centered</td><td style="text-align:right">$12</td></tr><tr><td>col 3 is</td><td style="text-align:center">right-aligned</td><td style="text-align:right">$1</td></tr></tbody></table><ol><li><p>主题<code>zbc/client/death</code> 死亡主题:</p><p> 描述:    当客户端掉线的时候发送</p><p> 等级:  &gt;=1</p><p> 数据:</p></li></ol><table><thead><tr><th>字段</th><th>类型</th><th>说明</th><th>例子</th></tr></thead><tbody><tr><td>clientId</td><td>string</td><td>唯一识别码</td><td>0201</td></tr></tbody></table><ol start="2"><li><p>主题 <code>zbc/client/login</code> 连接主题</p><p> 描述:    机台连接上来后发送</p><p> 等级:    &gt;=1</p><p> 数据:</p></li></ol><table><thead><tr><th>字段</th><th>类型</th><th>说明</th><th>例子</th></tr></thead><tbody><tr><td>clientId</td><td>string</td><td>唯一识别码</td><td>0201</td></tr></tbody></table><a id="more"></a><ol start="3"><li><p>主题 <code>zbc/client/circle</code> 转圈主题</p><p> 描述:    每转一圈就发送一次数据到服务器</p><p> 等级:    &gt;=1</p><p> 数据:</p></li></ol><table><thead><tr><th>字段</th><th>类型</th><th>说明</th><th>例子</th></tr></thead><tbody><tr><td>clientId</td><td>string</td><td>唯一识别码</td><td>0201</td></tr><tr><td>circle</td><td>number</td><td>转数</td><td>20</td></tr><tr><td>totalCircle</td><td>number</td><td>总转数</td><td>100</td></tr><tr><td>userId</td><td>string</td><td>操作员ID</td><td>sdfef</td></tr><tr><td>orderId</td><td>string</td><td>当前布票ID</td><td>dfdfdsdf</td></tr><tr><td>orderNum</td><td>number</td><td>落布数</td><td>10</td></tr></tbody></table><ol start="3"><li><p>主题 <code>zbc/client/ccd</code> 扫描条形码数据</p><p> 描述:    机台扫描二维码后发送给服务器</p><p> 等级:    &gt;=1</p><p> 数据:</p></li></ol><table><thead><tr><th>字段</th><th>类型</th><th>说明</th><th>例子</th></tr></thead><tbody><tr><td>clientId</td><td>string</td><td>唯一识别码</td><td>0201</td></tr><tr><td>code</td><td>string</td><td>条形码数据</td><td>02215158</td></tr></tbody></table><hr><h3 id="服务端发送给机台"><a href="#服务端发送给机台" class="headerlink" title="服务端发送给机台"></a>服务端发送给机台</h3><ol><li><p>主题 <code>zbc/server/唯一识别码/changeUser</code> 更换操作员</p><p> 描述:    机台更换操作员</p><p> 等级:    &gt;=1</p><p> 数据:</p></li></ol><table><thead><tr><th>字段</th><th>类型</th><th>说明</th><th>例子</th></tr></thead><tbody><tr><td>userName</td><td>string</td><td>操作员姓名</td><td>张三</td></tr><tr><td>userId</td><td>string</td><td>用户ID</td><td>26d51fd5f</td></tr></tbody></table><ol><li><p>主题 <code>zbc/server/唯一识别码/login</code> 机台历史数据</p><p> 描述:    机台登陆后,服务器发送给他历史数据,也就是断网前的数据</p><p> 等级:    &gt;=1</p><p> 数据:</p></li></ol><table><thead><tr><th>字段</th><th>类型</th><th>说明</th><th>例子</th></tr></thead><tbody><tr><td>clientNum</td><td>string</td><td>机台号</td><td>001</td></tr><tr><td>circle</td><td>number</td><td>转数</td><td>20</td></tr><tr><td>totalCircle</td><td>number</td><td>总转数</td><td>100</td></tr><tr><td>userId</td><td>string</td><td>操作员ID</td><td>sdfef</td></tr><tr><td>userName</td><td>string</td><td>操作员姓名</td><td>张三</td></tr><tr><td>orderId</td><td>string</td><td>当前布票ID</td><td>dfdfdsdf</td></tr><tr><td>orderNum</td><td>number</td><td>落布数</td><td>10</td></tr></tbody></table><ol><li><p>主题 <code>zbc/server/唯一识别码/ccd</code> 布票数据</p><p> 描述:    机台CCD扫描后,服务端把布票数据发送给机台</p><p> 等级:    &gt;=1</p><p> 数据:</p></li></ol><table><thead><tr><th>字段</th><th>类型</th><th>说明</th><th>例子</th></tr></thead><tbody><tr><td>orderNum</td><td>string</td><td>布票号</td><td>02123548</td></tr></tbody></table><ol><li><p>主题 <code>zbc/server/唯一识别码/init</code> 添加机台设备的时候发送</p><p> 描述:    添加设备的时候发一次给单片机,让单片机记录</p><p> 等级:    &gt;=1</p><p> 数据:</p></li></ol><table><thead><tr><th>字段</th><th>类型</th><th>说明</th><th>例子</th></tr></thead><tbody><tr><td>clientNum</td><td>string</td><td>机台号</td><td>001</td></tr></tbody></table><ol><li><p>主题 <code>zbc/server/唯一识别码/error</code> 错误信息</p><p> 描述:    如果出现错误,服务端会把错误发送给机台</p><p> 等级:    &gt;=1</p><p> 数据:</p></li></ol><table><thead><tr><th>字段</th><th>类型</th><th>说明</th><th>例子</th></tr></thead><tbody><tr><td>msg</td><td>string</td><td>错误信息</td><td>该员工已离职</td></tr></tbody></table><p>​         </p>]]></content>
      
      
      
        <tags>
            
            <tag> 协议 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c#调用数据库之Dapper</title>
      <link href="/2018/06/19/cjyqrrcy60013k8u92jm5mulg/"/>
      <url>/2018/06/19/cjyqrrcy60013k8u92jm5mulg/</url>
      
        <content type="html"><![CDATA[<p>这里记录一下Dapper的使用方式，这个库有点像java的<code>mybatis</code>可以很方便的把查询出来的数据映射到对象上面去。</p><ol><li><p><strong>安装</strong></p><ol><li><p>通过 NetGet 就可以安装了，vs自带的一个包管理工具</p><p><img src="http://oepv0v7je.bkt.clouddn.com/18-3-6/97896696.jpg" alt></p><a id="more"></a></li></ol></li><li><strong>初始化</strong> <ol><li>通过</li></ol></li></ol><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> IDbConnection <span class="hljs-title">GetConnection</span>(<span class="hljs-params"></span>)</span><br>&#123;<br>    <span class="hljs-comment">// CONN_STR 这个是链接字符串，比如 postgresql 的链接字符串是</span><br>    <span class="hljs-comment">// private static string CONN_STR = "PORT=5432;DATABASE=test;HOST=localhost;PASSWORD=123456;USER ID=postgres";</span><br>    <span class="hljs-keyword">var</span> connection = <span class="hljs-keyword">new</span> NpgsqlConnection(CONN_STR);<br>    connection.Open();<br>    <span class="hljs-keyword">return</span> connection;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li>使用<ol><li>查询一个</li></ol></li></ol><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SqlHelper</span><br>   &#123;<br>       <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">string</span> CONN_STR = <span class="hljs-string">"PORT=5432;DATABASE=test;HOST=localhost;PASSWORD=123456;USER ID=postgres"</span>;<br><br><br>       <span class="hljs-function"><span class="hljs-keyword">public</span> IDbConnection <span class="hljs-title">GetConnection</span>(<span class="hljs-params"></span>)</span><br>       &#123;<br><br>           <span class="hljs-keyword">var</span> connection = <span class="hljs-keyword">new</span> NpgsqlConnection(CONN_STR);<br><br>           connection.Open();<br><br><br>           <span class="hljs-keyword">return</span> connection;<br>       &#125;<br><br>       <span class="hljs-keyword">public</span> List&lt;T&gt; All&lt;T&gt;(<span class="hljs-keyword">string</span> sql)<br>       &#123;<br>           <span class="hljs-keyword">var</span> con = GetConnection();<br>           <span class="hljs-keyword">var</span> list = con.Query&lt;T&gt;(sql).ToList();<br>           con.Close();<br>           <span class="hljs-keyword">return</span> list;<br>       &#125;<br><br>       <span class="hljs-keyword">internal</span> List&lt;T&gt; All&lt;T&gt;(<span class="hljs-keyword">string</span> sql, <span class="hljs-keyword">object</span> p)<br>       &#123;<br>           <span class="hljs-keyword">var</span> con = GetConnection();<br>           <span class="hljs-keyword">var</span> list = con.Query&lt;T&gt;(sql, p).ToList();<br>           con.Close();<br>           <span class="hljs-keyword">return</span> list;<br>       &#125;<br><br>       <span class="hljs-keyword">internal</span> T First&lt;T&gt;(<span class="hljs-keyword">string</span> sql, <span class="hljs-keyword">object</span> p)<br>       &#123;<br>           <span class="hljs-keyword">var</span> con = GetConnection();<br>           <span class="hljs-keyword">var</span> first = con.QuerySingle&lt;T&gt;(sql, p);<br>           con.Close();<br>           <span class="hljs-keyword">return</span> first;<br>       &#125;<br><br>       <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">Add</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> sql, <span class="hljs-keyword">object</span> obj</span>)</span><br>       &#123;<br>           <span class="hljs-keyword">var</span> con = GetConnection();<br>           <span class="hljs-keyword">var</span> row = con.Execute(sql, obj);<br>           con.Close();<br>           <span class="hljs-keyword">return</span> row;<br>       &#125;<br><br>       <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> <span class="hljs-title">AddAndGetId</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> sql, <span class="hljs-keyword">object</span> obj</span>)</span><br>       &#123;<br>           <span class="hljs-keyword">var</span> con = GetConnection();<br>           <span class="hljs-keyword">var</span> row = con.Execute(sql, obj);<br>           <span class="hljs-keyword">if</span> (row != <span class="hljs-number">1</span>)<br>           &#123;<br>               con.Close();<br>               <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;<br>           &#125;<br>           <span class="hljs-keyword">const</span> <span class="hljs-keyword">string</span> sql2 = <span class="hljs-string">"select last_insert_id()"</span>;<br>           <span class="hljs-keyword">var</span> re = con.Query&lt;<span class="hljs-keyword">string</span>&gt;(sql2).ToArray();<br>           con.Close();<br>           <span class="hljs-keyword">return</span> re[<span class="hljs-number">0</span>];<br>       &#125;<br><br>       <span class="hljs-function"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">int</span> <span class="hljs-title">Update</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> sql, <span class="hljs-keyword">object</span> worker</span>)</span><br>       &#123;<br>           <span class="hljs-keyword">var</span> con = GetConnection();<br>           <span class="hljs-keyword">var</span> row = con.Execute(sql, worker);<br>           con.Close();<br>           <span class="hljs-keyword">return</span> row;<br>       &#125;<br><br>       <span class="hljs-meta">#<span class="hljs-meta-keyword">region</span> 单例模式</span><br><br>       <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SqlHelper _instance;<br><br>       <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">SqlHelper</span>(<span class="hljs-params"></span>)</span><br>       &#123;<br>       &#125;<br><br>       <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SqlHelper <span class="hljs-title">GetInstance</span>(<span class="hljs-params"></span>)</span><br>       &#123;<br>           <span class="hljs-keyword">return</span> _instance ?? (_instance = <span class="hljs-keyword">new</span> SqlHelper());<br>       &#125;<br><br>       <span class="hljs-meta">#<span class="hljs-meta-keyword">endregion</span></span><br>   &#125;<br></code></pre></td></tr></table></figure><p>也比较简单，调用的时候</p><p><code>SqlHelper.getInstance().First&lt;Order&gt;(&quot;select * from order where id = @Id&quot;, new {Id = &quot;123456&quot;})</code></p><p>其中 Order 是实体类，对应着数据库的字段。</p><hr><p>以上是简单用法，下面的是复杂用法</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">var</span> sql = <span class="hljs-string">"select * from user left join address where userId = @UserId"</span>;<br><span class="hljs-keyword">var</span> procedureList = con.Query&lt;User, Address, User&gt;(sql,<br>(user, address) =&gt;<br>&#123;<br>    user.address = address;<br>    <span class="hljs-keyword">return</span> user;<br>&#125;, <span class="hljs-keyword">new</span> &#123;UserId = <span class="hljs-string">"123456"</span>&#125;).ToList();<br></code></pre></td></tr></table></figure><p><code>IDbConnection</code>这是一个接口，里面有一个Query函数，这个函数接受多个泛型，至于多少个，与关联的表有关，比如 一个 用户<code>User</code> 有多个 地址<code>Address</code> ,那么第一个泛型就是用户，第二个泛型就是Address，第三个就是要返回的对象。然后再实现对象之间的关系。最后返回的对象就是一个填充过数据的对象了，非常好用。</p>]]></content>
      
      
      
        <tags>
            
            <tag> c# </tag>
            
            <tag> Dapper </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>categories</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>tags</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
